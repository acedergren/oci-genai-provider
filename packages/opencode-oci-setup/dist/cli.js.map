{"version":3,"sources":["../src/cli.ts","../src/utils/logger.ts","../src/flows/profile.ts","../src/utils/prompts.ts","../src/flows/compartment.ts","../src/flows/models.ts","../src/flows/config.ts","../src/types.ts"],"sourcesContent":["/**\n * OpenCode OCI GenAI Setup CLI\n *\n * Interactive setup wizard for configuring OCI GenAI provider in OpenCode.\n * Supports both auto-discovery from ~/.oci/config and manual configuration.\n */\n\nimport { program } from 'commander';\nimport chalk from 'chalk';\n\nimport type { CLIOptions } from './types.js';\nimport { createLogger } from './utils/logger.js';\nimport { checkExistingSetup, getProfile } from './flows/profile.js';\nimport { getCompartmentId } from './flows/compartment.js';\nimport { selectModels, askCodingOptimization } from './flows/models.js';\nimport { installPackage, generateConfig, showSuccessMessage } from './flows/config.js';\n\nconst VERSION = '0.1.0';\n\n// Main CLI entry point\nprogram\n  .name('opencode-oci-setup')\n  .description('Setup wizard for OCI GenAI provider in OpenCode')\n  .version(VERSION)\n  .option('-p, --profile <name>', 'OCI profile name')\n  .option('-c, --compartment <ocid>', 'Compartment OCID')\n  .option('-y, --yes', 'Skip confirmations')\n  .option('-q, --quiet', 'Minimal output')\n  .action(main);\n\nprogram.parse();\n\n/**\n * Main setup flow\n */\nasync function main(options: CLIOptions): Promise<void> {\n  const log = createLogger(options.quiet ?? false);\n\n  log.log(chalk.bold.blue('\\nüîß OpenCode OCI GenAI Setup\\n'));\n\n  // Step 0: Check for existing setup\n  const { mode, existingConfig } = await checkExistingSetup(options, log);\n\n  if (mode === 'cancel') {\n    log.log(chalk.gray('\\nSetup cancelled. Your existing configuration is unchanged.\\n'));\n    process.exit(0);\n  }\n\n  if (mode === 'modify') {\n    log.log(chalk.cyan('\\nüìù Modifying existing configuration...\\n'));\n    // TODO: Implement modify flow - for now falls through to fresh setup\n  }\n\n  // Step 1: Get OCI profile\n  const profile = await getProfile(options, log);\n\n  if (!profile) {\n    log.error(chalk.red('Setup cancelled.'));\n    process.exit(1);\n  }\n\n  // Step 2: Get compartment ID\n  const compartmentId = await getCompartmentId(profile.name, options, log);\n\n  if (!compartmentId) {\n    log.error(chalk.red('No compartment selected. Exiting.'));\n    process.exit(1);\n  }\n\n  // Step 3: Select models\n  const selectedModels = await selectModels(profile.region, options, log);\n\n  if (selectedModels.length === 0) {\n    log.error(chalk.red('No models selected. Exiting.'));\n    process.exit(1);\n  }\n\n  // Step 4: Coding optimization\n  const enableCodingOptimization = await askCodingOptimization(options, log);\n\n  // Step 5: Install package\n  installPackage(log);\n\n  // Step 6: Generate config\n  generateConfig(\n    profile.name,\n    compartmentId,\n    selectedModels,\n    enableCodingOptimization,\n    existingConfig,\n    log\n  );\n\n  // Step 7: Success message\n  showSuccessMessage(selectedModels, enableCodingOptimization, log);\n}\n","/**\n * Logger utility that respects quiet mode\n */\n\nimport type { Logger } from '../types.js';\n\n/**\n * Create a logger that respects quiet mode\n */\nexport function createLogger(quiet: boolean): Logger {\n  return {\n    log: quiet ? () => {} : console.log,\n    error: console.error,\n    warn: quiet ? () => {} : console.warn,\n  };\n}\n","/**\n * Profile selection and configuration flow\n *\n * Handles:\n * - Existing OCI config detection and profile selection\n * - Credential validation\n * - Manual configuration for users without OCI CLI\n */\n\nimport chalk from 'chalk';\nimport ora from 'ora';\nimport open from 'open';\nimport * as fs from 'node:fs';\nimport * as os from 'node:os';\nimport * as path from 'node:path';\n\nimport {\n  parseOCIConfig,\n  hasOCIConfig,\n  validateCredentials,\n  OCI_REGIONS,\n  writeOCIConfig,\n  isValidOCID,\n  type OCIProfile,\n  type ManualSetupInfo,\n} from '@acedergren/oci-genai-provider/config';\n\nimport type { CLIOptions, Logger, ExistingSetupResult, SetupMode } from '../types.js';\nimport { select, text, confirm } from '../utils/prompts.js';\n\n/**\n * Check for existing config and ask user how to proceed\n */\nexport async function checkExistingSetup(\n  options: CLIOptions,\n  log: Logger\n): Promise<ExistingSetupResult> {\n  const configPath = path.join(os.homedir(), '.config/opencode/opencode.json');\n\n  if (!fs.existsSync(configPath)) {\n    return { mode: 'fresh' };\n  }\n\n  // Parse existing config\n  let existingConfig: Record<string, unknown> | undefined;\n  try {\n    existingConfig = JSON.parse(fs.readFileSync(configPath, 'utf-8')) as Record<string, unknown>;\n  } catch {\n    // Invalid JSON, treat as fresh\n    return { mode: 'fresh' };\n  }\n\n  // Check if OCI provider is already configured\n  const hasOCIProvider = !!(existingConfig as { provider?: { 'oci-genai'?: unknown } })?.provider?.[\n    'oci-genai'\n  ];\n\n  if (!hasOCIProvider) {\n    // Config exists but no OCI provider, we can add to it\n    log.log(chalk.yellow('üìã Existing opencode.json found (without OCI GenAI)\\n'));\n    return { mode: 'fresh', existingConfig };\n  }\n\n  // OCI provider exists - ask user what to do\n  log.log(chalk.yellow('üìã Existing OCI GenAI configuration found!\\n'));\n\n  if (options.yes) {\n    // Non-interactive mode: default to fresh\n    return { mode: 'fresh', existingConfig };\n  }\n\n  const setupMode = await select<SetupMode>({\n    message: 'How would you like to proceed?',\n    choices: [\n      {\n        title: 'Start fresh',\n        value: 'fresh',\n        description: 'Replace existing OCI GenAI config (other providers preserved)',\n      },\n      {\n        title: 'Modify current setup',\n        value: 'modify',\n        description: 'Add/remove models, change settings',\n      },\n      {\n        title: 'Cancel',\n        value: 'cancel',\n        description: 'Keep existing configuration',\n      },\n    ],\n  });\n\n  return { mode: setupMode ?? 'cancel', existingConfig };\n}\n\n/**\n * Get an OCI profile - either from existing config or via manual setup\n */\nexport async function getProfile(\n  options: CLIOptions,\n  log: Logger\n): Promise<OCIProfile | undefined> {\n  if (hasOCIConfig()) {\n    return handleExistingConfig(options, log);\n  }\n  return handleMissingConfig(options, log);\n}\n\n/**\n * Handle existing OCI config - parse and select profile\n */\nasync function handleExistingConfig(\n  options: CLIOptions,\n  log: Logger\n): Promise<OCIProfile | undefined> {\n  const configResult = parseOCIConfig();\n\n  if (!configResult.found || configResult.profiles.length === 0) {\n    log.log(chalk.yellow('‚ö†Ô∏è  OCI config file is empty or invalid\\n'));\n    return handleMissingConfig(options, log);\n  }\n\n  log.log(chalk.green(`‚úì Found OCI config with ${configResult.profiles.length} profile(s)\\n`));\n\n  // Select profile\n  let selectedProfileName = options.profile;\n\n  if (!selectedProfileName) {\n    selectedProfileName = await select({\n      message: 'Select OCI profile:',\n      choices: configResult.profiles.map((p) => ({\n        title: `${p.name} (${p.region})`,\n        value: p.name,\n        description: p.keyFileValid ? '‚úì Key file found' : '‚úó Key file missing',\n      })),\n    });\n  }\n\n  if (!selectedProfileName) {\n    return undefined;\n  }\n\n  const profile = configResult.profiles.find((p) => p.name === selectedProfileName);\n\n  if (!profile) {\n    log.error(chalk.red(`Profile \"${selectedProfileName}\" not found.`));\n    return undefined;\n  }\n\n  log.log(`\\nUsing profile: ${chalk.cyan(profile.name)} (${profile.region})`);\n\n  // Validate credentials\n  const validateSpinner = ora('Validating OCI credentials...').start();\n  const validation = await validateCredentials(selectedProfileName);\n\n  if (validation.valid) {\n    validateSpinner.succeed(`Credentials valid (${validation.userName})`);\n  } else {\n    validateSpinner.fail(`Validation failed: ${validation.error}`);\n\n    if (!options.yes) {\n      const continueAnyway = await confirm({\n        message: 'Continue anyway?',\n        initial: false,\n      });\n\n      if (!continueAnyway) {\n        return undefined;\n      }\n    }\n  }\n\n  return profile;\n}\n\n/**\n * Handle missing OCI config - offer setup options\n */\nasync function handleMissingConfig(\n  _options: CLIOptions,\n  log: Logger\n): Promise<OCIProfile | undefined> {\n  log.log(chalk.yellow('‚ö†Ô∏è  OCI configuration not found at ~/.oci/config\\n'));\n\n  const setupMethod = await select({\n    message: 'How would you like to configure OCI credentials?',\n    choices: [\n      {\n        title: 'Enter credentials manually',\n        value: 'manual',\n        description: 'I have my OCI API key details ready',\n      },\n      {\n        title: 'Install OCI CLI first (recommended for beginners)',\n        value: 'oci-cli',\n        description: 'Opens setup guide in browser',\n      },\n      {\n        title: 'Exit',\n        value: 'exit',\n      },\n    ],\n  });\n\n  if (setupMethod === 'oci-cli') {\n    log.log('\\nüìñ Opening OCI CLI setup guide...\\n');\n    const url = 'https://docs.oracle.com/iaas/Content/API/SDKDocs/cliinstall.htm';\n    try {\n      await open(url);\n    } catch {\n      log.log(`Please visit: ${chalk.cyan(url)}`);\n    }\n    log.log('After completing OCI CLI setup, re-run: npx @acedergren/opencode-oci-setup\\n');\n    return undefined;\n  }\n\n  if (setupMethod === 'exit') {\n    return undefined;\n  }\n\n  // Manual configuration flow\n  return manualConfigurationFlow(log);\n}\n\n/**\n * Manual configuration flow - collect all OCI credentials\n */\nasync function manualConfigurationFlow(log: Logger): Promise<OCIProfile | undefined> {\n  log.log(chalk.bold('\\nüìù Manual OCI Configuration\\n'));\n  log.log('You will need the following information from the OCI Console:\\n');\n  log.log('  ‚Ä¢ User OCID (Identity > Users > Your User)');\n  log.log('  ‚Ä¢ Tenancy OCID (Administration > Tenancy Details)');\n  log.log('  ‚Ä¢ API Key Fingerprint (Identity > Users > API Keys)');\n  log.log('  ‚Ä¢ Private key file path\\n');\n\n  // Collect user OCID\n  const userOcid = await text({\n    message: 'Enter your User OCID:',\n    validate: (value) => {\n      if (!value) return 'User OCID is required';\n      if (!isValidOCID(value, 'user'))\n        return 'Invalid User OCID format (should start with ocid1.user.)';\n      return true;\n    },\n  });\n\n  if (!userOcid) return undefined;\n\n  // Collect tenancy OCID\n  const tenancyOcid = await text({\n    message: 'Enter your Tenancy OCID:',\n    validate: (value) => {\n      if (!value) return 'Tenancy OCID is required';\n      if (!isValidOCID(value, 'tenancy'))\n        return 'Invalid Tenancy OCID format (should start with ocid1.tenancy.)';\n      return true;\n    },\n  });\n\n  if (!tenancyOcid) return undefined;\n\n  // Collect fingerprint\n  const fingerprint = await text({\n    message: 'Enter your API Key Fingerprint (aa:bb:cc:...):',\n    validate: (value) => {\n      if (!value) return 'Fingerprint is required';\n      // Basic fingerprint validation (XX:XX:XX format)\n      if (!/^[a-f0-9]{2}(:[a-f0-9]{2}){15}$/i.test(value)) {\n        return 'Invalid fingerprint format (should be aa:bb:cc:...)';\n      }\n      return true;\n    },\n  });\n\n  if (!fingerprint) return undefined;\n\n  // Collect key file path\n  const defaultKeyPath = path.join(os.homedir(), '.oci/oci_api_key.pem');\n  const keyFilePath = await text({\n    message: 'Enter path to your private key file:',\n    initial: defaultKeyPath,\n    validate: (value) => {\n      if (!value) return 'Key file path is required';\n      const expandedPath = value.startsWith('~') ? path.join(os.homedir(), value.slice(1)) : value;\n      if (!fs.existsSync(expandedPath)) {\n        return `File not found: ${expandedPath}`;\n      }\n      return true;\n    },\n  });\n\n  if (!keyFilePath) return undefined;\n\n  // Select region\n  const region = await select({\n    message: 'Select your OCI region:',\n    choices: OCI_REGIONS.map((r) => ({\n      title: `${r.name} (${r.id})`,\n      value: r.id,\n    })),\n  });\n\n  if (!region) return undefined;\n\n  // Profile name\n  const profileName = await text({\n    message: 'Enter a name for this profile:',\n    initial: 'DEFAULT',\n    validate: (value) => (value ? true : 'Profile name is required'),\n  });\n\n  if (!profileName) return undefined;\n\n  // Write the OCI config file\n  const writeSpinner = ora('Writing OCI config file...').start();\n\n  try {\n    const setupInfo: ManualSetupInfo = {\n      user: userOcid,\n      tenancy: tenancyOcid,\n      fingerprint,\n      keyFilePath,\n      region,\n      profileName,\n    };\n\n    writeOCIConfig(setupInfo, false);\n    writeSpinner.succeed(`OCI config saved to ~/.oci/config`);\n\n    // Return the profile we just created\n    const expandedKeyPath = keyFilePath.startsWith('~')\n      ? path.join(os.homedir(), keyFilePath.slice(1))\n      : keyFilePath;\n\n    return {\n      name: profileName,\n      region,\n      user: userOcid,\n      tenancy: tenancyOcid,\n      fingerprint,\n      keyFile: expandedKeyPath,\n      keyFileValid: fs.existsSync(expandedKeyPath),\n    };\n  } catch (error) {\n    writeSpinner.fail('Failed to write OCI config');\n    log.error(chalk.red(`Error: ${error instanceof Error ? error.message : 'Unknown error'}`));\n    return undefined;\n  }\n}\n","/**\n * Prompts wrapper for easy library swapping\n *\n * This module wraps the prompts library to provide a consistent interface.\n * When migrating to @inquirer/prompts or another library, only this file needs to change.\n */\n\nimport prompts from 'prompts';\n\nexport interface SelectChoice<T = string> {\n  title: string;\n  value: T;\n  description?: string;\n  disabled?: boolean;\n  selected?: boolean;\n}\n\nexport interface SelectOptions<T = string> {\n  message: string;\n  choices: SelectChoice<T>[];\n}\n\nexport interface TextOptions {\n  message: string;\n  initial?: string;\n  validate?: (value: string) => boolean | string;\n}\n\nexport interface ConfirmOptions {\n  message: string;\n  initial?: boolean;\n}\n\nexport interface MultiSelectOptions<T = string> {\n  message: string;\n  choices: SelectChoice<T>[];\n  min?: number;\n  hint?: string;\n}\n\n/**\n * Select a single option from a list\n */\nexport async function select<T = string>(options: SelectOptions<T>): Promise<T | undefined> {\n  const result = (await prompts({\n    type: 'select',\n    name: 'value',\n    message: options.message,\n    choices: options.choices.map((c) => ({\n      title: c.title,\n      value: c.value,\n      description: c.description,\n      disabled: c.disabled,\n    })),\n  })) as { value?: T };\n  return result.value;\n}\n\n/**\n * Get text input from user\n */\nexport async function text(options: TextOptions): Promise<string | undefined> {\n  const result = (await prompts({\n    type: 'text',\n    name: 'value',\n    message: options.message,\n    initial: options.initial,\n    validate: options.validate,\n  })) as { value?: string };\n  return result.value;\n}\n\n/**\n * Get yes/no confirmation\n */\nexport async function confirm(options: ConfirmOptions): Promise<boolean> {\n  const result = (await prompts({\n    type: 'confirm',\n    name: 'value',\n    message: options.message,\n    initial: options.initial ?? false,\n  })) as { value?: boolean };\n  return result.value ?? false;\n}\n\n/**\n * Select multiple options from a list\n */\nexport async function multiselect<T = string>(options: MultiSelectOptions<T>): Promise<T[]> {\n  const result = (await prompts({\n    type: 'multiselect',\n    name: 'values',\n    message: options.message,\n    choices: options.choices\n      .filter((c) => !c.disabled)\n      .map((c) => ({\n        title: c.title,\n        value: c.value,\n        description: c.description,\n        selected: c.selected,\n      })),\n    min: options.min,\n    hint: options.hint,\n  })) as { values?: T[] };\n  return result.values ?? [];\n}\n","/**\n * Compartment discovery and selection flow\n *\n * Handles:\n * - Auto-discovery of compartments from OCI\n * - Manual compartment ID entry as fallback\n */\n\nimport chalk from 'chalk';\nimport ora from 'ora';\n\nimport { discoverCompartments, isValidOCID } from '@acedergren/oci-genai-provider/config';\n\nimport type { CLIOptions, Logger } from '../types.js';\nimport { select, text } from '../utils/prompts.js';\n\n/**\n * Get compartment ID - try auto-discovery first, fall back to manual\n */\nexport async function getCompartmentId(\n  profileName: string,\n  options: CLIOptions,\n  log: Logger\n): Promise<string | undefined> {\n  // Use CLI option if provided\n  if (options.compartment) {\n    return options.compartment;\n  }\n\n  // Try to auto-discover compartments\n  const compartmentSpinner = ora('Discovering compartments...').start();\n\n  try {\n    const compartments = await discoverCompartments(profileName);\n    compartmentSpinner.succeed(`Found ${compartments.length} compartment(s)`);\n\n    const compartment = await select({\n      message: 'Select compartment for GenAI API calls:',\n      choices: [\n        ...compartments.map((c) => ({\n          title: c.name,\n          value: c.id,\n          description: c.description || c.id.substring(0, 40) + '...',\n        })),\n        {\n          title: 'üìù Enter OCID manually',\n          value: 'manual',\n        },\n      ],\n    });\n\n    if (compartment === 'manual') {\n      return getManualCompartmentId(log);\n    }\n\n    return compartment;\n  } catch {\n    compartmentSpinner.fail('Could not auto-discover compartments');\n    log.log(chalk.yellow(`\\nThis usually means the credentials couldn't connect to OCI API.`));\n    log.log(chalk.yellow(`You can still enter a compartment OCID manually.\\n`));\n\n    return getManualCompartmentId(log);\n  }\n}\n\n/**\n * Get compartment ID manually\n */\nasync function getManualCompartmentId(log: Logger): Promise<string | undefined> {\n  log.log('\\nüí° Find your Compartment OCID in OCI Console:');\n  log.log('   Identity > Compartments > [Your Compartment] > OCID\\n');\n\n  const compartmentId = await text({\n    message: 'Enter Compartment OCID:',\n    validate: (value) => {\n      if (!value) return 'Compartment OCID is required';\n      if (!isValidOCID(value, 'compartment') && !isValidOCID(value, 'tenancy')) {\n        return 'Invalid OCID format (should start with ocid1.compartment. or ocid1.tenancy.)';\n      }\n      return true;\n    },\n  });\n\n  return compartmentId;\n}\n","/**\n * Model selection flow\n *\n * Handles:\n * - Filtering models by region availability\n * - Grouping models by family\n * - Coding optimization settings\n * - Pre-selecting recommended models\n */\n\nimport chalk from 'chalk';\n\nimport {\n  getModelsByRegion,\n  getAllModels,\n  getCodingRecommendedModels,\n  type OCIGenAIRegion,\n} from '@acedergren/oci-genai-provider';\n\nimport type { CLIOptions, Logger } from '../types.js';\nimport { confirm, multiselect, type SelectChoice } from '../utils/prompts.js';\n\n/**\n * Family display names for grouping\n */\nconst FAMILY_NAMES: Record<string, string> = {\n  grok: '‚îÄ‚îÄ Grok (xAI) ‚îÄ‚îÄ',\n  llama: '‚îÄ‚îÄ Llama (Meta) ‚îÄ‚îÄ',\n  cohere: '‚îÄ‚îÄ Command (Cohere) ‚îÄ‚îÄ',\n  gemini: '‚îÄ‚îÄ Gemini (Google) ‚îÄ‚îÄ',\n  openai: '‚îÄ‚îÄ GPT-OSS (OpenAI) ‚îÄ‚îÄ',\n};\n\n/**\n * Ask about coding optimization settings\n */\nexport async function askCodingOptimization(_options: CLIOptions, log: Logger): Promise<boolean> {\n  if (_options.yes) {\n    // Default to enabled in non-interactive mode\n    return true;\n  }\n\n  log.log(chalk.bold('\\nüîß Model Optimization\\n'));\n  log.log('Coding-optimized settings tune models for better code generation:');\n  log.log(chalk.gray('  ‚Ä¢ Lower temperature (0.2) - More consistent, deterministic code'));\n  log.log(chalk.gray('  ‚Ä¢ Higher max tokens (8192) - Support longer code outputs'));\n  log.log(chalk.gray('  ‚Ä¢ Frequency penalty (0.1) - Reduce repetitive patterns\\n'));\n\n  return confirm({\n    message: 'Enable coding-optimized settings for all models?',\n    initial: true,\n  });\n}\n\n/**\n * Select models to enable (filtered by region, with coding recommendations)\n */\nexport async function selectModels(\n  region: string,\n  _options: CLIOptions,\n  log: Logger\n): Promise<string[]> {\n  // Get models available in this region (exclude dedicated-only by default)\n  const regionModels = getModelsByRegion(region as OCIGenAIRegion, false);\n  const recommendedModels = getCodingRecommendedModels(region as OCIGenAIRegion);\n  const allModels = getAllModels();\n\n  if (regionModels.length === 0) {\n    log.log(chalk.yellow(`\\n‚ö†Ô∏è  No on-demand models found for region ${region}`));\n    log.log(chalk.yellow('   This region may only support dedicated AI clusters.\\n'));\n\n    // Fall back to showing all models\n    const useFallback = await confirm({\n      message: 'Show all models anyway? (may not work in this region)',\n      initial: false,\n    });\n\n    if (!useFallback) {\n      return [];\n    }\n  }\n\n  const modelsToShow = regionModels.length > 0 ? regionModels : allModels;\n\n  // Get recommended model IDs for pre-selection\n  const recommendedIds = new Set(recommendedModels.map((m) => m.id));\n\n  // Group models by family\n  const modelsByFamily = new Map<string, typeof modelsToShow>();\n  for (const model of modelsToShow) {\n    const family = model.family;\n    if (!modelsByFamily.has(family)) {\n      modelsByFamily.set(family, []);\n    }\n    modelsByFamily.get(family)!.push(model);\n  }\n\n  // Build choices with family headers\n  const modelChoices: SelectChoice<string>[] = [];\n\n  for (const [family, models] of modelsByFamily) {\n    const familyTitle = FAMILY_NAMES[family] || `‚îÄ‚îÄ ${family} ‚îÄ‚îÄ`;\n    modelChoices.push({ title: familyTitle, value: '', disabled: true });\n\n    for (const model of models) {\n      const contextStr =\n        model.contextWindow >= 1000000\n          ? `${Math.floor(model.contextWindow / 1000000)}M`\n          : `${Math.floor(model.contextWindow / 1000)}K`;\n      const visionStr = model.capabilities.vision ? 'üëÅ ' : '';\n      const toolsStr = model.capabilities.tools ? '' : '‚ö†Ô∏è no tools';\n      const recommendedStr = recommendedIds.has(model.id) ? '‚≠ê ' : '';\n\n      // Build description from coding note\n      const codingNote = (model as { codingNote?: string }).codingNote;\n\n      modelChoices.push({\n        title: `${recommendedStr}${model.id} (${visionStr}${contextStr})${toolsStr ? ' ' + toolsStr : ''}`,\n        value: model.id,\n        selected: recommendedIds.has(model.id),\n        description: codingNote,\n      });\n    }\n  }\n\n  // Add quick options\n  modelChoices.push({ title: '‚îÄ‚îÄ Quick Options ‚îÄ‚îÄ', value: '', disabled: true });\n  modelChoices.push({\n    title: '‚úì Select ALL models with tool support',\n    value: 'all-tools',\n    selected: false,\n  });\n  modelChoices.push({ title: '‚úì Select ALL models', value: 'all', selected: false });\n\n  const recommendedCount = recommendedModels.length;\n  log.log(chalk.gray(`\\nShowing ${modelsToShow.length} models available in ${region}`));\n  log.log(chalk.cyan(`‚≠ê = Recommended for coding (${recommendedCount} pre-selected)\\n`));\n\n  const selectedModels = await multiselect({\n    message: 'Select models to enable (space to select, enter to confirm):',\n    choices: modelChoices,\n    min: 1,\n    hint: '- Space to select, Enter to confirm',\n  });\n\n  if (selectedModels.length === 0) {\n    return [];\n  }\n\n  // Handle \"all\" selection\n  if (selectedModels.includes('all')) {\n    return modelsToShow.map((m) => m.id);\n  }\n\n  // Handle \"all with tools\" selection\n  if (selectedModels.includes('all-tools')) {\n    return modelsToShow.filter((m) => m.capabilities.tools).map((m) => m.id);\n  }\n\n  return selectedModels.filter((m) => m !== '');\n}\n","/**\n * Configuration generation flow\n *\n * Handles:\n * - Installing the OpenCode OCI package\n * - Generating opencode.json\n * - Preserving existing providers\n * - Success message display\n */\n\nimport chalk from 'chalk';\nimport ora from 'ora';\nimport * as fs from 'node:fs';\nimport * as os from 'node:os';\nimport * as path from 'node:path';\nimport { execFileSync } from 'node:child_process';\n\nimport { getAllModels } from '@acedergren/oci-genai-provider';\n\nimport type { Logger } from '../types.js';\nimport { CODING_SETTINGS } from '../types.js';\n\n/**\n * Install the OpenCode OCI package\n */\nexport function installPackage(log: Logger): void {\n  const opencodeDir = path.join(os.homedir(), '.config/opencode');\n  const installSpinner = ora('Installing @acedergren/opencode-oci-genai...').start();\n\n  try {\n    // Ensure OpenCode config directory exists\n    if (!fs.existsSync(opencodeDir)) {\n      fs.mkdirSync(opencodeDir, { recursive: true });\n    }\n\n    // Ensure package.json exists\n    const packageJsonPath = path.join(opencodeDir, 'package.json');\n    if (!fs.existsSync(packageJsonPath)) {\n      fs.writeFileSync(packageJsonPath, JSON.stringify({ dependencies: {} }, null, 2));\n    }\n\n    // Install using npm (execFileSync for security - no shell injection)\n    execFileSync('npm', ['install', '@acedergren/opencode-oci-genai'], {\n      cwd: opencodeDir,\n      stdio: 'pipe',\n    });\n\n    installSpinner.succeed('Package installed');\n  } catch (error) {\n    installSpinner.fail('Installation failed');\n\n    // Try to provide helpful error message\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n    if (errorMessage.includes('npm')) {\n      log.error(chalk.red('\\nMake sure npm is installed and in your PATH.'));\n    } else {\n      log.error(chalk.red(`\\nError: ${errorMessage}`));\n    }\n\n    log.log(chalk.yellow('\\nYou can install manually:'));\n    log.log(chalk.cyan(`  cd ~/.config/opencode && npm install @acedergren/opencode-oci-genai\\n`));\n  }\n}\n\n/**\n * Generate opencode.json configuration\n */\nexport function generateConfig(\n  profileName: string,\n  compartmentId: string,\n  selectedModels: string[],\n  enableCodingOptimization: boolean,\n  existingConfig: Record<string, unknown> | undefined,\n  log: Logger\n): void {\n  const configSpinner = ora('Generating opencode.json...').start();\n\n  const allModels = getAllModels();\n\n  // Build model configuration\n  const modelConfig: Record<string, unknown> = {};\n  for (const modelId of selectedModels) {\n    const meta = allModels.find((m) => m.id === modelId);\n    if (meta) {\n      modelConfig[modelId] = {\n        name: meta.name,\n        ...(meta.capabilities.vision && { attachment: true }),\n        limit: {\n          context: meta.contextWindow,\n          output: enableCodingOptimization ? CODING_SETTINGS.maxTokens : 8192,\n        },\n        // Add coding-optimized settings if enabled\n        ...(enableCodingOptimization && {\n          settings: {\n            temperature: CODING_SETTINGS.temperature,\n            frequencyPenalty: CODING_SETTINGS.frequencyPenalty,\n          },\n        }),\n      };\n    }\n  }\n\n  // Build the OCI GenAI provider config\n  const ociProviderConfig = {\n    npm: '@acedergren/opencode-oci-genai',\n    name: 'OCI GenAI',\n    options: {\n      compartmentId,\n      configProfile: profileName,\n    },\n    models: modelConfig,\n  };\n\n  // Build the full OpenCode config, preserving other providers if they exist\n  const existingProviders =\n    (existingConfig as { provider?: Record<string, unknown> })?.provider || {};\n  const openCodeConfig = {\n    $schema: 'https://opencode.ai/config.json',\n    // Preserve other top-level settings from existing config\n    ...(existingConfig && {\n      ...Object.fromEntries(\n        Object.entries(existingConfig).filter(([key]) => key !== '$schema' && key !== 'provider')\n      ),\n    }),\n    provider: {\n      // Preserve other providers (e.g., anthropic, openai)\n      ...Object.fromEntries(\n        Object.entries(existingProviders).filter(([key]) => key !== 'oci-genai')\n      ),\n      // Add/replace OCI GenAI provider\n      'oci-genai': ociProviderConfig,\n    },\n  };\n\n  // Write to ~/.config/opencode/opencode.json\n  const opencodeDir = path.join(os.homedir(), '.config/opencode');\n  const configPath = path.join(opencodeDir, 'opencode.json');\n\n  try {\n    // Ensure directory exists\n    if (!fs.existsSync(opencodeDir)) {\n      fs.mkdirSync(opencodeDir, { recursive: true });\n    }\n\n    fs.writeFileSync(configPath, JSON.stringify(openCodeConfig, null, 2));\n    configSpinner.succeed(`Configuration saved to ${configPath}`);\n  } catch (error) {\n    configSpinner.fail('Failed to write configuration');\n    log.error(chalk.red(`Error: ${error instanceof Error ? error.message : 'Unknown error'}`));\n  }\n}\n\n/**\n * Show success message with next steps\n */\nexport function showSuccessMessage(\n  selectedModels: string[],\n  enableCodingOptimization: boolean,\n  log: Logger\n): void {\n  log.log(chalk.bold.green('\\n‚úì Setup complete!\\n'));\n\n  // Show coding optimization status\n  if (enableCodingOptimization) {\n    log.log(chalk.cyan('üîß Coding optimization: ENABLED'));\n    log.log(chalk.gray('   ‚Ä¢ temperature: 0.2 (deterministic)'));\n    log.log(chalk.gray('   ‚Ä¢ maxTokens: 8192 (long outputs)'));\n    log.log(chalk.gray('   ‚Ä¢ frequencyPenalty: 0.1 (reduce repetition)\\n'));\n  } else {\n    log.log(chalk.gray('üîß Coding optimization: disabled (using defaults)\\n'));\n  }\n\n  log.log('Next steps:');\n  log.log(`  1. Start OpenCode: ${chalk.cyan('opencode')}`);\n  log.log(`  2. Select provider: ${chalk.cyan('/provider oci-genai')}`);\n  log.log(`  3. Select model: ${chalk.cyan('/model <model-name>')}`);\n  log.log('  4. Start chatting!\\n');\n\n  log.log('Enabled models:');\n  for (const modelId of selectedModels.slice(0, 5)) {\n    log.log(`  ${chalk.green('‚úì')} ${modelId}`);\n  }\n  if (selectedModels.length > 5) {\n    log.log(`  ${chalk.gray(`... and ${selectedModels.length - 5} more`)}`);\n  }\n  log.log('');\n\n  log.log(\n    chalk.gray('Tip: Run this wizard again anytime with: npx @acedergren/opencode-oci-setup\\n')\n  );\n}\n","/**\n * Shared types for the OpenCode OCI Setup CLI\n */\n\nimport type { OCIProfile } from '@acedergren/oci-genai-provider/config';\n\n/**\n * CLI command-line options\n */\nexport interface CLIOptions {\n  profile?: string;\n  compartment?: string;\n  yes?: boolean;\n  quiet?: boolean;\n}\n\n/**\n * Setup mode - fresh install or modify existing\n */\nexport type SetupMode = 'fresh' | 'modify' | 'cancel';\n\n/**\n * Result of checking existing setup\n */\nexport interface ExistingSetupResult {\n  mode: SetupMode;\n  existingConfig?: Record<string, unknown>;\n}\n\n/**\n * Logger interface that respects quiet mode\n */\nexport interface Logger {\n  log: (...args: unknown[]) => void;\n  error: (...args: unknown[]) => void;\n  warn: (...args: unknown[]) => void;\n}\n\n/**\n * Setup context passed through the flow\n */\nexport interface SetupContext {\n  options: CLIOptions;\n  log: Logger;\n  profile?: OCIProfile;\n  compartmentId?: string;\n  selectedModels?: string[];\n  enableCodingOptimization?: boolean;\n  existingConfig?: Record<string, unknown>;\n}\n\n/**\n * Coding-optimized model settings\n */\nexport const CODING_SETTINGS = {\n  temperature: 0.2, // More deterministic, consistent code\n  maxTokens: 8192, // Support longer code outputs\n  frequencyPenalty: 0.1, // Reduce repetitive patterns\n} as const;\n"],"mappings":"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","names":["chalk","chalk","ora","isValidOCID","ora","chalk","isValidOCID","chalk","chalk","chalk","ora","fs","os","path","getAllModels","ora","chalk","getAllModels","chalk"]}