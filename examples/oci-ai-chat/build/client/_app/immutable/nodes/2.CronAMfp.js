var Ts=Object.defineProperty;var kn=e=>{throw TypeError(e)};var As=(e,t,r)=>t in e?Ts(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var dt=(e,t,r)=>As(e,typeof t!="symbol"?t+"":t,r),Sn=(e,t,r)=>t.has(e)||kn("Cannot "+r);var et=(e,t,r)=>(Sn(e,t,"read from private field"),r?r.call(e):t.get(e)),Vt=(e,t,r)=>t.has(e)?kn("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),zn=(e,t,r,n)=>(Sn(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);import{a as T,f as M,c as Ce,t as Ie}from"../chunks/DMBfRyyZ.js";import{aL as Ia,aM as ka,aN as Ns,h as Se,B as zr,w as Zs,q as xr,b as Ps,L as Sa,i as _,N as Rs,O as $s,P as xn,Q as Or,z as Bt,aa as Cs,aE as js,am as On,D as pt,I as Mr,K as Ms,a5 as Ds,aC as Qr,aO as Ls,a9 as Tn,aP as Us,aQ as Fs,aH as Js,aR as Ue,aS as za,F as xa,H as Oa,aT as Tr,U as Ta,aU as Vs,aV as Bs,aB as qs,G as Gs,ay as Ws,M as Ys,aW as Hs,aX as Ks,aY as Xs,aZ as Qs,a_ as ei,aI as ti,a as ri,S as ni,a$ as ai,_ as $,aJ as re,Z as rt,p as wt,u as Ht,n as k,s as Z,o as I,t as q,m as Et,aK as Ge,f as fe,an as de,b0 as oi,b1 as si}from"../chunks/D_LdEIn5.js";import{s as J,d as or,e as An}from"../chunks/zUq2wEOL.js";import{B as ii,p as ze,i as F,b as ui}from"../chunks/B-Yz9b8_.js";const ci=[];function li(e,t=!1,r=!1){return Yt(e,new Map,"",ci,null,r)}function Yt(e,t,r,n,a=null,o=!1){if(typeof e=="object"&&e!==null){var i=t.get(e);if(i!==void 0)return i;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Ia(e)){var s=Array(e.length);t.set(e,s),a!==null&&t.set(a,s);for(var c=0;c<e.length;c+=1){var u=e[c];c in e&&(s[c]=Yt(u,t,r,n,null,o))}return s}if(ka(e)===Ns){s={},t.set(e,s),a!==null&&t.set(a,s);for(var l in e)s[l]=Yt(e[l],t,r,n,null,o);return s}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function"&&!o)return Yt(e.toJSON(),t,r,n,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function Dr(e,t){return t}function di(e,t,r){for(var n=[],a=t.length,o,i=t.length,s=0;s<a;s++){let d=t[s];Oa(d,()=>{if(o){if(o.pending.delete(d),o.done.add(d),o.pending.size===0){var m=e.outrogroups;Lr(Qr(o.done)),m.delete(o),m.size===0&&(e.outrogroups=null)}}else i-=1},!1)}if(i===0){var c=n.length===0&&r!==null;if(c){var u=r,l=u.parentNode;qs(l),l.append(u),e.items.clear()}Lr(t,!c)}else o={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(o)}function Lr(e,t=!0){for(var r=0;r<e.length;r++)Gs(e[r],t)}var Nn;function at(e,t,r,n,a,o=null){var i=e,s=new Map,c=(t&za)!==0;if(c){var u=e;i=Se?zr(Zs(u)):u.appendChild(xr())}Se&&Ps();var l=null,d=Ds(()=>{var g=r();return Ia(g)?g:g==null?[]:Qr(g)}),m,y=!0;function w(){p.fallback=l,fi(p,m,i,t,n),l!==null&&(m.length===0?(l.f&Ue)===0?xa(l):(l.f^=Ue,xt(l,null,i)):Oa(l,()=>{l=null}))}var v=Sa(()=>{m=_(d);var g=m.length;let b=!1;if(Se){var f=Rs(i)===$s;f!==(g===0)&&(i=xn(),zr(i),Or(!1),b=!0)}for(var z=new Set,x=pt,O=Ms(),A=0;A<g;A+=1){Se&&Bt.nodeType===Cs&&Bt.data===js&&(i=Bt,b=!0,Or(!1));var C=m[A],oe=n(C,A),Q=y?null:s.get(oe);Q?(Q.v&&On(Q.v,C),Q.i&&On(Q.i,A),O&&x.skipped_effects.delete(Q.e)):(Q=pi(s,y?i:Nn??(Nn=xr()),C,oe,A,a,t,r),y||(Q.e.f|=Ue),s.set(oe,Q)),z.add(oe)}if(g===0&&o&&!l&&(y?l=Mr(()=>o(i)):(l=Mr(()=>o(Nn??(Nn=xr()))),l.f|=Ue)),Se&&g>0&&zr(xn()),!y)if(O){for(const[me,he]of s)z.has(me)||x.skipped_effects.add(he.e);x.oncommit(w),x.ondiscard(()=>{})}else w();b&&Or(!0),_(d)}),p={effect:v,items:s,outrogroups:null,fallback:l};y=!1,Se&&(i=Bt)}function zt(e){for(;e!==null&&(e.f&Vs)===0;)e=e.next;return e}function fi(e,t,r,n,a){var Q,me,he,Oe,Te,je,U,se,pe;var o=(n&Bs)!==0,i=t.length,s=e.items,c=zt(e.effect.first),u,l=null,d,m=[],y=[],w,v,p,g;if(o)for(g=0;g<i;g+=1)w=t[g],v=a(w,g),p=s.get(v).e,(p.f&Ue)===0&&((me=(Q=p.nodes)==null?void 0:Q.a)==null||me.measure(),(d??(d=new Set)).add(p));for(g=0;g<i;g+=1){if(w=t[g],v=a(w,g),p=s.get(v).e,e.outrogroups!==null)for(const le of e.outrogroups)le.pending.delete(p),le.done.delete(p);if((p.f&Ue)!==0)if(p.f^=Ue,p===c)xt(p,null,r);else{var b=l?l.next:c;p===e.effect.last&&(e.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),Ve(e,l,p),Ve(e,p,b),xt(p,b,r),l=p,m=[],y=[],c=zt(l.next);continue}if((p.f&Tr)!==0&&(xa(p),o&&((Oe=(he=p.nodes)==null?void 0:he.a)==null||Oe.unfix(),(d??(d=new Set)).delete(p))),p!==c){if(u!==void 0&&u.has(p)){if(m.length<y.length){var f=y[0],z;l=f.prev;var x=m[0],O=m[m.length-1];for(z=0;z<m.length;z+=1)xt(m[z],f,r);for(z=0;z<y.length;z+=1)u.delete(y[z]);Ve(e,x.prev,O.next),Ve(e,l,x),Ve(e,O,f),c=f,l=O,g-=1,m=[],y=[]}else u.delete(p),xt(p,c,r),Ve(e,p.prev,p.next),Ve(e,p,l===null?e.effect.first:l.next),Ve(e,l,p),l=p;continue}for(m=[],y=[];c!==null&&c!==p;)(u??(u=new Set)).add(c),y.push(c),c=zt(c.next);if(c===null)continue}(p.f&Ue)===0&&m.push(p),l=p,c=zt(p.next)}if(e.outrogroups!==null){for(const le of e.outrogroups)le.pending.size===0&&(Lr(Qr(le.done)),(Te=e.outrogroups)==null||Te.delete(le));e.outrogroups.size===0&&(e.outrogroups=null)}if(c!==null||u!==void 0){var A=[];if(u!==void 0)for(p of u)(p.f&Tr)===0&&A.push(p);for(;c!==null;)(c.f&Tr)===0&&c!==e.fallback&&A.push(c),c=zt(c.next);var C=A.length;if(C>0){var oe=(n&za)!==0&&i===0?r:null;if(o){for(g=0;g<C;g+=1)(U=(je=A[g].nodes)==null?void 0:je.a)==null||U.measure();for(g=0;g<C;g+=1)(pe=(se=A[g].nodes)==null?void 0:se.a)==null||pe.fix()}di(e,A,oe)}}o&&Ta(()=>{var le,Ee;if(d!==void 0)for(p of d)(Ee=(le=p.nodes)==null?void 0:le.a)==null||Ee.apply()})}function pi(e,t,r,n,a,o,i,s){var c=(i&Us)!==0?(i&Fs)===0?Js(r,!1,!1):Tn(r):null,u=(i&Ls)!==0?Tn(a):null;return{v:c,i:u,e:Mr(()=>(o(t,c??r,u??a,s),()=>{e.delete(n)}))}}function xt(e,t,r){if(e.nodes)for(var n=e.nodes.start,a=e.nodes.end,o=t&&(t.f&Ue)===0?t.nodes.start:r;n!==null;){var i=Ws(n);if(o.before(n),n===a)return;n=i}}function Ve(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}function Ur(e,t,...r){var n=new ii(e);Sa(()=>{const a=t()??null;n.ensure(a,a&&(o=>a(o,...r)))},Ys)}function Aa(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Aa(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function mi(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Aa(e))&&(n&&(n+=" "),n+=t);return n}function Fr(e){return typeof e=="object"?mi(e):e??""}const Zn=[...` 	
\r\fÂ \v\uFEFF`];function hi(e,t,r){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),r){for(var a in r)if(r[a])n=n?n+" "+a:a;else if(n.length)for(var o=a.length,i=0;(i=n.indexOf(a,i))>=0;){var s=i+o;(i===0||Zn.includes(n[i-1]))&&(s===n.length||Zn.includes(n[s]))?n=(i===0?"":n.substring(0,i))+n.substring(s+1):i=s}}return n===""?null:n}function Pn(e,t=!1){var r=t?" !important;":";",n="";for(var a in e){var o=e[a];o!=null&&o!==""&&(n+=" "+a+": "+o+r)}return n}function vi(e,t){if(t){var r="",n,a;return Array.isArray(t)?(n=t[0],a=t[1]):n=t,n&&(r+=Pn(n)),a&&(r+=Pn(a,!0)),r=r.trim(),r===""?null:r}return String(e)}function Ne(e,t,r,n,a,o){var i=e.__className;if(Se||i!==r||i===void 0){var s=hi(r,n,o);(!Se||s!==e.getAttribute("class"))&&(s==null?e.removeAttribute("class"):e.className=s),e.__className=r}else if(o&&a!==o)for(var c in o){var u=!!o[c];(a==null||u!==!!a[c])&&e.classList.toggle(c,u)}return o}function Ar(e,t={},r,n){for(var a in r){var o=r[a];t[a]!==o&&(r[a]==null?e.style.removeProperty(a):e.style.setProperty(a,o,n))}}function Jr(e,t,r,n){var a=e.__style;if(Se||a!==t){var o=vi(t,n);(!Se||o!==e.getAttribute("style"))&&(o==null?e.removeAttribute("style"):e.style.cssText=o),e.__style=t}else n&&(Array.isArray(n)?(Ar(e,r==null?void 0:r[0],n[0]),Ar(e,r==null?void 0:r[1],n[1],"important")):Ar(e,r,n));return n}const gi=Symbol("is custom element"),_i=Symbol("is html");function yi(e){if(Se){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var n=e.value;Vr(e,"value",null),e.value=n}if(e.hasAttribute("checked")){var a=e.checked;Vr(e,"checked",null),e.checked=a}}};e.__on_r=r,Ta(r),Hs()}}function Vr(e,t,r,n){var a=bi(e);Se&&(a[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||a[t]!==(a[t]=r)&&(t==="loading"&&(e[Ks]=r),r==null?e.removeAttribute(t):typeof r!="string"&&wi(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function bi(e){return e.__attributes??(e.__attributes={[gi]:e.nodeName.includes("-"),[_i]:e.namespaceURI===Xs})}var Rn=new Map;function wi(e){var t=e.getAttribute("is")||e.nodeName,r=Rn.get(t);if(r)return r;Rn.set(t,r=[]);for(var n,a=e,o=Element.prototype;o!==a;){n=Qs(a);for(var i in n)n[i].set&&r.push(i);a=ka(a)}return r}function Ei(e,t,r=t){var n=new WeakSet;ei(e,"input",async a=>{var o=a?e.defaultValue:e.value;if(o=Nr(e)?Zr(o):o,r(o),pt!==null&&n.add(pt),await ti(),o!==(o=t())){var i=e.selectionStart,s=e.selectionEnd,c=e.value.length;if(e.value=o??"",s!==null){var u=e.value.length;i===s&&s===c&&u>c?(e.selectionStart=u,e.selectionEnd=u):(e.selectionStart=i,e.selectionEnd=Math.min(s,u))}}}),(Se&&e.defaultValue!==e.value||ri(t)==null&&e.value)&&(r(Nr(e)?Zr(e.value):e.value),pt!==null&&n.add(pt)),ni(()=>{var a=t();if(e===document.activeElement){var o=ai??pt;if(n.has(o))return}Nr(e)&&a===Zr(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function Nr(e){var t=e.type;return t==="number"||t==="range"}function Zr(e){return e===""?null:+e}var Na="vercel.ai.error",Ii=Symbol.for(Na),$n,Cn,Le=class Za extends(Cn=Error,$n=Ii,Cn){constructor({name:t,message:r,cause:n}){super(r),this[$n]=!0,this.name=t,this.cause=n}static isInstance(t){return Za.hasMarker(t,Na)}static hasMarker(t,r){const n=Symbol.for(r);return t!=null&&typeof t=="object"&&n in t&&typeof t[n]=="boolean"&&t[n]===!0}};function Pa(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var Ra="AI_InvalidArgumentError",$a=`vercel.ai.error.${Ra}`,ki=Symbol.for($a),jn,Mn,Si=class extends(Mn=Le,jn=ki,Mn){constructor({message:e,cause:t,argument:r}){super({name:Ra,message:e,cause:t}),this[jn]=!0,this.argument=r}static isInstance(e){return Le.hasMarker(e,$a)}},Ca="AI_JSONParseError",ja=`vercel.ai.error.${Ca}`,zi=Symbol.for(ja),Dn,Ln,Un=class extends(Ln=Le,Dn=zi,Ln){constructor({text:e,cause:t}){super({name:Ca,message:`JSON parsing failed: Text: ${e}.
Error message: ${Pa(t)}`,cause:t}),this[Dn]=!0,this.text=e}static isInstance(e){return Le.hasMarker(e,ja)}},Ma="AI_TypeValidationError",Da=`vercel.ai.error.${Ma}`,xi=Symbol.for(Da),Fn,Jn,_t=class Br extends(Jn=Le,Fn=xi,Jn){constructor({value:t,cause:r,context:n}){let a="Type validation failed";if(n!=null&&n.field&&(a+=` for ${n.field}`),n!=null&&n.entityName||n!=null&&n.entityId){a+=" (";const o=[];n.entityName&&o.push(n.entityName),n.entityId&&o.push(`id: "${n.entityId}"`),a+=o.join(", "),a+=")"}super({name:Ma,message:`${a}: Value: ${JSON.stringify(t)}.
Error message: ${Pa(r)}`,cause:r}),this[Fn]=!0,this.value=t,this.context=n}static isInstance(t){return Le.hasMarker(t,Da)}static wrap({value:t,cause:r,context:n}){var a,o,i;return Br.isInstance(r)&&r.value===t&&((a=r.context)==null?void 0:a.field)===(n==null?void 0:n.field)&&((o=r.context)==null?void 0:o.entityName)===(n==null?void 0:n.entityName)&&((i=r.context)==null?void 0:i.entityId)===(n==null?void 0:n.entityId)?r:new Br({value:t,cause:r,context:n})}};function h(e,t,r){function n(s,c){if(s._zod||Object.defineProperty(s,"_zod",{value:{def:c,constr:i,traits:new Set},enumerable:!1}),s._zod.traits.has(e))return;s._zod.traits.add(e),t(s,c);const u=i.prototype,l=Object.keys(u);for(let d=0;d<l.length;d++){const m=l[d];m in s||(s[m]=u[m].bind(s))}}const a=(r==null?void 0:r.Parent)??Object;class o extends a{}Object.defineProperty(o,"name",{value:e});function i(s){var c;const u=r!=null&&r.Parent?new o:this;n(u,s),(c=u._zod).deferred??(c.deferred=[]);for(const l of u._zod.deferred)l();return u}return Object.defineProperty(i,"init",{value:n}),Object.defineProperty(i,Symbol.hasInstance,{value:s=>{var c,u;return r!=null&&r.Parent&&s instanceof r.Parent?!0:(u=(c=s==null?void 0:s._zod)==null?void 0:c.traits)==null?void 0:u.has(e)}}),Object.defineProperty(i,"name",{value:e}),i}class vt extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class La extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const Ua={};function Ye(e){return Ua}function Fa(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,a])=>t.indexOf(+n)===-1).map(([n,a])=>a)}function qr(e,t){return typeof t=="bigint"?t.toString():t}function sr(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function en(e){return e==null}function tn(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function Oi(e,t){const r=(e.toString().split(".")[1]||"").length,n=t.toString();let a=(n.split(".")[1]||"").length;if(a===0&&/\d?e-\d?/.test(n)){const c=n.match(/\d?e-(\d?)/);c!=null&&c[1]&&(a=Number.parseInt(c[1]))}const o=r>a?r:a,i=Number.parseInt(e.toFixed(o).replace(".","")),s=Number.parseInt(t.toFixed(o).replace(".",""));return i%s/10**o}const Vn=Symbol("evaluating");function L(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==Vn)return n===void 0&&(n=Vn,n=r()),n},set(a){Object.defineProperty(e,t,{value:a})},configurable:!0})}function st(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Ke(...e){const t={};for(const r of e){const n=Object.getOwnPropertyDescriptors(r);Object.assign(t,n)}return Object.defineProperties({},t)}function Bn(e){return JSON.stringify(e)}function Ti(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Ja="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Tt(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Ai=sr(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function yt(e){if(Tt(e)===!1)return!1;const t=e.constructor;if(t===void 0||typeof t!="function")return!0;const r=t.prototype;return!(Tt(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function Va(e){return yt(e)?{...e}:Array.isArray(e)?[...e]:e}const Ni=new Set(["string","number","symbol"]);function bt(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Xe(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(n._zod.parent=e),n}function N(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Zi(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const Pi={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Ri(e,t){const r=e._zod.def,n=r.checks;if(n&&n.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const o=Ke(e._zod.def,{get shape(){const i={};for(const s in t){if(!(s in r.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&(i[s]=r.shape[s])}return st(this,"shape",i),i},checks:[]});return Xe(e,o)}function $i(e,t){const r=e._zod.def,n=r.checks;if(n&&n.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const o=Ke(e._zod.def,{get shape(){const i={...e._zod.def.shape};for(const s in t){if(!(s in r.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&delete i[s]}return st(this,"shape",i),i},checks:[]});return Xe(e,o)}function Ci(e,t){if(!yt(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0){const o=e._zod.def.shape;for(const i in t)if(Object.getOwnPropertyDescriptor(o,i)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const a=Ke(e._zod.def,{get shape(){const o={...e._zod.def.shape,...t};return st(this,"shape",o),o}});return Xe(e,a)}function ji(e,t){if(!yt(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r=Ke(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t};return st(this,"shape",n),n}});return Xe(e,r)}function Mi(e,t){const r=Ke(e._zod.def,{get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return st(this,"shape",n),n},get catchall(){return t._zod.def.catchall},checks:[]});return Xe(e,r)}function Di(e,t,r){const a=t._zod.def.checks;if(a&&a.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const i=Ke(t._zod.def,{get shape(){const s=t._zod.def.shape,c={...s};if(r)for(const u in r){if(!(u in s))throw new Error(`Unrecognized key: "${u}"`);r[u]&&(c[u]=e?new e({type:"optional",innerType:s[u]}):s[u])}else for(const u in s)c[u]=e?new e({type:"optional",innerType:s[u]}):s[u];return st(this,"shape",c),c},checks:[]});return Xe(t,i)}function Li(e,t,r){const n=Ke(t._zod.def,{get shape(){const a=t._zod.def.shape,o={...a};if(r)for(const i in r){if(!(i in o))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(o[i]=new e({type:"nonoptional",innerType:a[i]}))}else for(const i in a)o[i]=new e({type:"nonoptional",innerType:a[i]});return st(this,"shape",o),o}});return Xe(t,n)}function mt(e,t=0){var r;if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(((r=e.issues[n])==null?void 0:r.continue)!==!0)return!0;return!1}function ht(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function qt(e){return typeof e=="string"?e:e==null?void 0:e.message}function He(e,t,r){var a,o,i,s,c,u;const n={...e,path:e.path??[]};if(!e.message){const l=qt((i=(o=(a=e.inst)==null?void 0:a._zod.def)==null?void 0:o.error)==null?void 0:i.call(o,e))??qt((s=t==null?void 0:t.error)==null?void 0:s.call(t,e))??qt((c=r.customError)==null?void 0:c.call(r,e))??qt((u=r.localeError)==null?void 0:u.call(r,e))??"Invalid input";n.message=l}return delete n.inst,delete n.continue,t!=null&&t.reportInput||delete n.input,n}function rn(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function At(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const Ba=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,qr,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},qa=h("$ZodError",Ba),Ga=h("$ZodError",Ba,{Parent:Error});function Ui(e,t=r=>r.message){const r={},n=[];for(const a of e.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):n.push(t(a));return{formErrors:n,fieldErrors:r}}function Fi(e,t=r=>r.message){const r={_errors:[]},n=a=>{for(const o of a.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(i=>n({issues:i}));else if(o.code==="invalid_key")n({issues:o.issues});else if(o.code==="invalid_element")n({issues:o.issues});else if(o.path.length===0)r._errors.push(t(o));else{let i=r,s=0;for(;s<o.path.length;){const c=o.path[s];s===o.path.length-1?(i[c]=i[c]||{_errors:[]},i[c]._errors.push(t(o))):i[c]=i[c]||{_errors:[]},i=i[c],s++}}};return n(e),r}const nn=e=>(t,r,n,a)=>{const o=n?Object.assign(n,{async:!1}):{async:!1},i=t._zod.run({value:r,issues:[]},o);if(i instanceof Promise)throw new vt;if(i.issues.length){const s=new((a==null?void 0:a.Err)??e)(i.issues.map(c=>He(c,o,Ye())));throw Ja(s,a==null?void 0:a.callee),s}return i.value},an=e=>async(t,r,n,a)=>{const o=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},o);if(i instanceof Promise&&(i=await i),i.issues.length){const s=new((a==null?void 0:a.Err)??e)(i.issues.map(c=>He(c,o,Ye())));throw Ja(s,a==null?void 0:a.callee),s}return i.value},ir=e=>(t,r,n)=>{const a=n?{...n,async:!1}:{async:!1},o=t._zod.run({value:r,issues:[]},a);if(o instanceof Promise)throw new vt;return o.issues.length?{success:!1,error:new(e??qa)(o.issues.map(i=>He(i,a,Ye())))}:{success:!0,data:o.value}},Ji=ir(Ga),ur=e=>async(t,r,n)=>{const a=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},a);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(i=>He(i,a,Ye())))}:{success:!0,data:o.value}},Vi=ur(Ga),Bi=e=>(t,r,n)=>{const a=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return nn(e)(t,r,a)},qi=e=>(t,r,n)=>nn(e)(t,r,n),Gi=e=>async(t,r,n)=>{const a=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return an(e)(t,r,a)},Wi=e=>async(t,r,n)=>an(e)(t,r,n),Yi=e=>(t,r,n)=>{const a=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return ir(e)(t,r,a)},Hi=e=>(t,r,n)=>ir(e)(t,r,n),Ki=e=>async(t,r,n)=>{const a=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return ur(e)(t,r,a)},Xi=e=>async(t,r,n)=>ur(e)(t,r,n),Qi=/^[cC][^\s-]{8,}$/,eu=/^[0-9a-z]+$/,tu=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,ru=/^[0-9a-vA-V]{20}$/,nu=/^[A-Za-z0-9]{27}$/,au=/^[a-zA-Z0-9_-]{21}$/,ou=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,su=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,qn=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,iu=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,uu="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function cu(){return new RegExp(uu,"u")}const lu=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,du=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,fu=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,pu=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,mu=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Wa=/^[A-Za-z0-9_-]*$/,hu=/^\+[1-9]\d{6,14}$/,Ya="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",vu=new RegExp(`^${Ya}$`);function Ha(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function gu(e){return new RegExp(`^${Ha(e)}$`)}function _u(e){const t=Ha({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${Ya}T(?:${n})$`)}const yu=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},bu=/^-?\d+$/,Ka=/^-?\d+(?:\.\d+)?$/,wu=/^(?:true|false)$/i,Eu=/^null$/i,Iu=/^[^A-Z]*$/,ku=/^[^a-z]*$/,ke=h("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),Xa={number:"number",bigint:"bigint",object:"date"},Qa=h("$ZodCheckLessThan",(e,t)=>{ke.init(e,t);const r=Xa[typeof t.value];e._zod.onattach.push(n=>{const a=n._zod.bag,o=(t.inclusive?a.maximum:a.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?a.maximum=t.value:a.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:typeof t.value=="object"?t.value.getTime():t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),eo=h("$ZodCheckGreaterThan",(e,t)=>{ke.init(e,t);const r=Xa[typeof t.value];e._zod.onattach.push(n=>{const a=n._zod.bag,o=(t.inclusive?a.minimum:a.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?a.minimum=t.value:a.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:typeof t.value=="object"?t.value.getTime():t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Su=h("$ZodCheckMultipleOf",(e,t)=>{ke.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):Oi(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),zu=h("$ZodCheckNumberFormat",(e,t)=>{var i;ke.init(e,t),t.format=t.format||"float64";const r=(i=t.format)==null?void 0:i.includes("int"),n=r?"int":"number",[a,o]=Pi[t.format];e._zod.onattach.push(s=>{const c=s._zod.bag;c.format=t.format,c.minimum=a,c.maximum=o,r&&(c.pattern=bu)}),e._zod.check=s=>{const c=s.value;if(r){if(!Number.isInteger(c)){s.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?s.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,inclusive:!0,continue:!t.abort}):s.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,inclusive:!0,continue:!t.abort});return}}c<a&&s.issues.push({origin:"number",input:c,code:"too_small",minimum:a,inclusive:!0,inst:e,continue:!t.abort}),c>o&&s.issues.push({origin:"number",input:c,code:"too_big",maximum:o,inclusive:!0,inst:e,continue:!t.abort})}}),xu=h("$ZodCheckMaxLength",(e,t)=>{var r;ke.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!en(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<a&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const a=n.value;if(a.length<=t.maximum)return;const i=rn(a);n.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),Ou=h("$ZodCheckMinLength",(e,t)=>{var r;ke.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!en(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>a&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const a=n.value;if(a.length>=t.minimum)return;const i=rn(a);n.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:a,inst:e,continue:!t.abort})}}),Tu=h("$ZodCheckLengthEquals",(e,t)=>{var r;ke.init(e,t),(r=e._zod.def).when??(r.when=n=>{const a=n.value;return!en(a)&&a.length!==void 0}),e._zod.onattach.push(n=>{const a=n._zod.bag;a.minimum=t.length,a.maximum=t.length,a.length=t.length}),e._zod.check=n=>{const a=n.value,o=a.length;if(o===t.length)return;const i=rn(a),s=o>t.length;n.issues.push({origin:i,...s?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),cr=h("$ZodCheckStringFormat",(e,t)=>{var r,n;ke.init(e,t),e._zod.onattach.push(a=>{const o=a._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=a=>{t.pattern.lastIndex=0,!t.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:t.format,input:a.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),Au=h("$ZodCheckRegex",(e,t)=>{cr.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Nu=h("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Iu),cr.init(e,t)}),Zu=h("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=ku),cr.init(e,t)}),Pu=h("$ZodCheckIncludes",(e,t)=>{ke.init(e,t);const r=bt(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(a=>{const o=a._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=a=>{a.value.includes(t.includes,t.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:a.value,inst:e,continue:!t.abort})}}),Ru=h("$ZodCheckStartsWith",(e,t)=>{ke.init(e,t);const r=new RegExp(`^${bt(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const a=n._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),$u=h("$ZodCheckEndsWith",(e,t)=>{ke.init(e,t);const r=new RegExp(`.*${bt(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const a=n._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),Cu=h("$ZodCheckOverwrite",(e,t)=>{ke.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class ju{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(i=>i),a=Math.min(...n.map(i=>i.length-i.trimStart().length)),o=n.map(i=>i.slice(a)).map(i=>" ".repeat(this.indent*2)+i);for(const i of o)this.content.push(i)}compile(){const t=Function,r=this==null?void 0:this.args,a=[...((this==null?void 0:this.content)??[""]).map(o=>`  ${o}`)];return new t(...r,a.join(`
`))}}const Mu={major:4,minor:3,patch:6},K=h("$ZodType",(e,t)=>{var a;var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Mu;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const o of n)for(const i of o._zod.onattach)i(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),(a=e._zod.deferred)==null||a.push(()=>{e._zod.run=e._zod.parse});else{const o=(s,c,u)=>{let l=mt(s),d;for(const m of c){if(m._zod.def.when){if(!m._zod.def.when(s))continue}else if(l)continue;const y=s.issues.length,w=m._zod.check(s);if(w instanceof Promise&&(u==null?void 0:u.async)===!1)throw new vt;if(d||w instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await w,s.issues.length!==y&&(l||(l=mt(s,y)))});else{if(s.issues.length===y)continue;l||(l=mt(s,y))}}return d?d.then(()=>s):s},i=(s,c,u)=>{if(mt(s))return s.aborted=!0,s;const l=o(c,n,u);if(l instanceof Promise){if(u.async===!1)throw new vt;return l.then(d=>e._zod.parse(d,u))}return e._zod.parse(l,u)};e._zod.run=(s,c)=>{if(c.skipChecks)return e._zod.parse(s,c);if(c.direction==="backward"){const l=e._zod.parse({value:s.value,issues:[]},{...c,skipChecks:!0});return l instanceof Promise?l.then(d=>i(d,s,c)):i(l,s,c)}const u=e._zod.parse(s,c);if(u instanceof Promise){if(c.async===!1)throw new vt;return u.then(l=>o(l,n,c))}return o(u,n,c)}}L(e,"~standard",()=>({validate:o=>{var i;try{const s=Ji(e,o);return s.success?{value:s.data}:{issues:(i=s.error)==null?void 0:i.issues}}catch{return Vi(e,o).then(c=>{var u;return c.success?{value:c.data}:{issues:(u=c.error)==null?void 0:u.issues}})}},vendor:"zod",version:1}))}),on=h("$ZodString",(e,t)=>{var r;K.init(e,t),e._zod.pattern=[...((r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)??[]].pop()??yu(e._zod.bag),e._zod.parse=(n,a)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),te=h("$ZodStringFormat",(e,t)=>{cr.init(e,t),on.init(e,t)}),Du=h("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=su),te.init(e,t)}),Lu=h("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=qn(n))}else t.pattern??(t.pattern=qn());te.init(e,t)}),Uu=h("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=iu),te.init(e,t)}),Fu=h("$ZodURL",(e,t)=>{te.init(e,t),e._zod.check=r=>{try{const n=r.value.trim(),a=new URL(n);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(a.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=a.href:r.value=n;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),Ju=h("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=cu()),te.init(e,t)}),Vu=h("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=au),te.init(e,t)}),Bu=h("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Qi),te.init(e,t)}),qu=h("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=eu),te.init(e,t)}),Gu=h("$ZodULID",(e,t)=>{t.pattern??(t.pattern=tu),te.init(e,t)}),Wu=h("$ZodXID",(e,t)=>{t.pattern??(t.pattern=ru),te.init(e,t)}),Yu=h("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=nu),te.init(e,t)}),Hu=h("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=_u(t)),te.init(e,t)}),Ku=h("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=vu),te.init(e,t)}),Xu=h("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=gu(t)),te.init(e,t)}),Qu=h("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=ou),te.init(e,t)}),ec=h("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=lu),te.init(e,t),e._zod.bag.format="ipv4"}),tc=h("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=du),te.init(e,t),e._zod.bag.format="ipv6",e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),rc=h("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=fu),te.init(e,t)}),nc=h("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=pu),te.init(e,t),e._zod.check=r=>{const n=r.value.split("/");try{if(n.length!==2)throw new Error;const[a,o]=n;if(!o)throw new Error;const i=Number(o);if(`${i}`!==o)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${a}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function to(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const ac=h("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=mu),te.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=r=>{to(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function oc(e){if(!Wa.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return to(r)}const sc=h("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Wa),te.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=r=>{oc(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),ic=h("$ZodE164",(e,t)=>{t.pattern??(t.pattern=hu),te.init(e,t)});function uc(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const a=JSON.parse(atob(n));return!("typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&(!("alg"in a)||a.alg!==t))}catch{return!1}}const cc=h("$ZodJWT",(e,t)=>{te.init(e,t),e._zod.check=r=>{uc(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),ro=h("$ZodNumber",(e,t)=>{K.init(e,t),e._zod.pattern=e._zod.bag.pattern??Ka,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const a=r.value;if(typeof a=="number"&&!Number.isNaN(a)&&Number.isFinite(a))return r;const o=typeof a=="number"?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:a,inst:e,...o?{received:o}:{}}),r}}),lc=h("$ZodNumberFormat",(e,t)=>{zu.init(e,t),ro.init(e,t)}),dc=h("$ZodBoolean",(e,t)=>{K.init(e,t),e._zod.pattern=wu,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}const a=r.value;return typeof a=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:a,inst:e}),r}}),fc=h("$ZodNull",(e,t)=>{K.init(e,t),e._zod.pattern=Eu,e._zod.values=new Set([null]),e._zod.parse=(r,n)=>{const a=r.value;return a===null||r.issues.push({expected:"null",code:"invalid_type",input:a,inst:e}),r}}),pc=h("$ZodUnknown",(e,t)=>{K.init(e,t),e._zod.parse=r=>r}),mc=h("$ZodNever",(e,t)=>{K.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function Gn(e,t,r){e.issues.length&&t.issues.push(...ht(r,e.issues)),t.value[r]=e.value}const hc=h("$ZodArray",(e,t)=>{K.init(e,t),e._zod.parse=(r,n)=>{const a=r.value;if(!Array.isArray(a))return r.issues.push({expected:"array",code:"invalid_type",input:a,inst:e}),r;r.value=Array(a.length);const o=[];for(let i=0;i<a.length;i++){const s=a[i],c=t.element._zod.run({value:s,issues:[]},n);c instanceof Promise?o.push(c.then(u=>Gn(u,r,i))):Gn(c,r,i)}return o.length?Promise.all(o).then(()=>r):r}});function Kt(e,t,r,n,a){if(e.issues.length){if(a&&!(r in n))return;t.issues.push(...ht(r,e.issues))}e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function no(e){var n,a,o,i;const t=Object.keys(e.shape);for(const s of t)if(!((i=(o=(a=(n=e.shape)==null?void 0:n[s])==null?void 0:a._zod)==null?void 0:o.traits)!=null&&i.has("$ZodType")))throw new Error(`Invalid element at key "${s}": expected a Zod schema`);const r=Zi(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function ao(e,t,r,n,a,o){const i=[],s=a.keySet,c=a.catchall._zod,u=c.def.type,l=c.optout==="optional";for(const d in t){if(s.has(d))continue;if(u==="never"){i.push(d);continue}const m=c.run({value:t[d],issues:[]},n);m instanceof Promise?e.push(m.then(y=>Kt(y,r,d,t,l))):Kt(m,r,d,t,l)}return i.length&&r.issues.push({code:"unrecognized_keys",keys:i,input:t,inst:o}),e.length?Promise.all(e).then(()=>r):r}const vc=h("$ZodObject",(e,t)=>{K.init(e,t);const r=Object.getOwnPropertyDescriptor(t,"shape");if(!(r!=null&&r.get)){const s=t.shape;Object.defineProperty(t,"shape",{get:()=>{const c={...s};return Object.defineProperty(t,"shape",{value:c}),c}})}const n=sr(()=>no(t));L(e._zod,"propValues",()=>{const s=t.shape,c={};for(const u in s){const l=s[u]._zod;if(l.values){c[u]??(c[u]=new Set);for(const d of l.values)c[u].add(d)}}return c});const a=Tt,o=t.catchall;let i;e._zod.parse=(s,c)=>{i??(i=n.value);const u=s.value;if(!a(u))return s.issues.push({expected:"object",code:"invalid_type",input:u,inst:e}),s;s.value={};const l=[],d=i.shape;for(const m of i.keys){const y=d[m],w=y._zod.optout==="optional",v=y._zod.run({value:u[m],issues:[]},c);v instanceof Promise?l.push(v.then(p=>Kt(p,s,m,u,w))):Kt(v,s,m,u,w)}return o?ao(l,u,s,c,n.value,e):l.length?Promise.all(l).then(()=>s):s}}),gc=h("$ZodObjectJIT",(e,t)=>{vc.init(e,t);const r=e._zod.parse,n=sr(()=>no(t)),a=m=>{var f;const y=new ju(["shape","payload","ctx"]),w=n.value,v=z=>{const x=Bn(z);return`shape[${x}]._zod.run({ value: input[${x}], issues: [] }, ctx)`};y.write("const input = payload.value;");const p=Object.create(null);let g=0;for(const z of w.keys)p[z]=`key_${g++}`;y.write("const newResult = {};");for(const z of w.keys){const x=p[z],O=Bn(z),A=m[z],C=((f=A==null?void 0:A._zod)==null?void 0:f.optout)==="optional";y.write(`const ${x} = ${v(z)};`),C?y.write(`
        if (${x}.issues.length) {
          if (${O} in input) {
            payload.issues = payload.issues.concat(${x}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${O}, ...iss.path] : [${O}]
            })));
          }
        }
        
        if (${x}.value === undefined) {
          if (${O} in input) {
            newResult[${O}] = undefined;
          }
        } else {
          newResult[${O}] = ${x}.value;
        }
        
      `):y.write(`
        if (${x}.issues.length) {
          payload.issues = payload.issues.concat(${x}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${O}, ...iss.path] : [${O}]
          })));
        }
        
        if (${x}.value === undefined) {
          if (${O} in input) {
            newResult[${O}] = undefined;
          }
        } else {
          newResult[${O}] = ${x}.value;
        }
        
      `)}y.write("payload.value = newResult;"),y.write("return payload;");const b=y.compile();return(z,x)=>b(m,z,x)};let o;const i=Tt,s=!Ua.jitless,u=s&&Ai.value,l=t.catchall;let d;e._zod.parse=(m,y)=>{d??(d=n.value);const w=m.value;return i(w)?s&&u&&(y==null?void 0:y.async)===!1&&y.jitless!==!0?(o||(o=a(t.shape)),m=o(m,y),l?ao([],w,m,y,d,e):m):r(m,y):(m.issues.push({expected:"object",code:"invalid_type",input:w,inst:e}),m)}});function Wn(e,t,r,n){for(const o of e)if(o.issues.length===0)return t.value=o.value,t;const a=e.filter(o=>!mt(o));return a.length===1?(t.value=a[0].value,a[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(o=>o.issues.map(i=>He(i,n,Ye())))}),t)}const oo=h("$ZodUnion",(e,t)=>{K.init(e,t),L(e._zod,"optin",()=>t.options.some(a=>a._zod.optin==="optional")?"optional":void 0),L(e._zod,"optout",()=>t.options.some(a=>a._zod.optout==="optional")?"optional":void 0),L(e._zod,"values",()=>{if(t.options.every(a=>a._zod.values))return new Set(t.options.flatMap(a=>Array.from(a._zod.values)))}),L(e._zod,"pattern",()=>{if(t.options.every(a=>a._zod.pattern)){const a=t.options.map(o=>o._zod.pattern);return new RegExp(`^(${a.map(o=>tn(o.source)).join("|")})$`)}});const r=t.options.length===1,n=t.options[0]._zod.run;e._zod.parse=(a,o)=>{if(r)return n(a,o);let i=!1;const s=[];for(const c of t.options){const u=c._zod.run({value:a.value,issues:[]},o);if(u instanceof Promise)s.push(u),i=!0;else{if(u.issues.length===0)return u;s.push(u)}}return i?Promise.all(s).then(c=>Wn(c,a,e,o)):Wn(s,a,e,o)}}),_c=h("$ZodDiscriminatedUnion",(e,t)=>{t.inclusive=!1,oo.init(e,t);const r=e._zod.parse;L(e._zod,"propValues",()=>{const a={};for(const o of t.options){const i=o._zod.propValues;if(!i||Object.keys(i).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(o)}"`);for(const[s,c]of Object.entries(i)){a[s]||(a[s]=new Set);for(const u of c)a[s].add(u)}}return a});const n=sr(()=>{var i;const a=t.options,o=new Map;for(const s of a){const c=(i=s._zod.propValues)==null?void 0:i[t.discriminator];if(!c||c.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(s)}"`);for(const u of c){if(o.has(u))throw new Error(`Duplicate discriminator value "${String(u)}"`);o.set(u,s)}}return o});e._zod.parse=(a,o)=>{const i=a.value;if(!Tt(i))return a.issues.push({code:"invalid_type",expected:"object",input:i,inst:e}),a;const s=n.value.get(i==null?void 0:i[t.discriminator]);return s?s._zod.run(a,o):t.unionFallback?r(a,o):(a.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:i,path:[t.discriminator],inst:e}),a)}}),yc=h("$ZodIntersection",(e,t)=>{K.init(e,t),e._zod.parse=(r,n)=>{const a=r.value,o=t.left._zod.run({value:a,issues:[]},n),i=t.right._zod.run({value:a,issues:[]},n);return o instanceof Promise||i instanceof Promise?Promise.all([o,i]).then(([c,u])=>Yn(r,c,u)):Yn(r,o,i)}});function Gr(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(yt(e)&&yt(t)){const r=Object.keys(t),n=Object.keys(e).filter(o=>r.indexOf(o)!==-1),a={...e,...t};for(const o of n){const i=Gr(e[o],t[o]);if(!i.valid)return{valid:!1,mergeErrorPath:[o,...i.mergeErrorPath]};a[o]=i.data}return{valid:!0,data:a}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const a=e[n],o=t[n],i=Gr(a,o);if(!i.valid)return{valid:!1,mergeErrorPath:[n,...i.mergeErrorPath]};r.push(i.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function Yn(e,t,r){const n=new Map;let a;for(const s of t.issues)if(s.code==="unrecognized_keys"){a??(a=s);for(const c of s.keys)n.has(c)||n.set(c,{}),n.get(c).l=!0}else e.issues.push(s);for(const s of r.issues)if(s.code==="unrecognized_keys")for(const c of s.keys)n.has(c)||n.set(c,{}),n.get(c).r=!0;else e.issues.push(s);const o=[...n].filter(([,s])=>s.l&&s.r).map(([s])=>s);if(o.length&&a&&e.issues.push({...a,keys:o}),mt(e))return e;const i=Gr(t.value,r.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return e.value=i.data,e}const bc=h("$ZodRecord",(e,t)=>{K.init(e,t),e._zod.parse=(r,n)=>{const a=r.value;if(!yt(a))return r.issues.push({expected:"record",code:"invalid_type",input:a,inst:e}),r;const o=[],i=t.keyType._zod.values;if(i){r.value={};const s=new Set;for(const u of i)if(typeof u=="string"||typeof u=="number"||typeof u=="symbol"){s.add(typeof u=="number"?u.toString():u);const l=t.valueType._zod.run({value:a[u],issues:[]},n);l instanceof Promise?o.push(l.then(d=>{d.issues.length&&r.issues.push(...ht(u,d.issues)),r.value[u]=d.value})):(l.issues.length&&r.issues.push(...ht(u,l.issues)),r.value[u]=l.value)}let c;for(const u in a)s.has(u)||(c=c??[],c.push(u));c&&c.length>0&&r.issues.push({code:"unrecognized_keys",input:a,inst:e,keys:c})}else{r.value={};for(const s of Reflect.ownKeys(a)){if(s==="__proto__")continue;let c=t.keyType._zod.run({value:s,issues:[]},n);if(c instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof s=="string"&&Ka.test(s)&&c.issues.length){const d=t.keyType._zod.run({value:Number(s),issues:[]},n);if(d instanceof Promise)throw new Error("Async schemas not supported in object keys currently");d.issues.length===0&&(c=d)}if(c.issues.length){t.mode==="loose"?r.value[s]=a[s]:r.issues.push({code:"invalid_key",origin:"record",issues:c.issues.map(d=>He(d,n,Ye())),input:s,path:[s],inst:e});continue}const l=t.valueType._zod.run({value:a[s],issues:[]},n);l instanceof Promise?o.push(l.then(d=>{d.issues.length&&r.issues.push(...ht(s,d.issues)),r.value[c.value]=d.value})):(l.issues.length&&r.issues.push(...ht(s,l.issues)),r.value[c.value]=l.value)}}return o.length?Promise.all(o).then(()=>r):r}}),wc=h("$ZodEnum",(e,t)=>{K.init(e,t);const r=Fa(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=new RegExp(`^(${r.filter(a=>Ni.has(typeof a)).map(a=>typeof a=="string"?bt(a):a.toString()).join("|")})$`),e._zod.parse=(a,o)=>{const i=a.value;return n.has(i)||a.issues.push({code:"invalid_value",values:r,input:i,inst:e}),a}}),Ec=h("$ZodLiteral",(e,t)=>{if(K.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");const r=new Set(t.values);e._zod.values=r,e._zod.pattern=new RegExp(`^(${t.values.map(n=>typeof n=="string"?bt(n):n?bt(n.toString()):String(n)).join("|")})$`),e._zod.parse=(n,a)=>{const o=n.value;return r.has(o)||n.issues.push({code:"invalid_value",values:t.values,input:o,inst:e}),n}}),Ic=h("$ZodTransform",(e,t)=>{K.init(e,t),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new La(e.constructor.name);const a=t.transform(r.value,r);if(n.async)return(a instanceof Promise?a:Promise.resolve(a)).then(i=>(r.value=i,r));if(a instanceof Promise)throw new vt;return r.value=a,r}});function Hn(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const so=h("$ZodOptional",(e,t)=>{K.init(e,t),e._zod.optin="optional",e._zod.optout="optional",L(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),L(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${tn(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>{if(t.innerType._zod.optin==="optional"){const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(o=>Hn(o,r.value)):Hn(a,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,n)}}),kc=h("$ZodExactOptional",(e,t)=>{so.init(e,t),L(e._zod,"values",()=>t.innerType._zod.values),L(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(r,n)=>t.innerType._zod.run(r,n)}),Sc=h("$ZodNullable",(e,t)=>{K.init(e,t),L(e._zod,"optin",()=>t.innerType._zod.optin),L(e._zod,"optout",()=>t.innerType._zod.optout),L(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${tn(r.source)}|null)$`):void 0}),L(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),zc=h("$ZodDefault",(e,t)=>{K.init(e,t),e._zod.optin="optional",L(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);if(r.value===void 0)return r.value=t.defaultValue,r;const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(o=>Kn(o,t)):Kn(a,t)}});function Kn(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const xc=h("$ZodPrefault",(e,t)=>{K.init(e,t),e._zod.optin="optional",L(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(n.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),Oc=h("$ZodNonOptional",(e,t)=>{K.init(e,t),L(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(o=>Xn(o,e)):Xn(a,e)}});function Xn(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Tc=h("$ZodCatch",(e,t)=>{K.init(e,t),L(e._zod,"optin",()=>t.innerType._zod.optin),L(e._zod,"optout",()=>t.innerType._zod.optout),L(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(o=>(r.value=o.value,o.issues.length&&(r.value=t.catchValue({...r,error:{issues:o.issues.map(i=>He(i,n,Ye()))},input:r.value}),r.issues=[]),r)):(r.value=a.value,a.issues.length&&(r.value=t.catchValue({...r,error:{issues:a.issues.map(o=>He(o,n,Ye()))},input:r.value}),r.issues=[]),r)}}),Ac=h("$ZodPipe",(e,t)=>{K.init(e,t),L(e._zod,"values",()=>t.in._zod.values),L(e._zod,"optin",()=>t.in._zod.optin),L(e._zod,"optout",()=>t.out._zod.optout),L(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,n)=>{if(n.direction==="backward"){const o=t.out._zod.run(r,n);return o instanceof Promise?o.then(i=>Gt(i,t.in,n)):Gt(o,t.in,n)}const a=t.in._zod.run(r,n);return a instanceof Promise?a.then(o=>Gt(o,t.out,n)):Gt(a,t.out,n)}});function Gt(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const Nc=h("$ZodReadonly",(e,t)=>{K.init(e,t),L(e._zod,"propValues",()=>t.innerType._zod.propValues),L(e._zod,"values",()=>t.innerType._zod.values),L(e._zod,"optin",()=>{var r,n;return(n=(r=t.innerType)==null?void 0:r._zod)==null?void 0:n.optin}),L(e._zod,"optout",()=>{var r,n;return(n=(r=t.innerType)==null?void 0:r._zod)==null?void 0:n.optout}),e._zod.parse=(r,n)=>{if(n.direction==="backward")return t.innerType._zod.run(r,n);const a=t.innerType._zod.run(r,n);return a instanceof Promise?a.then(Qn):Qn(a)}});function Qn(e){return e.value=Object.freeze(e.value),e}const Zc=h("$ZodLazy",(e,t)=>{K.init(e,t),L(e._zod,"innerType",()=>t.getter()),L(e._zod,"pattern",()=>{var r,n;return(n=(r=e._zod.innerType)==null?void 0:r._zod)==null?void 0:n.pattern}),L(e._zod,"propValues",()=>{var r,n;return(n=(r=e._zod.innerType)==null?void 0:r._zod)==null?void 0:n.propValues}),L(e._zod,"optin",()=>{var r,n;return((n=(r=e._zod.innerType)==null?void 0:r._zod)==null?void 0:n.optin)??void 0}),L(e._zod,"optout",()=>{var r,n;return((n=(r=e._zod.innerType)==null?void 0:r._zod)==null?void 0:n.optout)??void 0}),e._zod.parse=(r,n)=>e._zod.innerType._zod.run(r,n)}),Pc=h("$ZodCustom",(e,t)=>{ke.init(e,t),K.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,a=t.fn(n);if(a instanceof Promise)return a.then(o=>ea(o,r,n,e));ea(a,r,n,e)}});function ea(e,t,r,n){if(!e){const a={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(a.params=n._zod.def.params),t.issues.push(At(a))}}var ta;class Rc{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){const n=r[0];return this._map.set(t,n),n&&typeof n=="object"&&"id"in n&&this._idmap.set(n.id,t),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};delete n.id;const a={...n,...this._map.get(t)};return Object.keys(a).length?a:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function $c(){return new Rc}(ta=globalThis).__zod_globalRegistry??(ta.__zod_globalRegistry=$c());const Ot=globalThis.__zod_globalRegistry;function Cc(e,t){return new e({type:"string",...N(t)})}function jc(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...N(t)})}function ra(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...N(t)})}function Mc(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...N(t)})}function Dc(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...N(t)})}function Lc(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...N(t)})}function Uc(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...N(t)})}function Fc(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...N(t)})}function Jc(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...N(t)})}function Vc(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...N(t)})}function Bc(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...N(t)})}function qc(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...N(t)})}function Gc(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...N(t)})}function Wc(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...N(t)})}function Yc(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...N(t)})}function Hc(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...N(t)})}function Kc(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...N(t)})}function Xc(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...N(t)})}function Qc(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...N(t)})}function el(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...N(t)})}function tl(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...N(t)})}function rl(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...N(t)})}function nl(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...N(t)})}function al(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...N(t)})}function ol(e,t){return new e({type:"string",format:"date",check:"string_format",...N(t)})}function sl(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...N(t)})}function il(e,t){return new e({type:"string",format:"duration",check:"string_format",...N(t)})}function ul(e,t){return new e({type:"number",checks:[],...N(t)})}function cl(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...N(t)})}function ll(e,t){return new e({type:"boolean",...N(t)})}function dl(e,t){return new e({type:"null",...N(t)})}function fl(e){return new e({type:"unknown"})}function pl(e,t){return new e({type:"never",...N(t)})}function na(e,t){return new Qa({check:"less_than",...N(t),value:e,inclusive:!1})}function Pr(e,t){return new Qa({check:"less_than",...N(t),value:e,inclusive:!0})}function aa(e,t){return new eo({check:"greater_than",...N(t),value:e,inclusive:!1})}function Rr(e,t){return new eo({check:"greater_than",...N(t),value:e,inclusive:!0})}function oa(e,t){return new Su({check:"multiple_of",...N(t),value:e})}function io(e,t){return new xu({check:"max_length",...N(t),maximum:e})}function Xt(e,t){return new Ou({check:"min_length",...N(t),minimum:e})}function uo(e,t){return new Tu({check:"length_equals",...N(t),length:e})}function ml(e,t){return new Au({check:"string_format",format:"regex",...N(t),pattern:e})}function hl(e){return new Nu({check:"string_format",format:"lowercase",...N(e)})}function vl(e){return new Zu({check:"string_format",format:"uppercase",...N(e)})}function gl(e,t){return new Pu({check:"string_format",format:"includes",...N(t),includes:e})}function _l(e,t){return new Ru({check:"string_format",format:"starts_with",...N(t),prefix:e})}function yl(e,t){return new $u({check:"string_format",format:"ends_with",...N(t),suffix:e})}function It(e){return new Cu({check:"overwrite",tx:e})}function bl(e){return It(t=>t.normalize(e))}function wl(){return It(e=>e.trim())}function El(){return It(e=>e.toLowerCase())}function Il(){return It(e=>e.toUpperCase())}function kl(){return It(e=>Ti(e))}function Sl(e,t,r){return new e({type:"array",element:t,...N(r)})}function zl(e,t,r){const n=N(r);return n.abort??(n.abort=!0),new e({type:"custom",check:"custom",fn:t,...n})}function xl(e,t,r){return new e({type:"custom",check:"custom",fn:t,...N(r)})}function Ol(e){const t=Tl(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(At(n,r.value,t._zod.def));else{const a=n;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),a.continue??(a.continue=!t._zod.def.abort),r.issues.push(At(a))}},e(r.value,r)));return t}function Tl(e,t){const r=new ke({check:"custom",...N(t)});return r._zod.check=e,r}function Qt(e){let t=(e==null?void 0:e.target)??"draft-2020-12";return t==="draft-4"&&(t="draft-04"),t==="draft-7"&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:(e==null?void 0:e.metadata)??Ot,target:t,unrepresentable:(e==null?void 0:e.unrepresentable)??"throw",override:(e==null?void 0:e.override)??(()=>{}),io:(e==null?void 0:e.io)??"output",counter:0,seen:new Map,cycles:(e==null?void 0:e.cycles)??"ref",reused:(e==null?void 0:e.reused)??"inline",external:(e==null?void 0:e.external)??void 0}}function Y(e,t,r={path:[],schemaPath:[]}){var l,d;var n;const a=e._zod.def,o=t.seen.get(e);if(o)return o.count++,r.schemaPath.includes(e)&&(o.cycle=r.path),o.schema;const i={schema:{},count:1,cycle:void 0,path:r.path};t.seen.set(e,i);const s=(d=(l=e._zod).toJSONSchema)==null?void 0:d.call(l);if(s)i.schema=s;else{const m={...r,schemaPath:[...r.schemaPath,e],path:r.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,i.schema,m);else{const w=i.schema,v=t.processors[a.type];if(!v)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${a.type}`);v(e,t,w,m)}const y=e._zod.parent;y&&(i.ref||(i.ref=y),Y(y,t,m),t.seen.get(y).isParent=!0)}const c=t.metadataRegistry.get(e);return c&&Object.assign(i.schema,c),t.io==="input"&&ye(e)&&(delete i.schema.examples,delete i.schema.default),t.io==="input"&&i.schema._prefault&&((n=i.schema).default??(n.default=i.schema._prefault)),delete i.schema._prefault,t.seen.get(e).schema}function er(e,t){var i,s,c,u;const r=e.seen.get(t);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");const n=new Map;for(const l of e.seen.entries()){const d=(i=e.metadataRegistry.get(l[0]))==null?void 0:i.id;if(d){const m=n.get(d);if(m&&m!==l[0])throw new Error(`Duplicate schema id "${d}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);n.set(d,l[0])}}const a=l=>{var v;const d=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const p=(v=e.external.registry.get(l[0]))==null?void 0:v.id,g=e.external.uri??(f=>f);if(p)return{ref:g(p)};const b=l[1].defId??l[1].schema.id??`schema${e.counter++}`;return l[1].defId=b,{defId:b,ref:`${g("__shared")}#/${d}/${b}`}}if(l[1]===r)return{ref:"#"};const y=`#/${d}/`,w=l[1].schema.id??`__schema${e.counter++}`;return{defId:w,ref:y+w}},o=l=>{if(l[1].schema.$ref)return;const d=l[1],{ref:m,defId:y}=a(l);d.def={...d.schema},y&&(d.defId=y);const w=d.schema;for(const v in w)delete w[v];w.$ref=m};if(e.cycles==="throw")for(const l of e.seen.entries()){const d=l[1];if(d.cycle)throw new Error(`Cycle detected: #/${(s=d.cycle)==null?void 0:s.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const l of e.seen.entries()){const d=l[1];if(t===l[0]){o(l);continue}if(e.external){const y=(c=e.external.registry.get(l[0]))==null?void 0:c.id;if(t!==l[0]&&y){o(l);continue}}if((u=e.metadataRegistry.get(l[0]))==null?void 0:u.id){o(l);continue}if(d.cycle){o(l);continue}if(d.count>1&&e.reused==="ref"){o(l);continue}}}function tr(e,t){var i,s,c;const r=e.seen.get(t);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");const n=u=>{const l=e.seen.get(u);if(l.ref===null)return;const d=l.def??l.schema,m={...d},y=l.ref;if(l.ref=null,y){n(y);const v=e.seen.get(y),p=v.schema;if(p.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(d.allOf=d.allOf??[],d.allOf.push(p)):Object.assign(d,p),Object.assign(d,m),u._zod.parent===y)for(const b in d)b==="$ref"||b==="allOf"||b in m||delete d[b];if(p.$ref&&v.def)for(const b in d)b==="$ref"||b==="allOf"||b in v.def&&JSON.stringify(d[b])===JSON.stringify(v.def[b])&&delete d[b]}const w=u._zod.parent;if(w&&w!==y){n(w);const v=e.seen.get(w);if(v!=null&&v.schema.$ref&&(d.$ref=v.schema.$ref,v.def))for(const p in d)p==="$ref"||p==="allOf"||p in v.def&&JSON.stringify(d[p])===JSON.stringify(v.def[p])&&delete d[p]}e.override({zodSchema:u,jsonSchema:d,path:l.path??[]})};for(const u of[...e.seen.entries()].reverse())n(u[0]);const a={};if(e.target==="draft-2020-12"?a.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?a.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?a.$schema="http://json-schema.org/draft-04/schema#":e.target,(i=e.external)!=null&&i.uri){const u=(s=e.external.registry.get(t))==null?void 0:s.id;if(!u)throw new Error("Schema is missing an `id` property");a.$id=e.external.uri(u)}Object.assign(a,r.def??r.schema);const o=((c=e.external)==null?void 0:c.defs)??{};for(const u of e.seen.entries()){const l=u[1];l.def&&l.defId&&(o[l.defId]=l.def)}e.external||Object.keys(o).length>0&&(e.target==="draft-2020-12"?a.$defs=o:a.definitions=o);try{const u=JSON.parse(JSON.stringify(a));return Object.defineProperty(u,"~standard",{value:{...t["~standard"],jsonSchema:{input:rr(t,"input",e.processors),output:rr(t,"output",e.processors)}},enumerable:!1,writable:!1}),u}catch{throw new Error("Error converting schema to JSON.")}}function ye(e,t){const r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);const n=e._zod.def;if(n.type==="transform")return!0;if(n.type==="array")return ye(n.element,r);if(n.type==="set")return ye(n.valueType,r);if(n.type==="lazy")return ye(n.getter(),r);if(n.type==="promise"||n.type==="optional"||n.type==="nonoptional"||n.type==="nullable"||n.type==="readonly"||n.type==="default"||n.type==="prefault")return ye(n.innerType,r);if(n.type==="intersection")return ye(n.left,r)||ye(n.right,r);if(n.type==="record"||n.type==="map")return ye(n.keyType,r)||ye(n.valueType,r);if(n.type==="pipe")return ye(n.in,r)||ye(n.out,r);if(n.type==="object"){for(const a in n.shape)if(ye(n.shape[a],r))return!0;return!1}if(n.type==="union"){for(const a of n.options)if(ye(a,r))return!0;return!1}if(n.type==="tuple"){for(const a of n.items)if(ye(a,r))return!0;return!!(n.rest&&ye(n.rest,r))}return!1}const Al=(e,t={})=>r=>{const n=Qt({...r,processors:t});return Y(e,n),er(n,e),tr(n,e)},rr=(e,t,r={})=>n=>{const{libraryOptions:a,target:o}=n??{},i=Qt({...a??{},target:o,io:t,processors:r});return Y(e,i),er(i,e),tr(i,e)},Nl={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},co=(e,t,r,n)=>{const a=r;a.type="string";const{minimum:o,maximum:i,format:s,patterns:c,contentEncoding:u}=e._zod.bag;if(typeof o=="number"&&(a.minLength=o),typeof i=="number"&&(a.maxLength=i),s&&(a.format=Nl[s]??s,a.format===""&&delete a.format,s==="time"&&delete a.format),u&&(a.contentEncoding=u),c&&c.size>0){const l=[...c];l.length===1?a.pattern=l[0].source:l.length>1&&(a.allOf=[...l.map(d=>({...t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0"?{type:"string"}:{},pattern:d.source}))])}},lo=(e,t,r,n)=>{const a=r,{minimum:o,maximum:i,format:s,multipleOf:c,exclusiveMaximum:u,exclusiveMinimum:l}=e._zod.bag;typeof s=="string"&&s.includes("int")?a.type="integer":a.type="number",typeof l=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(a.minimum=l,a.exclusiveMinimum=!0):a.exclusiveMinimum=l),typeof o=="number"&&(a.minimum=o,typeof l=="number"&&t.target!=="draft-04"&&(l>=o?delete a.minimum:delete a.exclusiveMinimum)),typeof u=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(a.maximum=u,a.exclusiveMaximum=!0):a.exclusiveMaximum=u),typeof i=="number"&&(a.maximum=i,typeof u=="number"&&t.target!=="draft-04"&&(u<=i?delete a.maximum:delete a.exclusiveMaximum)),typeof c=="number"&&(a.multipleOf=c)},fo=(e,t,r,n)=>{r.type="boolean"},Zl=(e,t,r,n)=>{if(t.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema")},Pl=(e,t,r,n)=>{if(t.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema")},po=(e,t,r,n)=>{t.target==="openapi-3.0"?(r.type="string",r.nullable=!0,r.enum=[null]):r.type="null"},Rl=(e,t,r,n)=>{if(t.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema")},$l=(e,t,r,n)=>{if(t.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema")},mo=(e,t,r,n)=>{r.not={}},Cl=(e,t,r,n)=>{},ho=(e,t,r,n)=>{},jl=(e,t,r,n)=>{if(t.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},vo=(e,t,r,n)=>{const a=e._zod.def,o=Fa(a.entries);o.every(i=>typeof i=="number")&&(r.type="number"),o.every(i=>typeof i=="string")&&(r.type="string"),r.enum=o},go=(e,t,r,n)=>{const a=e._zod.def,o=[];for(const i of a.values)if(i===void 0){if(t.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof i=="bigint"){if(t.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");o.push(Number(i))}else o.push(i);if(o.length!==0)if(o.length===1){const i=o[0];r.type=i===null?"null":typeof i,t.target==="draft-04"||t.target==="openapi-3.0"?r.enum=[i]:r.const=i}else o.every(i=>typeof i=="number")&&(r.type="number"),o.every(i=>typeof i=="string")&&(r.type="string"),o.every(i=>typeof i=="boolean")&&(r.type="boolean"),o.every(i=>i===null)&&(r.type="null"),r.enum=o},Ml=(e,t,r,n)=>{if(t.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema")},Dl=(e,t,r,n)=>{const a=r,o=e._zod.pattern;if(!o)throw new Error("Pattern not found in template literal");a.type="string",a.pattern=o.source},Ll=(e,t,r,n)=>{const a=r,o={type:"string",format:"binary",contentEncoding:"binary"},{minimum:i,maximum:s,mime:c}=e._zod.bag;i!==void 0&&(o.minLength=i),s!==void 0&&(o.maxLength=s),c?c.length===1?(o.contentMediaType=c[0],Object.assign(a,o)):(Object.assign(a,o),a.anyOf=c.map(u=>({contentMediaType:u}))):Object.assign(a,o)},Ul=(e,t,r,n)=>{r.type="boolean"},_o=(e,t,r,n)=>{if(t.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},Fl=(e,t,r,n)=>{if(t.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema")},yo=(e,t,r,n)=>{if(t.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},Jl=(e,t,r,n)=>{if(t.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema")},Vl=(e,t,r,n)=>{if(t.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema")},bo=(e,t,r,n)=>{const a=r,o=e._zod.def,{minimum:i,maximum:s}=e._zod.bag;typeof i=="number"&&(a.minItems=i),typeof s=="number"&&(a.maxItems=s),a.type="array",a.items=Y(o.element,t,{...n,path:[...n.path,"items"]})},wo=(e,t,r,n)=>{var u;const a=r,o=e._zod.def;a.type="object",a.properties={};const i=o.shape;for(const l in i)a.properties[l]=Y(i[l],t,{...n,path:[...n.path,"properties",l]});const s=new Set(Object.keys(i)),c=new Set([...s].filter(l=>{const d=o.shape[l]._zod;return t.io==="input"?d.optin===void 0:d.optout===void 0}));c.size>0&&(a.required=Array.from(c)),((u=o.catchall)==null?void 0:u._zod.def.type)==="never"?a.additionalProperties=!1:o.catchall?o.catchall&&(a.additionalProperties=Y(o.catchall,t,{...n,path:[...n.path,"additionalProperties"]})):t.io==="output"&&(a.additionalProperties=!1)},Eo=(e,t,r,n)=>{const a=e._zod.def,o=a.inclusive===!1,i=a.options.map((s,c)=>Y(s,t,{...n,path:[...n.path,o?"oneOf":"anyOf",c]}));o?r.oneOf=i:r.anyOf=i},Io=(e,t,r,n)=>{const a=e._zod.def,o=Y(a.left,t,{...n,path:[...n.path,"allOf",0]}),i=Y(a.right,t,{...n,path:[...n.path,"allOf",1]}),s=u=>"allOf"in u&&Object.keys(u).length===1,c=[...s(o)?o.allOf:[o],...s(i)?i.allOf:[i]];r.allOf=c},Bl=(e,t,r,n)=>{const a=r,o=e._zod.def;a.type="array";const i=t.target==="draft-2020-12"?"prefixItems":"items",s=t.target==="draft-2020-12"||t.target==="openapi-3.0"?"items":"additionalItems",c=o.items.map((m,y)=>Y(m,t,{...n,path:[...n.path,i,y]})),u=o.rest?Y(o.rest,t,{...n,path:[...n.path,s,...t.target==="openapi-3.0"?[o.items.length]:[]]}):null;t.target==="draft-2020-12"?(a.prefixItems=c,u&&(a.items=u)):t.target==="openapi-3.0"?(a.items={anyOf:c},u&&a.items.anyOf.push(u),a.minItems=c.length,u||(a.maxItems=c.length)):(a.items=c,u&&(a.additionalItems=u));const{minimum:l,maximum:d}=e._zod.bag;typeof l=="number"&&(a.minItems=l),typeof d=="number"&&(a.maxItems=d)},ko=(e,t,r,n)=>{const a=r,o=e._zod.def;a.type="object";const i=o.keyType,s=i._zod.bag,c=s==null?void 0:s.patterns;if(o.mode==="loose"&&c&&c.size>0){const l=Y(o.valueType,t,{...n,path:[...n.path,"patternProperties","*"]});a.patternProperties={};for(const d of c)a.patternProperties[d.source]=l}else(t.target==="draft-07"||t.target==="draft-2020-12")&&(a.propertyNames=Y(o.keyType,t,{...n,path:[...n.path,"propertyNames"]})),a.additionalProperties=Y(o.valueType,t,{...n,path:[...n.path,"additionalProperties"]});const u=i._zod.values;if(u){const l=[...u].filter(d=>typeof d=="string"||typeof d=="number");l.length>0&&(a.required=l)}},So=(e,t,r,n)=>{const a=e._zod.def,o=Y(a.innerType,t,n),i=t.seen.get(e);t.target==="openapi-3.0"?(i.ref=a.innerType,r.nullable=!0):r.anyOf=[o,{type:"null"}]},zo=(e,t,r,n)=>{const a=e._zod.def;Y(a.innerType,t,n);const o=t.seen.get(e);o.ref=a.innerType},xo=(e,t,r,n)=>{const a=e._zod.def;Y(a.innerType,t,n);const o=t.seen.get(e);o.ref=a.innerType,r.default=JSON.parse(JSON.stringify(a.defaultValue))},Oo=(e,t,r,n)=>{const a=e._zod.def;Y(a.innerType,t,n);const o=t.seen.get(e);o.ref=a.innerType,t.io==="input"&&(r._prefault=JSON.parse(JSON.stringify(a.defaultValue)))},To=(e,t,r,n)=>{const a=e._zod.def;Y(a.innerType,t,n);const o=t.seen.get(e);o.ref=a.innerType;let i;try{i=a.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}r.default=i},Ao=(e,t,r,n)=>{const a=e._zod.def,o=t.io==="input"?a.in._zod.def.type==="transform"?a.out:a.in:a.out;Y(o,t,n);const i=t.seen.get(e);i.ref=o},No=(e,t,r,n)=>{const a=e._zod.def;Y(a.innerType,t,n);const o=t.seen.get(e);o.ref=a.innerType,r.readOnly=!0},ql=(e,t,r,n)=>{const a=e._zod.def;Y(a.innerType,t,n);const o=t.seen.get(e);o.ref=a.innerType},sn=(e,t,r,n)=>{const a=e._zod.def;Y(a.innerType,t,n);const o=t.seen.get(e);o.ref=a.innerType},Zo=(e,t,r,n)=>{const a=e._zod.innerType;Y(a,t,n);const o=t.seen.get(e);o.ref=a},sa={string:co,number:lo,boolean:fo,bigint:Zl,symbol:Pl,null:po,undefined:Rl,void:$l,never:mo,any:Cl,unknown:ho,date:jl,enum:vo,literal:go,nan:Ml,template_literal:Dl,file:Ll,success:Ul,custom:_o,function:Fl,transform:yo,map:Jl,set:Vl,array:bo,object:wo,union:Eo,intersection:Io,tuple:Bl,record:ko,nullable:So,nonoptional:zo,default:xo,prefault:Oo,catch:To,pipe:Ao,readonly:No,promise:ql,optional:sn,lazy:Zo};function Gl(e,t){if("_idmap"in e){const n=e,a=Qt({...t,processors:sa}),o={};for(const c of n._idmap.entries()){const[u,l]=c;Y(l,a)}const i={},s={registry:n,uri:t==null?void 0:t.uri,defs:o};a.external=s;for(const c of n._idmap.entries()){const[u,l]=c;er(a,l),i[u]=tr(a,l)}if(Object.keys(o).length>0){const c=a.target==="draft-2020-12"?"$defs":"definitions";i.__shared={[c]:o}}return{schemas:i}}const r=Qt({...t,processors:sa});return Y(e,r),er(r,e),tr(r,e)}const Wl=h("ZodISODateTime",(e,t)=>{Hu.init(e,t),ne.init(e,t)});function Yl(e){return al(Wl,e)}const Hl=h("ZodISODate",(e,t)=>{Ku.init(e,t),ne.init(e,t)});function Kl(e){return ol(Hl,e)}const Xl=h("ZodISOTime",(e,t)=>{Xu.init(e,t),ne.init(e,t)});function Ql(e){return sl(Xl,e)}const ed=h("ZodISODuration",(e,t)=>{Qu.init(e,t),ne.init(e,t)});function td(e){return il(ed,e)}const rd=(e,t)=>{qa.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>Fi(e,r)},flatten:{value:r=>Ui(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,qr,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,qr,2)}},isEmpty:{get(){return e.issues.length===0}}})},Ze=h("ZodError",rd,{Parent:Error}),nd=nn(Ze),ad=an(Ze),od=ir(Ze),Po=ur(Ze),sd=Bi(Ze),id=qi(Ze),ud=Gi(Ze),cd=Wi(Ze),ld=Yi(Ze),dd=Hi(Ze),fd=Ki(Ze),pd=Xi(Ze),X=h("ZodType",(e,t)=>(K.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:rr(e,"input"),output:rr(e,"output")}}),e.toJSONSchema=Al(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(Ke(t,{checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),{parent:!0}),e.with=e.check,e.clone=(r,n)=>Xe(e,r,n),e.brand=()=>e,e.register=((r,n)=>(r.add(e,n),e)),e.parse=(r,n)=>nd(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>od(e,r,n),e.parseAsync=async(r,n)=>ad(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>Po(e,r,n),e.spa=e.safeParseAsync,e.encode=(r,n)=>sd(e,r,n),e.decode=(r,n)=>id(e,r,n),e.encodeAsync=async(r,n)=>ud(e,r,n),e.decodeAsync=async(r,n)=>cd(e,r,n),e.safeEncode=(r,n)=>ld(e,r,n),e.safeDecode=(r,n)=>dd(e,r,n),e.safeEncodeAsync=async(r,n)=>fd(e,r,n),e.safeDecodeAsync=async(r,n)=>pd(e,r,n),e.refine=(r,n)=>e.check(lf(r,n)),e.superRefine=r=>e.check(df(r)),e.overwrite=r=>e.check(It(r)),e.optional=()=>ca(e),e.exactOptional=()=>Yd(e),e.nullable=()=>la(e),e.nullish=()=>ca(la(e)),e.nonoptional=r=>tf(e,r),e.array=()=>kt(e),e.or=r=>we([e,r]),e.and=r=>Jd(e,r),e.transform=r=>da(e,Gd(r)),e.default=r=>Xd(e,r),e.prefault=r=>ef(e,r),e.catch=r=>nf(e,r),e.pipe=r=>da(e,r),e.readonly=()=>sf(e),e.describe=r=>{const n=e.clone();return Ot.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){var r;return(r=Ot.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Ot.get(e);const n=e.clone();return Ot.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=r=>r(e),e)),Ro=h("_ZodString",(e,t)=>{on.init(e,t),X.init(e,t),e._zod.processJSONSchema=(n,a,o)=>co(e,n,a);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(ml(...n)),e.includes=(...n)=>e.check(gl(...n)),e.startsWith=(...n)=>e.check(_l(...n)),e.endsWith=(...n)=>e.check(yl(...n)),e.min=(...n)=>e.check(Xt(...n)),e.max=(...n)=>e.check(io(...n)),e.length=(...n)=>e.check(uo(...n)),e.nonempty=(...n)=>e.check(Xt(1,...n)),e.lowercase=n=>e.check(hl(n)),e.uppercase=n=>e.check(vl(n)),e.trim=()=>e.check(wl()),e.normalize=(...n)=>e.check(bl(...n)),e.toLowerCase=()=>e.check(El()),e.toUpperCase=()=>e.check(Il()),e.slugify=()=>e.check(kl())}),md=h("ZodString",(e,t)=>{on.init(e,t),Ro.init(e,t),e.email=r=>e.check(jc(hd,r)),e.url=r=>e.check(Fc(vd,r)),e.jwt=r=>e.check(nl(Nd,r)),e.emoji=r=>e.check(Jc(gd,r)),e.guid=r=>e.check(ra(ia,r)),e.uuid=r=>e.check(Mc(Wt,r)),e.uuidv4=r=>e.check(Dc(Wt,r)),e.uuidv6=r=>e.check(Lc(Wt,r)),e.uuidv7=r=>e.check(Uc(Wt,r)),e.nanoid=r=>e.check(Vc(_d,r)),e.guid=r=>e.check(ra(ia,r)),e.cuid=r=>e.check(Bc(yd,r)),e.cuid2=r=>e.check(qc(bd,r)),e.ulid=r=>e.check(Gc(wd,r)),e.base64=r=>e.check(el(Od,r)),e.base64url=r=>e.check(tl(Td,r)),e.xid=r=>e.check(Wc(Ed,r)),e.ksuid=r=>e.check(Yc(Id,r)),e.ipv4=r=>e.check(Hc(kd,r)),e.ipv6=r=>e.check(Kc(Sd,r)),e.cidrv4=r=>e.check(Xc(zd,r)),e.cidrv6=r=>e.check(Qc(xd,r)),e.e164=r=>e.check(rl(Ad,r)),e.datetime=r=>e.check(Yl(r)),e.date=r=>e.check(Kl(r)),e.time=r=>e.check(Ql(r)),e.duration=r=>e.check(td(r))});function S(e){return Cc(md,e)}const ne=h("ZodStringFormat",(e,t)=>{te.init(e,t),Ro.init(e,t)}),hd=h("ZodEmail",(e,t)=>{Uu.init(e,t),ne.init(e,t)}),ia=h("ZodGUID",(e,t)=>{Du.init(e,t),ne.init(e,t)}),Wt=h("ZodUUID",(e,t)=>{Lu.init(e,t),ne.init(e,t)}),vd=h("ZodURL",(e,t)=>{Fu.init(e,t),ne.init(e,t)}),gd=h("ZodEmoji",(e,t)=>{Ju.init(e,t),ne.init(e,t)}),_d=h("ZodNanoID",(e,t)=>{Vu.init(e,t),ne.init(e,t)}),yd=h("ZodCUID",(e,t)=>{Bu.init(e,t),ne.init(e,t)}),bd=h("ZodCUID2",(e,t)=>{qu.init(e,t),ne.init(e,t)}),wd=h("ZodULID",(e,t)=>{Gu.init(e,t),ne.init(e,t)}),Ed=h("ZodXID",(e,t)=>{Wu.init(e,t),ne.init(e,t)}),Id=h("ZodKSUID",(e,t)=>{Yu.init(e,t),ne.init(e,t)}),kd=h("ZodIPv4",(e,t)=>{ec.init(e,t),ne.init(e,t)}),Sd=h("ZodIPv6",(e,t)=>{tc.init(e,t),ne.init(e,t)}),zd=h("ZodCIDRv4",(e,t)=>{rc.init(e,t),ne.init(e,t)}),xd=h("ZodCIDRv6",(e,t)=>{nc.init(e,t),ne.init(e,t)}),Od=h("ZodBase64",(e,t)=>{ac.init(e,t),ne.init(e,t)}),Td=h("ZodBase64URL",(e,t)=>{sc.init(e,t),ne.init(e,t)}),Ad=h("ZodE164",(e,t)=>{ic.init(e,t),ne.init(e,t)}),Nd=h("ZodJWT",(e,t)=>{cc.init(e,t),ne.init(e,t)}),$o=h("ZodNumber",(e,t)=>{ro.init(e,t),X.init(e,t),e._zod.processJSONSchema=(n,a,o)=>lo(e,n,a),e.gt=(n,a)=>e.check(aa(n,a)),e.gte=(n,a)=>e.check(Rr(n,a)),e.min=(n,a)=>e.check(Rr(n,a)),e.lt=(n,a)=>e.check(na(n,a)),e.lte=(n,a)=>e.check(Pr(n,a)),e.max=(n,a)=>e.check(Pr(n,a)),e.int=n=>e.check(ua(n)),e.safe=n=>e.check(ua(n)),e.positive=n=>e.check(aa(0,n)),e.nonnegative=n=>e.check(Rr(0,n)),e.negative=n=>e.check(na(0,n)),e.nonpositive=n=>e.check(Pr(0,n)),e.multipleOf=(n,a)=>e.check(oa(n,a)),e.step=(n,a)=>e.check(oa(n,a)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function Zd(e){return ul($o,e)}const Pd=h("ZodNumberFormat",(e,t)=>{lc.init(e,t),$o.init(e,t)});function ua(e){return cl(Pd,e)}const Rd=h("ZodBoolean",(e,t)=>{dc.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>fo(e,r,n)});function be(e){return ll(Rd,e)}const $d=h("ZodNull",(e,t)=>{fc.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>po(e,r,n)});function Cd(e){return dl($d,e)}const jd=h("ZodUnknown",(e,t)=>{pc.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>ho()});function De(){return fl(jd)}const Md=h("ZodNever",(e,t)=>{mc.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>mo(e,r,n)});function Co(e){return pl(Md,e)}const Dd=h("ZodArray",(e,t)=>{hc.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>bo(e,r,n,a),e.element=t.element,e.min=(r,n)=>e.check(Xt(r,n)),e.nonempty=r=>e.check(Xt(1,r)),e.max=(r,n)=>e.check(io(r,n)),e.length=(r,n)=>e.check(uo(r,n)),e.unwrap=()=>e.element});function kt(e,t){return Sl(Dd,e,t)}const jo=h("ZodObject",(e,t)=>{gc.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>wo(e,r,n,a),L(e,"shape",()=>t.shape),e.keyof=()=>Do(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:De()}),e.loose=()=>e.clone({...e._zod.def,catchall:De()}),e.strict=()=>e.clone({...e._zod.def,catchall:Co()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>Ci(e,r),e.safeExtend=r=>ji(e,r),e.merge=r=>Mi(e,r),e.pick=r=>Ri(e,r),e.omit=r=>$i(e,r),e.partial=(...r)=>Di(Lo,e,r[0]),e.required=(...r)=>Li(Uo,e,r[0])});function W(e,t){const r={type:"object",shape:e??{},...N(t)};return new jo(r)}function H(e,t){return new jo({type:"object",shape:e,catchall:Co(),...N(t)})}const Mo=h("ZodUnion",(e,t)=>{oo.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>Eo(e,r,n,a),e.options=t.options});function we(e,t){return new Mo({type:"union",options:e,...N(t)})}const Ld=h("ZodDiscriminatedUnion",(e,t)=>{Mo.init(e,t),_c.init(e,t)});function Ud(e,t,r){return new Ld({type:"union",options:t,discriminator:e,...N(r)})}const Fd=h("ZodIntersection",(e,t)=>{yc.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>Io(e,r,n,a)});function Jd(e,t){return new Fd({type:"intersection",left:e,right:t})}const Vd=h("ZodRecord",(e,t)=>{bc.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>ko(e,r,n,a),e.keyType=t.keyType,e.valueType=t.valueType});function Nt(e,t,r){return new Vd({type:"record",keyType:e,valueType:t,...N(r)})}const Wr=h("ZodEnum",(e,t)=>{wc.init(e,t),X.init(e,t),e._zod.processJSONSchema=(n,a,o)=>vo(e,n,a),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,a)=>{const o={};for(const i of n)if(r.has(i))o[i]=t.entries[i];else throw new Error(`Key ${i} not found in enum`);return new Wr({...t,checks:[],...N(a),entries:o})},e.exclude=(n,a)=>{const o={...t.entries};for(const i of n)if(r.has(i))delete o[i];else throw new Error(`Key ${i} not found in enum`);return new Wr({...t,checks:[],...N(a),entries:o})}});function Do(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new Wr({type:"enum",entries:r,...N(t)})}const Bd=h("ZodLiteral",(e,t)=>{Ec.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>go(e,r,n),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function P(e,t){return new Bd({type:"literal",values:Array.isArray(e)?e:[e],...N(t)})}const qd=h("ZodTransform",(e,t)=>{Ic.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>yo(e,r),e._zod.parse=(r,n)=>{if(n.direction==="backward")throw new La(e.constructor.name);r.addIssue=o=>{if(typeof o=="string")r.issues.push(At(o,r.value,t));else{const i=o;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=r.value),i.inst??(i.inst=e),r.issues.push(At(i))}};const a=t.transform(r.value,r);return a instanceof Promise?a.then(o=>(r.value=o,r)):(r.value=a,r)}});function Gd(e){return new qd({type:"transform",transform:e})}const Lo=h("ZodOptional",(e,t)=>{so.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>sn(e,r,n,a),e.unwrap=()=>e._zod.def.innerType});function ca(e){return new Lo({type:"optional",innerType:e})}const Wd=h("ZodExactOptional",(e,t)=>{kc.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>sn(e,r,n,a),e.unwrap=()=>e._zod.def.innerType});function Yd(e){return new Wd({type:"optional",innerType:e})}const Hd=h("ZodNullable",(e,t)=>{Sc.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>So(e,r,n,a),e.unwrap=()=>e._zod.def.innerType});function la(e){return new Hd({type:"nullable",innerType:e})}const Kd=h("ZodDefault",(e,t)=>{zc.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>xo(e,r,n,a),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Xd(e,t){return new Kd({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Va(t)}})}const Qd=h("ZodPrefault",(e,t)=>{xc.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>Oo(e,r,n,a),e.unwrap=()=>e._zod.def.innerType});function ef(e,t){return new Qd({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Va(t)}})}const Uo=h("ZodNonOptional",(e,t)=>{Oc.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>zo(e,r,n,a),e.unwrap=()=>e._zod.def.innerType});function tf(e,t){return new Uo({type:"nonoptional",innerType:e,...N(t)})}const rf=h("ZodCatch",(e,t)=>{Tc.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>To(e,r,n,a),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function nf(e,t){return new rf({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const af=h("ZodPipe",(e,t)=>{Ac.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>Ao(e,r,n,a),e.in=t.in,e.out=t.out});function da(e,t){return new af({type:"pipe",in:e,out:t})}const of=h("ZodReadonly",(e,t)=>{Nc.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>No(e,r,n,a),e.unwrap=()=>e._zod.def.innerType});function sf(e){return new of({type:"readonly",innerType:e})}const uf=h("ZodLazy",(e,t)=>{Zc.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>Zo(e,r,n,a),e.unwrap=()=>e._zod.def.getter()});function cf(e){return new uf({type:"lazy",getter:e})}const un=h("ZodCustom",(e,t)=>{Pc.init(e,t),X.init(e,t),e._zod.processJSONSchema=(r,n,a)=>_o(e,r)});function Fo(e,t){return zl(un,e??(()=>!0),t)}function lf(e,t={}){return xl(un,e,t)}function df(e){return Ol(e)}function nr(e,t={}){const r=new un({type:"custom",check:"custom",fn:n=>n instanceof e,abort:!0,...N(t)});return r._zod.bag.Class=e,r._zod.check=n=>{n.value instanceof e||n.issues.push({code:"invalid_type",expected:e.name,input:n.value,inst:r,path:[...r._zod.def.path??[]]})},r}var Zt;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const o={};for(const i of a)o[i]=i;return o},e.getValidEnumValues=a=>{const o=e.objectKeys(a).filter(s=>typeof a[a[s]]!="number"),i={};for(const s of o)i[s]=a[s];return e.objectValues(i)},e.objectValues=a=>e.objectKeys(a).map(function(o){return a[o]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const o=[];for(const i in a)Object.prototype.hasOwnProperty.call(a,i)&&o.push(i);return o},e.find=(a,o)=>{for(const i of a)if(o(i))return i},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,o=" | "){return a.map(i=>typeof i=="string"?`'${i}'`:i).join(o)}e.joinValues=n,e.jsonStringifyReplacer=(a,o)=>typeof o=="bigint"?o.toString():o})(Zt||(Zt={}));var fa;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(fa||(fa={}));Zt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);Zt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ar extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(o){return o.message},n={_errors:[]},a=o=>{for(const i of o.issues)if(i.code==="invalid_union")i.unionErrors.map(a);else if(i.code==="invalid_return_type")a(i.returnTypeError);else if(i.code==="invalid_arguments")a(i.argumentsError);else if(i.path.length===0)n._errors.push(r(i));else{let s=n,c=0;for(;c<i.path.length;){const u=i.path[c];c===i.path.length-1?(s[u]=s[u]||{_errors:[]},s[u]._errors.push(r(i))):s[u]=s[u]||{_errors:[]},s=s[u],c++}}};return a(this),n}static assert(t){if(!(t instanceof ar))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Zt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r=Object.create(null),n=[];for(const a of this.issues)if(a.path.length>0){const o=a.path[0];r[o]=r[o]||[],r[o].push(t(a))}else n.push(t(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}ar.create=e=>new ar(e);var pa;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(pa||(pa={}));var j;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(j||(j={}));class ma extends Error{constructor(t,r){super(t),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}}function $r(e){}function ff(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=$r,onError:r=$r,onRetry:n=$r,onComment:a}=e;let o="",i=!0,s,c="",u="";function l(v){const p=i?v.replace(/^\xEF\xBB\xBF/,""):v,[g,b]=pf(`${o}${p}`);for(const f of g)d(f);o=b,i=!1}function d(v){if(v===""){y();return}if(v.startsWith(":")){a&&a(v.slice(v.startsWith(": ")?2:1));return}const p=v.indexOf(":");if(p!==-1){const g=v.slice(0,p),b=v[p+1]===" "?2:1,f=v.slice(p+b);m(g,f,v);return}m(v,"",v)}function m(v,p,g){switch(v){case"event":u=p;break;case"data":c=`${c}${p}
`;break;case"id":s=p.includes("\0")?void 0:p;break;case"retry":/^\d+$/.test(p)?n(parseInt(p,10)):r(new ma(`Invalid \`retry\` value: "${p}"`,{type:"invalid-retry",value:p,line:g}));break;default:r(new ma(`Unknown field "${v.length>20?`${v.slice(0,20)}â¦`:v}"`,{type:"unknown-field",field:v,value:p,line:g}));break}}function y(){c.length>0&&t({id:s,event:u||void 0,data:c.endsWith(`
`)?c.slice(0,-1):c}),s=void 0,c="",u=""}function w(v={}){o&&v.consume&&d(o),i=!0,s=void 0,c="",u="",o=""}return{feed:l,reset:w}}function pf(e){const t=[];let r="",n=0;for(;n<e.length;){const a=e.indexOf("\r",n),o=e.indexOf(`
`,n);let i=-1;if(a!==-1&&o!==-1?i=Math.min(a,o):a!==-1?a===e.length-1?i=-1:i=a:o!==-1&&(i=o),i===-1){r=e.slice(n);break}else{const s=e.slice(n,i);t.push(s),n=i+1,e[n-1]==="\r"&&e[n]===`
`&&n++}}return[t,r]}class mf extends TransformStream{constructor({onError:t,onRetry:r,onComment:n}={}){let a;super({start(o){a=ff({onEvent:i=>{o.enqueue(i)},onError(i){t==="terminate"?o.error(i):typeof t=="function"&&t(i)},onRetry:r,onComment:n})},transform(o){a.feed(o)}})}}var jt=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{const a=()=>{const o=r.length,i=new Array(t);for(let s=0;s<t;s++)i[s]=r[Math.random()*o|0];return i.join("")};if(e==null)return a;if(r.includes(n))throw new Si({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return()=>`${e}${n}${a()}`},hf=jt();function ha(e=globalThis){var t,r,n;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(n=(r=e.process)==null?void 0:r.versions)!=null&&n.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function nt(e){if(e==null)return{};const t={};if(e instanceof Headers)e.forEach((r,n)=>{t[n.toLowerCase()]=r});else{Array.isArray(e)||(e=Object.entries(e));for(const[r,n]of e)n!=null&&(t[r.toLowerCase()]=n)}return t}function va(e,...t){const r=new Headers(nt(e)),n=r.get("user-agent")||"";return r.set("user-agent",[n,...t].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}var vf=/"__proto__"\s*:/,gf=/"constructor"\s*:/;function ga(e){const t=JSON.parse(e);return t===null||typeof t!="object"||vf.test(e)===!1&&gf.test(e)===!1?t:_f(t)}function _f(e){let t=[e];for(;t.length;){const r=t;t=[];for(const n of r){if(Object.prototype.hasOwnProperty.call(n,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(n,"constructor")&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const a in n){const o=n[a];o&&typeof o=="object"&&t.push(o)}}}return e}function yf(e){const{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch{return ga(e)}try{return ga(e)}finally{Error.stackTraceLimit=t}}function cn(e){if(e.type==="object"||Array.isArray(e.type)&&e.type.includes("object")){e.additionalProperties=!1;const{properties:r}=e;if(r!=null)for(const n of Object.keys(r))r[n]=tt(r[n])}e.items!=null&&(e.items=Array.isArray(e.items)?e.items.map(tt):tt(e.items)),e.anyOf!=null&&(e.anyOf=e.anyOf.map(tt)),e.allOf!=null&&(e.allOf=e.allOf.map(tt)),e.oneOf!=null&&(e.oneOf=e.oneOf.map(tt));const{definitions:t}=e;if(t!=null)for(const r of Object.keys(t))t[r]=tt(t[r]);return e}function tt(e){return typeof e=="boolean"?e:cn(e)}var bf=Symbol("Let zodToJsonSchema decide on which parser to use"),_a={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},wf=e=>typeof e=="string"?{..._a,name:e}:{..._a,...e};function xe(){return{}}function Ef(e,t){var r,n,a;const o={type:"array"};return(r=e.type)!=null&&r._def&&((a=(n=e.type)==null?void 0:n._def)==null?void 0:a.typeName)!==j.ZodAny&&(o.items=G(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(o.minItems=e.minLength.value),e.maxLength&&(o.maxItems=e.maxLength.value),e.exactLength&&(o.minItems=e.exactLength.value,o.maxItems=e.exactLength.value),o}function If(e){const t={type:"integer",format:"int64"};if(!e.checks)return t;for(const r of e.checks)switch(r.kind){case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function kf(){return{type:"boolean"}}function Jo(e,t){return G(e.type._def,t)}var Sf=(e,t)=>G(e.innerType._def,t);function Vo(e,t,r){const n=r??t.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((a,o)=>Vo(e,t,a))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return zf(e)}}var zf=e=>{const t={type:"integer",format:"unix-time"};for(const r of e.checks)switch(r.kind){case"min":t.minimum=r.value;break;case"max":t.maximum=r.value;break}return t};function xf(e,t){return{...G(e.innerType._def,t),default:e.defaultValue()}}function Of(e,t){return t.effectStrategy==="input"?G(e.schema._def,t):xe()}function Tf(e){return{type:"string",enum:Array.from(e.values)}}var Af=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function Nf(e,t){const r=[G(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),G(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(a=>!!a),n=[];return r.forEach(a=>{if(Af(a))n.push(...a.allOf);else{let o=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:i,...s}=a;o=s}n.push(o)}}),n.length?{allOf:n}:void 0}function Zf(e){const t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var Cr=void 0,Re={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Cr===void 0&&(Cr=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Cr),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Bo(e,t){const r={type:"string"};if(e.checks)for(const n of e.checks)switch(n.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"email":switch(t.emailStrategy){case"format:email":$e(r,"email",n.message,t);break;case"format:idn-email":$e(r,"idn-email",n.message,t);break;case"pattern:zod":_e(r,Re.email,n.message,t);break}break;case"url":$e(r,"uri",n.message,t);break;case"uuid":$e(r,"uuid",n.message,t);break;case"regex":_e(r,n.regex,n.message,t);break;case"cuid":_e(r,Re.cuid,n.message,t);break;case"cuid2":_e(r,Re.cuid2,n.message,t);break;case"startsWith":_e(r,RegExp(`^${jr(n.value,t)}`),n.message,t);break;case"endsWith":_e(r,RegExp(`${jr(n.value,t)}$`),n.message,t);break;case"datetime":$e(r,"date-time",n.message,t);break;case"date":$e(r,"date",n.message,t);break;case"time":$e(r,"time",n.message,t);break;case"duration":$e(r,"duration",n.message,t);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"includes":{_e(r,RegExp(jr(n.value,t)),n.message,t);break}case"ip":{n.version!=="v6"&&$e(r,"ipv4",n.message,t),n.version!=="v4"&&$e(r,"ipv6",n.message,t);break}case"base64url":_e(r,Re.base64url,n.message,t);break;case"jwt":_e(r,Re.jwt,n.message,t);break;case"cidr":{n.version!=="v6"&&_e(r,Re.ipv4Cidr,n.message,t),n.version!=="v4"&&_e(r,Re.ipv6Cidr,n.message,t);break}case"emoji":_e(r,Re.emoji(),n.message,t);break;case"ulid":{_e(r,Re.ulid,n.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{$e(r,"binary",n.message,t);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{_e(r,Re.base64,n.message,t);break}}break}case"nanoid":_e(r,Re.nanoid,n.message,t)}return r}function jr(e,t){return t.patternStrategy==="escape"?Rf(e):e}var Pf=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Rf(e){let t="";for(let r=0;r<e.length;r++)Pf.has(e[r])||(t+="\\"),t+=e[r];return t}function $e(e,t,r,n){var a;e.format||(a=e.anyOf)!=null&&a.some(o=>o.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):e.format=t}function _e(e,t,r,n){var a;e.pattern||(a=e.allOf)!=null&&a.some(o=>o.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:ya(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):e.pattern=ya(t,n)}function ya(e,t){var r;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},a=n.i?e.source.toLowerCase():e.source;let o="",i=!1,s=!1,c=!1;for(let u=0;u<a.length;u++){if(i){o+=a[u],i=!1;continue}if(n.i){if(s){if(a[u].match(/[a-z]/)){c?(o+=a[u],o+=`${a[u-2]}-${a[u]}`.toUpperCase(),c=!1):a[u+1]==="-"&&((r=a[u+2])!=null&&r.match(/[a-z]/))?(o+=a[u],c=!0):o+=`${a[u]}${a[u].toUpperCase()}`;continue}}else if(a[u].match(/[a-z]/)){o+=`[${a[u]}${a[u].toUpperCase()}]`;continue}}if(n.m){if(a[u]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(a[u]==="$"){o+=`($|(?=[\r
]))`;continue}}if(n.s&&a[u]==="."){o+=s?`${a[u]}\r
`:`[${a[u]}\r
]`;continue}o+=a[u],a[u]==="\\"?i=!0:s&&a[u]==="]"?s=!1:!s&&a[u]==="["&&(s=!0)}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return o}function qo(e,t){var r,n,a,o,i,s;const c={type:"object",additionalProperties:(r=G(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?r:t.allowedAdditionalProperties};if(((n=e.keyType)==null?void 0:n._def.typeName)===j.ZodString&&((a=e.keyType._def.checks)!=null&&a.length)){const{type:u,...l}=Bo(e.keyType._def,t);return{...c,propertyNames:l}}else{if(((o=e.keyType)==null?void 0:o._def.typeName)===j.ZodEnum)return{...c,propertyNames:{enum:e.keyType._def.values}};if(((i=e.keyType)==null?void 0:i._def.typeName)===j.ZodBranded&&e.keyType._def.type._def.typeName===j.ZodString&&((s=e.keyType._def.type._def.checks)!=null&&s.length)){const{type:u,...l}=Jo(e.keyType._def,t);return{...c,propertyNames:l}}}return c}function $f(e,t){if(t.mapStrategy==="record")return qo(e,t);const r=G(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||xe(),n=G(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||xe();return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function Cf(e){const t=e.values,n=Object.keys(e.values).filter(o=>typeof t[t[o]]!="number").map(o=>t[o]),a=Array.from(new Set(n.map(o=>typeof o)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:n}}function jf(){return{not:xe()}}function Mf(){return{type:"null"}}var Yr={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Df(e,t){const r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(n=>n._def.typeName in Yr&&(!n._def.checks||!n._def.checks.length))){const n=r.reduce((a,o)=>{const i=Yr[o._def.typeName];return i&&!a.includes(i)?[...a,i]:a},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){const n=r.reduce((a,o)=>{const i=typeof o._def.value;switch(i){case"string":case"number":case"boolean":return[...a,i];case"bigint":return[...a,"integer"];case"object":if(o._def.value===null)return[...a,"null"];default:return a}},[]);if(n.length===r.length){const a=n.filter((o,i,s)=>s.indexOf(o)===i);return{type:a.length>1?a:a[0],enum:r.reduce((o,i)=>o.includes(i._def.value)?o:[...o,i._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,a)=>[...n,...a._def.values.filter(o=>!n.includes(o))],[])};return Lf(e,t)}var Lf=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((n,a)=>G(n._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(n=>!!n&&(!t.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function Uf(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[Yr[e.innerType._def.typeName],"null"]};const r=G(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function Ff(e){const t={type:"number"};if(!e.checks)return t;for(const r of e.checks)switch(r.kind){case"int":t.type="integer";break;case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function Jf(e,t){const r={type:"object",properties:{}},n=[],a=e.shape();for(const i in a){let s=a[i];if(s===void 0||s._def===void 0)continue;const c=Bf(s),u=G(s._def,{...t,currentPath:[...t.currentPath,"properties",i],propertyPath:[...t.currentPath,"properties",i]});u!==void 0&&(r.properties[i]=u,c||n.push(i))}n.length&&(r.required=n);const o=Vf(e,t);return o!==void 0&&(r.additionalProperties=o),r}function Vf(e,t){if(e.catchall._def.typeName!=="ZodNever")return G(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function Bf(e){try{return e.isOptional()}catch{return!0}}var qf=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return G(e.innerType._def,t);const n=G(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:xe()},n]}:xe()},Gf=(e,t)=>{if(t.pipeStrategy==="input")return G(e.in._def,t);if(t.pipeStrategy==="output")return G(e.out._def,t);const r=G(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),n=G(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(a=>a!==void 0)}};function Wf(e,t){return G(e.type._def,t)}function Yf(e,t){const n={type:"array",uniqueItems:!0,items:G(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(n.minItems=e.minSize.value),e.maxSize&&(n.maxItems=e.maxSize.value),n}function Hf(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,n)=>G(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:G(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,n)=>G(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function Kf(){return{not:xe()}}function Xf(){return xe()}var Qf=(e,t)=>G(e.innerType._def,t),ep=(e,t,r)=>{switch(t){case j.ZodString:return Bo(e,r);case j.ZodNumber:return Ff(e);case j.ZodObject:return Jf(e,r);case j.ZodBigInt:return If(e);case j.ZodBoolean:return kf();case j.ZodDate:return Vo(e,r);case j.ZodUndefined:return Kf();case j.ZodNull:return Mf();case j.ZodArray:return Ef(e,r);case j.ZodUnion:case j.ZodDiscriminatedUnion:return Df(e,r);case j.ZodIntersection:return Nf(e,r);case j.ZodTuple:return Hf(e,r);case j.ZodRecord:return qo(e,r);case j.ZodLiteral:return Zf(e);case j.ZodEnum:return Tf(e);case j.ZodNativeEnum:return Cf(e);case j.ZodNullable:return Uf(e,r);case j.ZodOptional:return qf(e,r);case j.ZodMap:return $f(e,r);case j.ZodSet:return Yf(e,r);case j.ZodLazy:return()=>e.getter()._def;case j.ZodPromise:return Wf(e,r);case j.ZodNaN:case j.ZodNever:return jf();case j.ZodEffects:return Of(e,r);case j.ZodAny:return xe();case j.ZodUnknown:return Xf();case j.ZodDefault:return xf(e,r);case j.ZodBranded:return Jo(e,r);case j.ZodReadonly:return Qf(e,r);case j.ZodCatch:return Sf(e,r);case j.ZodPipeline:return Gf(e,r);case j.ZodFunction:case j.ZodVoid:case j.ZodSymbol:return;default:return(n=>{})()}},tp=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")};function G(e,t,r=!1){var n;const a=t.seen.get(e);if(t.override){const c=(n=t.override)==null?void 0:n.call(t,e,t,a,r);if(c!==bf)return c}if(a&&!r){const c=rp(a,t);if(c!==void 0)return c}const o={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,o);const i=ep(e,e.typeName,t),s=typeof i=="function"?G(i(),t):i;if(s&&np(e,t,s),t.postProcess){const c=t.postProcess(s,e,t);return o.jsonSchema=s,c}return o.jsonSchema=s,s}var rp=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:tp(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,n)=>t.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),xe()):t.$refStrategy==="seen"?xe():void 0}},np=(e,t,r)=>(e.description&&(r.description=e.description),r),ap=e=>{const t=wf(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([n,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,n],jsonSchema:void 0}]))}},op=(e,t)=>{var r;const n=ap(t);let a=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((u,[l,d])=>{var m;return{...u,[l]:(m=G(d._def,{...n,currentPath:[...n.basePath,n.definitionPath,l]},!0))!=null?m:xe()}},{}):void 0;const o=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=(r=G(e._def,o===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,o]},!1))!=null?r:xe(),s=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;s!==void 0&&(i.title=s);const c=o===void 0?a?{...i,[n.definitionPath]:a}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,o].join("/"),[n.definitionPath]:{...a,[o]:i}};return c.$schema="http://json-schema.org/draft-07/schema#",c},Hr=Symbol.for("vercel.ai.schema");function sp(e){let t;return()=>(t==null&&(t=e()),t)}function lr(e,{validate:t}={}){return{[Hr]:!0,_type:void 0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function ip(e){return typeof e=="object"&&e!==null&&Hr in e&&e[Hr]===!0&&"jsonSchema"in e&&"validate"in e}function ln(e){return e==null?lr({properties:{},additionalProperties:!1}):ip(e)?e:"~standard"in e?e["~standard"].vendor==="zod"?Go(e):up(e):e()}function up(e){return lr(()=>cn(e["~standard"].jsonSchema.input({target:"draft-07"})),{validate:async t=>{const r=await e["~standard"].validate(t);return"value"in r?{success:!0,value:r.value}:{success:!1,error:new _t({value:t,cause:r.issues})}}})}function cp(e,t){var r;const n=(r=void 0)!=null?r:!1;return lr(()=>op(e,{$refStrategy:n?"root":"none"}),{validate:async a=>{const o=await e.safeParseAsync(a);return o.success?{success:!0,value:o.data}:{success:!1,error:o.error}}})}function lp(e,t){var r;const n=(r=void 0)!=null?r:!1;return lr(()=>cn(Gl(e,{target:"draft-7",io:"input",reused:n?"ref":"inline"})),{validate:async a=>{const o=await Po(e,a);return o.success?{success:!0,value:o.data}:{success:!1,error:o.error}}})}function dp(e){return"_zod"in e}function Go(e,t){return dp(e)?lp(e):cp(e)}async function ba({value:e,schema:t,context:r}){const n=await Pt({value:e,schema:t,context:r});if(!n.success)throw _t.wrap({value:e,cause:n.error,context:r});return n.value}async function Pt({value:e,schema:t,context:r}){const n=ln(t);try{if(n.validate==null)return{success:!0,value:e,rawValue:e};const a=await n.validate(e);return a.success?{success:!0,value:a.value,rawValue:e}:{success:!1,error:_t.wrap({value:e,cause:a.error,context:r}),rawValue:e}}catch(a){return{success:!1,error:_t.wrap({value:e,cause:a,context:r}),rawValue:e}}}async function ot({text:e,schema:t}){try{const r=yf(e);return t==null?{success:!0,value:r,rawValue:r}:await Pt({value:r,schema:t})}catch(r){return{success:!1,error:Un.isInstance(r)?r:new Un({text:e,cause:r}),rawValue:void 0}}}function fp({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new mf).pipeThrough(new TransformStream({async transform({data:r},n){r!=="[DONE]"&&n.enqueue(await ot({text:r,schema:t}))}}))}async function Be(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var pp=Object.defineProperty,mp=(e,t)=>{for(var r in t)pp(e,r,{get:t[r],enumerable:!0})},Wo="AI_NoObjectGeneratedError",Yo=`vercel.ai.error.${Wo}`,hp=Symbol.for(Yo),Ho,We=class extends Le{constructor({message:e="No object generated.",cause:t,text:r,response:n,usage:a,finishReason:o}){super({name:Wo,message:e,cause:t}),this[Ho]=!0,this.text=r,this.response=n,this.usage=a,this.finishReason=o}static isInstance(e){return Le.hasMarker(e,Yo)}};Ho=hp;var Ko="AI_UIMessageStreamError",Xo=`vercel.ai.error.${Ko}`,vp=Symbol.for(Xo),Qo,ft=class extends Le{constructor({chunkType:e,chunkId:t,message:r}){super({name:Ko,message:r}),this[Qo]=!0,this.chunkType=e,this.chunkId=t}static isInstance(e){return Le.hasMarker(e,Xo)}};Qo=vp;var wa="6.0.67",es=we([S(),nr(Uint8Array),nr(ArrayBuffer),Fo(e=>{var t,r;return(r=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?r:!1},{message:"Must be a Buffer"})]),Rt=cf(()=>we([Cd(),S(),Zd(),be(),Nt(S(),Rt.optional()),kt(Rt)])),D=Nt(S(),Nt(S(),Rt.optional())),ts=W({type:P("text"),text:S(),providerOptions:D.optional()}),gp=W({type:P("image"),image:we([es,nr(URL)]),mediaType:S().optional(),providerOptions:D.optional()}),rs=W({type:P("file"),data:we([es,nr(URL)]),filename:S().optional(),mediaType:S(),providerOptions:D.optional()}),_p=W({type:P("reasoning"),text:S(),providerOptions:D.optional()}),yp=W({type:P("tool-call"),toolCallId:S(),toolName:S(),input:De(),providerOptions:D.optional(),providerExecuted:be().optional()}),bp=Ud("type",[W({type:P("text"),value:S(),providerOptions:D.optional()}),W({type:P("json"),value:Rt,providerOptions:D.optional()}),W({type:P("execution-denied"),reason:S().optional(),providerOptions:D.optional()}),W({type:P("error-text"),value:S(),providerOptions:D.optional()}),W({type:P("error-json"),value:Rt,providerOptions:D.optional()}),W({type:P("content"),value:kt(we([W({type:P("text"),text:S(),providerOptions:D.optional()}),W({type:P("media"),data:S(),mediaType:S()}),W({type:P("file-data"),data:S(),mediaType:S(),filename:S().optional(),providerOptions:D.optional()}),W({type:P("file-url"),url:S(),providerOptions:D.optional()}),W({type:P("file-id"),fileId:we([S(),Nt(S(),S())]),providerOptions:D.optional()}),W({type:P("image-data"),data:S(),mediaType:S(),providerOptions:D.optional()}),W({type:P("image-url"),url:S(),providerOptions:D.optional()}),W({type:P("image-file-id"),fileId:we([S(),Nt(S(),S())]),providerOptions:D.optional()}),W({type:P("custom"),providerOptions:D.optional()})]))})]),ns=W({type:P("tool-result"),toolCallId:S(),toolName:S(),output:bp,providerOptions:D.optional()}),wp=W({type:P("tool-approval-request"),approvalId:S(),toolCallId:S()}),Ep=W({type:P("tool-approval-response"),approvalId:S(),approved:be(),reason:S().optional()}),Ip=W({role:P("system"),content:S(),providerOptions:D.optional()}),kp=W({role:P("user"),content:we([S(),kt(we([ts,gp,rs]))]),providerOptions:D.optional()}),Sp=W({role:P("assistant"),content:we([S(),kt(we([ts,rs,_p,yp,ns,wp]))]),providerOptions:D.optional()}),zp=W({role:P("tool"),content:kt(we([ns,Ep])),providerOptions:D.optional()});we([Ip,kp,Sp,zp]);function as(e,t){if(e===void 0&&t===void 0)return;if(e===void 0)return t;if(t===void 0)return e;const r={...e};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const a=t[n];if(a===void 0)continue;const o=n in e?e[n]:void 0,i=a!==null&&typeof a=="object"&&!Array.isArray(a)&&!(a instanceof Date)&&!(a instanceof RegExp),s=o!=null&&typeof o=="object"&&!Array.isArray(o)&&!(o instanceof Date)&&!(o instanceof RegExp);i&&s?r[n]=as(o,a):r[n]=a}return r}var xp={};mp(xp,{array:()=>Np,choice:()=>Zp,json:()=>Pp,object:()=>Ap,text:()=>Tp});function Op(e){const t=["ROOT"];let r=-1,n=null;function a(c,u,l){switch(c){case'"':{r=u,t.pop(),t.push(l),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=u,n=u,t.pop(),t.push(l),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(l),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=u,t.pop(),t.push(l),t.push("INSIDE_NUMBER");break}case"{":{r=u,t.pop(),t.push(l),t.push("INSIDE_OBJECT_START");break}case"[":{r=u,t.pop(),t.push(l),t.push("INSIDE_ARRAY_START");break}}}function o(c,u){switch(c){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=u,t.pop();break}}}function i(c,u){switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=u,t.pop();break}}}for(let c=0;c<e.length;c++){const u=e[c];switch(t[t.length-1]){case"ROOT":a(u,c,"FINISH");break;case"INSIDE_OBJECT_START":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{r=c,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{u==='"'&&(t.pop(),t.push("INSIDE_OBJECT_KEY"));break}case"INSIDE_OBJECT_KEY":{u==='"'&&(t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY"));break}case"INSIDE_OBJECT_AFTER_KEY":{u===":"&&(t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE"));break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(u,c,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{o(u,c);break}case"INSIDE_STRING":{switch(u){case'"':{t.pop(),r=c;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:r=c}break}case"INSIDE_ARRAY_START":{u==="]"?(r=c,t.pop()):(r=c,a(u,c,"INSIDE_ARRAY_AFTER_VALUE"));break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=c,t.pop();break}default:{r=c;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(u,c,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),r=c;break}case"INSIDE_NUMBER":{switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=c;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(u,c),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&o(u,c);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&o(u,c);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(u,c);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const d=e.substring(n,c+1);!"false".startsWith(d)&&!"true".startsWith(d)&&!"null".startsWith(d)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?o(u,c):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(u,c)):r=c;break}}}let s=e.slice(0,r+1);for(let c=t.length-1;c>=0;c--)switch(t[c]){case"INSIDE_STRING":{s+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{s+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{s+="]";break}case"INSIDE_LITERAL":{const l=e.substring(n,e.length);"true".startsWith(l)?s+="true".slice(l.length):"false".startsWith(l)?s+="false".slice(l.length):"null".startsWith(l)&&(s+="null".slice(l.length))}}return s}async function Mt(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=await ot({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await ot({text:Op(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var Tp=()=>({name:"text",responseFormat:Promise.resolve({type:"text"}),async parseCompleteOutput({text:e}){return e},async parsePartialOutput({text:e}){return{partial:e}},createElementStreamTransform(){}}),Ap=({schema:e,name:t,description:r})=>{const n=ln(e);return{name:"object",responseFormat:Be(n.jsonSchema).then(a=>({type:"json",schema:a,...t!=null&&{name:t},...r!=null&&{description:r}})),async parseCompleteOutput({text:a},o){const i=await ot({text:a});if(!i.success)throw new We({message:"No object generated: could not parse the response.",cause:i.error,text:a,response:o.response,usage:o.usage,finishReason:o.finishReason});const s=await Pt({value:i.value,schema:n});if(!s.success)throw new We({message:"No object generated: response did not match schema.",cause:s.error,text:a,response:o.response,usage:o.usage,finishReason:o.finishReason});return s.value},async parsePartialOutput({text:a}){const o=await Mt(a);switch(o.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:o.value}}},createElementStreamTransform(){}}},Np=({element:e,name:t,description:r})=>{const n=ln(e);return{name:"array",responseFormat:Be(n.jsonSchema).then(a=>{const{$schema:o,...i}=a;return{type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:i}},required:["elements"],additionalProperties:!1},...t!=null&&{name:t},...r!=null&&{description:r}}}),async parseCompleteOutput({text:a},o){const i=await ot({text:a});if(!i.success)throw new We({message:"No object generated: could not parse the response.",cause:i.error,text:a,response:o.response,usage:o.usage,finishReason:o.finishReason});const s=i.value;if(s==null||typeof s!="object"||!("elements"in s)||!Array.isArray(s.elements))throw new We({message:"No object generated: response did not match schema.",cause:new _t({value:s,cause:"response must be an object with an elements array"}),text:a,response:o.response,usage:o.usage,finishReason:o.finishReason});for(const c of s.elements){const u=await Pt({value:c,schema:n});if(!u.success)throw new We({message:"No object generated: response did not match schema.",cause:u.error,text:a,response:o.response,usage:o.usage,finishReason:o.finishReason})}return s.elements},async parsePartialOutput({text:a}){const o=await Mt(a);switch(o.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{const i=o.value;if(i==null||typeof i!="object"||!("elements"in i)||!Array.isArray(i.elements))return;const s=o.state==="repaired-parse"&&i.elements.length>0?i.elements.slice(0,-1):i.elements,c=[];for(const u of s){const l=await Pt({value:u,schema:n});l.success&&c.push(l.value)}return{partial:c}}}},createElementStreamTransform(){let a=0;return new TransformStream({transform({partialOutput:o},i){if(o!=null)for(;a<o.length;a++)i.enqueue(o[a])}})}}},Zp=({options:e,name:t,description:r})=>({name:"choice",responseFormat:Promise.resolve({type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:e}},required:["result"],additionalProperties:!1},...t!=null&&{name:t},...r!=null&&{description:r}}),async parseCompleteOutput({text:n},a){const o=await ot({text:n});if(!o.success)throw new We({message:"No object generated: could not parse the response.",cause:o.error,text:n,response:a.response,usage:a.usage,finishReason:a.finishReason});const i=o.value;if(i==null||typeof i!="object"||!("result"in i)||typeof i.result!="string"||!e.includes(i.result))throw new We({message:"No object generated: response did not match schema.",cause:new _t({value:i,cause:"response must be an object that contains a choice value."}),text:n,response:a.response,usage:a.usage,finishReason:a.finishReason});return i.result},async parsePartialOutput({text:n}){const a=await Mt(n);switch(a.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{const o=a.value;if(o==null||typeof o!="object"||!("result"in o)||typeof o.result!="string")return;const i=e.filter(s=>s.startsWith(o.result));return a.state==="successful-parse"?i.includes(o.result)?{partial:o.result}:void 0:i.length===1?{partial:i[0]}:void 0}}},createElementStreamTransform(){}}),Pp=({name:e,description:t}={})=>({name:"json",responseFormat:Promise.resolve({type:"json",...e!=null&&{name:e},...t!=null&&{description:t}}),async parseCompleteOutput({text:r},n){const a=await ot({text:r});if(!a.success)throw new We({message:"No object generated: could not parse the response.",cause:a.error,text:r,response:n.response,usage:n.usage,finishReason:n.finishReason});return a.value},async parsePartialOutput({text:r}){const n=await Mt(r);switch(n.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return n.value===void 0?void 0:{partial:n.value}}},createElementStreamTransform(){}});jt({prefix:"aitxt",size:24});(class extends TransformStream{constructor(){super({transform(e,t){t.enqueue(`data: ${JSON.stringify(e)}

`)},flush(e){e.enqueue(`data: [DONE]

`)}})}});var Rp=sp(()=>Go(we([H({type:P("text-start"),id:S(),providerMetadata:D.optional()}),H({type:P("text-delta"),id:S(),delta:S(),providerMetadata:D.optional()}),H({type:P("text-end"),id:S(),providerMetadata:D.optional()}),H({type:P("error"),errorText:S()}),H({type:P("tool-input-start"),toolCallId:S(),toolName:S(),providerExecuted:be().optional(),providerMetadata:D.optional(),dynamic:be().optional(),title:S().optional()}),H({type:P("tool-input-delta"),toolCallId:S(),inputTextDelta:S()}),H({type:P("tool-input-available"),toolCallId:S(),toolName:S(),input:De(),providerExecuted:be().optional(),providerMetadata:D.optional(),dynamic:be().optional(),title:S().optional()}),H({type:P("tool-input-error"),toolCallId:S(),toolName:S(),input:De(),providerExecuted:be().optional(),providerMetadata:D.optional(),dynamic:be().optional(),errorText:S(),title:S().optional()}),H({type:P("tool-approval-request"),approvalId:S(),toolCallId:S()}),H({type:P("tool-output-available"),toolCallId:S(),output:De(),providerExecuted:be().optional(),dynamic:be().optional(),preliminary:be().optional()}),H({type:P("tool-output-error"),toolCallId:S(),errorText:S(),providerExecuted:be().optional(),dynamic:be().optional()}),H({type:P("tool-output-denied"),toolCallId:S()}),H({type:P("reasoning-start"),id:S(),providerMetadata:D.optional()}),H({type:P("reasoning-delta"),id:S(),delta:S(),providerMetadata:D.optional()}),H({type:P("reasoning-end"),id:S(),providerMetadata:D.optional()}),H({type:P("source-url"),sourceId:S(),url:S(),title:S().optional(),providerMetadata:D.optional()}),H({type:P("source-document"),sourceId:S(),mediaType:S(),title:S(),filename:S().optional(),providerMetadata:D.optional()}),H({type:P("file"),url:S(),mediaType:S(),providerMetadata:D.optional()}),H({type:Fo(e=>typeof e=="string"&&e.startsWith("data-"),{message:'Type must start with "data-"'}),id:S().optional(),data:De(),transient:be().optional()}),H({type:P("start-step")}),H({type:P("finish-step")}),H({type:P("start"),messageId:S().optional(),messageMetadata:De().optional()}),H({type:P("finish"),finishReason:Do(["stop","length","content-filter","tool-calls","error","other"]).optional(),messageMetadata:De().optional()}),H({type:P("abort"),reason:S().optional()}),H({type:P("message-metadata"),messageMetadata:De()})])));function $p(e){return e.type.startsWith("data-")}function Kr(e){return e.type.startsWith("tool-")}function Cp(e){return e.type==="dynamic-tool"}function Xr(e){return Kr(e)||Cp(e)}function Ea(e){return e.type.split("-").slice(1).join("-")}function jp({lastMessage:e,messageId:t}){return{message:(e==null?void 0:e.role)==="assistant"?e:{id:t,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}function Mp({stream:e,messageMetadataSchema:t,dataPartSchemas:r,runUpdateMessageJob:n,onError:a,onToolCall:o,onData:i}){return e.pipeThrough(new TransformStream({async transform(s,c){await n(async({state:u,write:l})=>{var d,m,y,w;function v(f){const x=u.message.parts.filter(Xr).find(O=>O.toolCallId===f);if(x==null)throw new ft({chunkType:"tool-invocation",chunkId:f,message:`No tool invocation found for tool call ID "${f}".`});return x}function p(f){var z;const x=u.message.parts.find(C=>Kr(C)&&C.toolCallId===f.toolCallId),O=f,A=x;x!=null?(x.state=f.state,A.input=O.input,A.output=O.output,A.errorText=O.errorText,A.rawInput=O.rawInput,A.preliminary=O.preliminary,f.title!==void 0&&(A.title=f.title),A.providerExecuted=(z=O.providerExecuted)!=null?z:x.providerExecuted,O.providerMetadata!=null&&(x.callProviderMetadata=O.providerMetadata)):u.message.parts.push({type:`tool-${f.toolName}`,toolCallId:f.toolCallId,state:f.state,title:f.title,input:O.input,output:O.output,rawInput:O.rawInput,errorText:O.errorText,providerExecuted:O.providerExecuted,preliminary:O.preliminary,...O.providerMetadata!=null?{callProviderMetadata:O.providerMetadata}:{}})}function g(f){var z,x;const O=u.message.parts.find(oe=>oe.type==="dynamic-tool"&&oe.toolCallId===f.toolCallId),A=f,C=O;O!=null?(O.state=f.state,C.toolName=f.toolName,C.input=A.input,C.output=A.output,C.errorText=A.errorText,C.rawInput=(z=A.rawInput)!=null?z:C.rawInput,C.preliminary=A.preliminary,f.title!==void 0&&(C.title=f.title),C.providerExecuted=(x=A.providerExecuted)!=null?x:O.providerExecuted,A.providerMetadata!=null&&(O.callProviderMetadata=A.providerMetadata)):u.message.parts.push({type:"dynamic-tool",toolName:f.toolName,toolCallId:f.toolCallId,state:f.state,input:A.input,output:A.output,errorText:A.errorText,preliminary:A.preliminary,providerExecuted:A.providerExecuted,title:f.title,...A.providerMetadata!=null?{callProviderMetadata:A.providerMetadata}:{}})}async function b(f){if(f!=null){const z=u.message.metadata!=null?as(u.message.metadata,f):f;t!=null&&await ba({value:z,schema:t,context:{field:"message.metadata",entityId:u.message.id}}),u.message.metadata=z}}switch(s.type){case"text-start":{const f={type:"text",text:"",providerMetadata:s.providerMetadata,state:"streaming"};u.activeTextParts[s.id]=f,u.message.parts.push(f),l();break}case"text-delta":{const f=u.activeTextParts[s.id];if(f==null)throw new ft({chunkType:"text-delta",chunkId:s.id,message:`Received text-delta for missing text part with ID "${s.id}". Ensure a "text-start" chunk is sent before any "text-delta" chunks.`});f.text+=s.delta,f.providerMetadata=(d=s.providerMetadata)!=null?d:f.providerMetadata,l();break}case"text-end":{const f=u.activeTextParts[s.id];if(f==null)throw new ft({chunkType:"text-end",chunkId:s.id,message:`Received text-end for missing text part with ID "${s.id}". Ensure a "text-start" chunk is sent before any "text-end" chunks.`});f.state="done",f.providerMetadata=(m=s.providerMetadata)!=null?m:f.providerMetadata,delete u.activeTextParts[s.id],l();break}case"reasoning-start":{const f={type:"reasoning",text:"",providerMetadata:s.providerMetadata,state:"streaming"};u.activeReasoningParts[s.id]=f,u.message.parts.push(f),l();break}case"reasoning-delta":{const f=u.activeReasoningParts[s.id];if(f==null)throw new ft({chunkType:"reasoning-delta",chunkId:s.id,message:`Received reasoning-delta for missing reasoning part with ID "${s.id}". Ensure a "reasoning-start" chunk is sent before any "reasoning-delta" chunks.`});f.text+=s.delta,f.providerMetadata=(y=s.providerMetadata)!=null?y:f.providerMetadata,l();break}case"reasoning-end":{const f=u.activeReasoningParts[s.id];if(f==null)throw new ft({chunkType:"reasoning-end",chunkId:s.id,message:`Received reasoning-end for missing reasoning part with ID "${s.id}". Ensure a "reasoning-start" chunk is sent before any "reasoning-end" chunks.`});f.providerMetadata=(w=s.providerMetadata)!=null?w:f.providerMetadata,f.state="done",delete u.activeReasoningParts[s.id],l();break}case"file":{u.message.parts.push({type:"file",mediaType:s.mediaType,url:s.url}),l();break}case"source-url":{u.message.parts.push({type:"source-url",sourceId:s.sourceId,url:s.url,title:s.title,providerMetadata:s.providerMetadata}),l();break}case"source-document":{u.message.parts.push({type:"source-document",sourceId:s.sourceId,mediaType:s.mediaType,title:s.title,filename:s.filename,providerMetadata:s.providerMetadata}),l();break}case"tool-input-start":{const f=u.message.parts.filter(Kr);u.partialToolCalls[s.toolCallId]={text:"",toolName:s.toolName,index:f.length,dynamic:s.dynamic,title:s.title},s.dynamic?g({toolCallId:s.toolCallId,toolName:s.toolName,state:"input-streaming",input:void 0,providerExecuted:s.providerExecuted,title:s.title,providerMetadata:s.providerMetadata}):p({toolCallId:s.toolCallId,toolName:s.toolName,state:"input-streaming",input:void 0,providerExecuted:s.providerExecuted,title:s.title,providerMetadata:s.providerMetadata}),l();break}case"tool-input-delta":{const f=u.partialToolCalls[s.toolCallId];if(f==null)throw new ft({chunkType:"tool-input-delta",chunkId:s.toolCallId,message:`Received tool-input-delta for missing tool call with ID "${s.toolCallId}". Ensure a "tool-input-start" chunk is sent before any "tool-input-delta" chunks.`});f.text+=s.inputTextDelta;const{value:z}=await Mt(f.text);f.dynamic?g({toolCallId:s.toolCallId,toolName:f.toolName,state:"input-streaming",input:z,title:f.title}):p({toolCallId:s.toolCallId,toolName:f.toolName,state:"input-streaming",input:z,title:f.title}),l();break}case"tool-input-available":{s.dynamic?g({toolCallId:s.toolCallId,toolName:s.toolName,state:"input-available",input:s.input,providerExecuted:s.providerExecuted,providerMetadata:s.providerMetadata,title:s.title}):p({toolCallId:s.toolCallId,toolName:s.toolName,state:"input-available",input:s.input,providerExecuted:s.providerExecuted,providerMetadata:s.providerMetadata,title:s.title}),l(),o&&!s.providerExecuted&&await o({toolCall:s});break}case"tool-input-error":{s.dynamic?g({toolCallId:s.toolCallId,toolName:s.toolName,state:"output-error",input:s.input,errorText:s.errorText,providerExecuted:s.providerExecuted,providerMetadata:s.providerMetadata}):p({toolCallId:s.toolCallId,toolName:s.toolName,state:"output-error",input:void 0,rawInput:s.input,errorText:s.errorText,providerExecuted:s.providerExecuted,providerMetadata:s.providerMetadata}),l();break}case"tool-approval-request":{const f=v(s.toolCallId);f.state="approval-requested",f.approval={id:s.approvalId},l();break}case"tool-output-denied":{const f=v(s.toolCallId);f.state="output-denied",l();break}case"tool-output-available":{const f=v(s.toolCallId);f.type==="dynamic-tool"?g({toolCallId:s.toolCallId,toolName:f.toolName,state:"output-available",input:f.input,output:s.output,preliminary:s.preliminary,providerExecuted:s.providerExecuted,title:f.title}):p({toolCallId:s.toolCallId,toolName:Ea(f),state:"output-available",input:f.input,output:s.output,providerExecuted:s.providerExecuted,preliminary:s.preliminary,title:f.title}),l();break}case"tool-output-error":{const f=v(s.toolCallId);f.type==="dynamic-tool"?g({toolCallId:s.toolCallId,toolName:f.toolName,state:"output-error",input:f.input,errorText:s.errorText,providerExecuted:s.providerExecuted,title:f.title}):p({toolCallId:s.toolCallId,toolName:Ea(f),state:"output-error",input:f.input,rawInput:f.rawInput,errorText:s.errorText,providerExecuted:s.providerExecuted,title:f.title}),l();break}case"start-step":{u.message.parts.push({type:"step-start"});break}case"finish-step":{u.activeTextParts={},u.activeReasoningParts={};break}case"start":{s.messageId!=null&&(u.message.id=s.messageId),await b(s.messageMetadata),(s.messageId!=null||s.messageMetadata!=null)&&l();break}case"finish":{s.finishReason!=null&&(u.finishReason=s.finishReason),await b(s.messageMetadata),s.messageMetadata!=null&&l();break}case"message-metadata":{await b(s.messageMetadata),s.messageMetadata!=null&&l();break}case"error":{a==null||a(new Error(s.errorText));break}default:if($p(s)){if((r==null?void 0:r[s.type])!=null){const x=u.message.parts.findIndex(A=>"id"in A&&"data"in A&&A.id===s.id&&A.type===s.type),O=x>=0?x:u.message.parts.length;await ba({value:s.data,schema:r[s.type],context:{field:`message.parts[${O}].data`,entityName:s.type,entityId:s.id}})}const f=s;if(f.transient){i==null||i(f);break}const z=f.id!=null?u.message.parts.find(x=>f.type===x.type&&f.id===x.id):void 0;z!=null?z.data=f.data:u.message.parts.push(f),i==null||i(f),l()}}c.enqueue(s)})}}))}async function Dp({stream:e,onError:t}){const r=e.getReader();try{for(;;){const{done:n}=await r.read();if(n)break}}catch(n){t==null||t(n)}finally{r.releaseLock()}}jt({prefix:"aitxt",size:24});jt({prefix:"aiobj",size:24});var Lp=class{constructor(){this.queue=[],this.isProcessing=!1}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.queue.length>0;)await this.queue[0](),this.queue.shift();this.isProcessing=!1}}async run(e){return new Promise((t,r)=>{this.queue.push(async()=>{try{await e(),t()}catch(n){r(n)}}),this.processQueue()})}};jt({prefix:"aiobj",size:24});async function Up(e){if(e==null)return[];if(!globalThis.FileList||!(e instanceof globalThis.FileList))throw new Error("FileList is not supported in the current environment");return Promise.all(Array.from(e).map(async t=>{const{name:r,type:n}=t,a=await new Promise((o,i)=>{const s=new FileReader;s.onload=c=>{var u;o((u=c.target)==null?void 0:u.result)},s.onerror=c=>i(c),s.readAsDataURL(t)});return{type:"file",mediaType:n,filename:r,url:a}}))}var Fp=class{constructor({api:e="/api/chat",credentials:t,headers:r,body:n,fetch:a,prepareSendMessagesRequest:o,prepareReconnectToStreamRequest:i}){this.api=e,this.credentials=t,this.headers=r,this.body=n,this.fetch=a,this.prepareSendMessagesRequest=o,this.prepareReconnectToStreamRequest=i}async sendMessages({abortSignal:e,...t}){var r,n,a,o,i;const s=await Be(this.body),c=await Be(this.headers),u=await Be(this.credentials),l={...nt(c),...nt(t.headers)},d=await((r=this.prepareSendMessagesRequest)==null?void 0:r.call(this,{api:this.api,id:t.chatId,messages:t.messages,body:{...s,...t.body},headers:l,credentials:u,requestMetadata:t.metadata,trigger:t.trigger,messageId:t.messageId})),m=(n=d==null?void 0:d.api)!=null?n:this.api,y=(d==null?void 0:d.headers)!==void 0?nt(d.headers):l,w=(d==null?void 0:d.body)!==void 0?d.body:{...s,...t.body,id:t.chatId,messages:t.messages,trigger:t.trigger,messageId:t.messageId},v=(a=d==null?void 0:d.credentials)!=null?a:u,g=await((o=this.fetch)!=null?o:globalThis.fetch)(m,{method:"POST",headers:va({"Content-Type":"application/json",...y},`ai-sdk/${wa}`,ha()),body:JSON.stringify(w),credentials:v,signal:e});if(!g.ok)throw new Error((i=await g.text())!=null?i:"Failed to fetch the chat response.");if(!g.body)throw new Error("The response body is empty.");return this.processResponseStream(g.body)}async reconnectToStream(e){var t,r,n,a,o;const i=await Be(this.body),s=await Be(this.headers),c=await Be(this.credentials),u={...nt(s),...nt(e.headers)},l=await((t=this.prepareReconnectToStreamRequest)==null?void 0:t.call(this,{api:this.api,id:e.chatId,body:{...i,...e.body},headers:u,credentials:c,requestMetadata:e.metadata})),d=(r=l==null?void 0:l.api)!=null?r:`${this.api}/${e.chatId}/stream`,m=(l==null?void 0:l.headers)!==void 0?nt(l.headers):u,y=(n=l==null?void 0:l.credentials)!=null?n:c,v=await((a=this.fetch)!=null?a:globalThis.fetch)(d,{method:"GET",headers:va(m,`ai-sdk/${wa}`,ha()),credentials:y});if(v.status===204)return null;if(!v.ok)throw new Error((o=await v.text())!=null?o:"Failed to fetch the chat response.");if(!v.body)throw new Error("The response body is empty.");return this.processResponseStream(v.body)}},os=class extends Fp{constructor(e={}){super(e)}processResponseStream(e){return fp({stream:e,schema:Rp}).pipeThrough(new TransformStream({async transform(t,r){if(!t.success)throw t.error;r.enqueue(t.value)}}))}},Jp=class{constructor({generateId:e=hf,id:t=e(),transport:r=new os,messageMetadataSchema:n,dataPartSchemas:a,state:o,onError:i,onToolCall:s,onFinish:c,onData:u,sendAutomaticallyWhen:l}){this.activeResponse=void 0,this.jobExecutor=new Lp,this.sendMessage=async(d,m)=>{var y,w,v,p;if(d==null){await this.makeRequest({trigger:"submit-message",messageId:(y=this.lastMessage)==null?void 0:y.id,...m});return}let g;if("text"in d||"files"in d?g={parts:[...Array.isArray(d.files)?d.files:await Up(d.files),..."text"in d&&d.text!=null?[{type:"text",text:d.text}]:[]]}:g=d,d.messageId!=null){const b=this.state.messages.findIndex(f=>f.id===d.messageId);if(b===-1)throw new Error(`message with id ${d.messageId} not found`);if(this.state.messages[b].role!=="user")throw new Error(`message with id ${d.messageId} is not a user message`);this.state.messages=this.state.messages.slice(0,b+1),this.state.replaceMessage(b,{...g,id:d.messageId,role:(w=g.role)!=null?w:"user",metadata:d.metadata})}else this.state.pushMessage({...g,id:(v=g.id)!=null?v:this.generateId(),role:(p=g.role)!=null?p:"user",metadata:d.metadata});await this.makeRequest({trigger:"submit-message",messageId:d.messageId,...m})},this.regenerate=async({messageId:d,...m}={})=>{const y=d==null?this.state.messages.length-1:this.state.messages.findIndex(w=>w.id===d);if(y===-1)throw new Error(`message ${d} not found`);this.state.messages=this.state.messages.slice(0,this.messages[y].role==="assistant"?y:y+1),await this.makeRequest({trigger:"regenerate-message",messageId:d,...m})},this.resumeStream=async(d={})=>{await this.makeRequest({trigger:"resume-stream",...d})},this.clearError=()=>{this.status==="error"&&(this.state.error=void 0,this.setStatus({status:"ready"}))},this.addToolApprovalResponse=async({id:d,approved:m,reason:y})=>this.jobExecutor.run(async()=>{const w=this.state.messages,v=w[w.length-1],p=g=>Xr(g)&&g.state==="approval-requested"&&g.approval.id===d?{...g,state:"approval-responded",approval:{id:d,approved:m,reason:y}}:g;this.state.replaceMessage(w.length-1,{...v,parts:v.parts.map(p)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(p)),this.status!=="streaming"&&this.status!=="submitted"&&this.sendAutomaticallyWhen&&this.shouldSendAutomatically().then(g=>{var b;g&&this.makeRequest({trigger:"submit-message",messageId:(b=this.lastMessage)==null?void 0:b.id})})}),this.addToolOutput=async({state:d="output-available",tool:m,toolCallId:y,output:w,errorText:v})=>this.jobExecutor.run(async()=>{const p=this.state.messages,g=p[p.length-1],b=f=>Xr(f)&&f.toolCallId===y?{...f,state:d,output:w,errorText:v}:f;this.state.replaceMessage(p.length-1,{...g,parts:g.parts.map(b)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(b)),this.status!=="streaming"&&this.status!=="submitted"&&this.sendAutomaticallyWhen&&this.shouldSendAutomatically().then(f=>{var z;f&&this.makeRequest({trigger:"submit-message",messageId:(z=this.lastMessage)==null?void 0:z.id})})}),this.addToolResult=this.addToolOutput,this.stop=async()=>{var d;this.status!=="streaming"&&this.status!=="submitted"||(d=this.activeResponse)!=null&&d.abortController&&this.activeResponse.abortController.abort()},this.id=t,this.transport=r,this.generateId=e,this.messageMetadataSchema=n,this.dataPartSchemas=a,this.state=o,this.onError=i,this.onToolCall=s,this.onFinish=c,this.onData=u,this.sendAutomaticallyWhen=l}get status(){return this.state.status}setStatus({status:e,error:t}){this.status!==e&&(this.state.status=e,this.state.error=t)}get error(){return this.state.error}get messages(){return this.state.messages}get lastMessage(){return this.state.messages[this.state.messages.length-1]}set messages(e){this.state.messages=e}async shouldSendAutomatically(){if(!this.sendAutomaticallyWhen)return!1;const e=this.sendAutomaticallyWhen({messages:this.state.messages});return e&&typeof e=="object"&&"then"in e?await e:e}async makeRequest({trigger:e,metadata:t,headers:r,body:n,messageId:a}){var o,i,s;this.setStatus({status:"submitted",error:void 0});const c=this.lastMessage;let u=!1,l=!1,d=!1;try{const m={state:jp({lastMessage:this.state.snapshot(c),messageId:this.generateId()}),abortController:new AbortController};m.abortController.signal.addEventListener("abort",()=>{u=!0}),this.activeResponse=m;let y;if(e==="resume-stream"){const v=await this.transport.reconnectToStream({chatId:this.id,metadata:t,headers:r,body:n});if(v==null){this.setStatus({status:"ready"});return}y=v}else y=await this.transport.sendMessages({chatId:this.id,messages:this.state.messages,abortSignal:m.abortController.signal,metadata:t,headers:r,body:n,trigger:e,messageId:a});const w=v=>this.jobExecutor.run(()=>v({state:m.state,write:()=>{var p;this.setStatus({status:"streaming"}),m.state.message.id===((p=this.lastMessage)==null?void 0:p.id)?this.state.replaceMessage(this.state.messages.length-1,m.state.message):this.state.pushMessage(m.state.message)}}));await Dp({stream:Mp({stream:y,onToolCall:this.onToolCall,onData:this.onData,messageMetadataSchema:this.messageMetadataSchema,dataPartSchemas:this.dataPartSchemas,runUpdateMessageJob:w,onError:v=>{throw v}}),onError:v=>{throw v}}),this.setStatus({status:"ready"})}catch(m){if(u||m.name==="AbortError")return u=!0,this.setStatus({status:"ready"}),null;d=!0,m instanceof TypeError&&(m.message.toLowerCase().includes("fetch")||m.message.toLowerCase().includes("network"))&&(l=!0),this.onError&&m instanceof Error&&this.onError(m),this.setStatus({status:"error",error:m})}finally{try{(i=this.onFinish)==null||i.call(this,{message:this.activeResponse.state.message,messages:this.state.messages,isAbort:u,isDisconnect:l,isError:d,finishReason:(o=this.activeResponse)==null?void 0:o.state.finishReason})}catch(m){console.error(m)}this.activeResponse=void 0}!d&&await this.shouldSendAutomatically()&&await this.makeRequest({trigger:"submit-message",messageId:(s=this.lastMessage)==null?void 0:s.id,metadata:t,headers:r,body:n})}};class Vp extends Jp{constructor(t){super({...t,state:new Bp(t.messages)})}}var gt,$t,Ct;class Bp{constructor(t=[]){Vt(this,gt);Vt(this,$t,re("ready"));Vt(this,Ct,re(void 0));dt(this,"setMessages",t=>{this.messages=t});dt(this,"pushMessage",t=>{this.messages.push(t)});dt(this,"popMessage",()=>{this.messages.pop()});dt(this,"replaceMessage",(t,r)=>{this.messages[t]=r});dt(this,"snapshot",t=>li(t));zn(this,gt,re(rt(t)))}get messages(){return _(et(this,gt))}set messages(t){$(et(this,gt),t,!0)}get status(){return _(et(this,$t))}set status(t){$(et(this,$t),t,!0)}get error(){return _(et(this,Ct))}set error(t){$(et(this,Ct),t,!0)}}gt=new WeakMap,$t=new WeakMap,Ct=new WeakMap;var qp=M("<span></span>"),Gp=M('<span class="font-mono"> </span>'),Wp=M('<span class="text-secondary"> </span>'),Yp=M("<span><!> <!></span>");function qe(e,t){wt(t,!0);let r=ze(t,"variant",3,"dots"),n=ze(t,"size",3,"md");const a={sm:"text-sm",md:"text-base",lg:"text-lg"},o=["â ","â ","â ¹","â ¸","â ¼","â ´","â ¦","â §","â ","â "],i=["â","â","â","â"];let s=re(0),c;Ht(()=>{const p=r()==="pulse"?i:o,g=r()==="pulse"?200:80;return c=setInterval(()=>{$(s,(_(s)+1)%p.length)},g),()=>clearInterval(c)});const u=Ge(()=>r()==="pulse"?i[_(s)]:o[_(s)]);var l=Yp(),d=k(l);{var m=p=>{var g=qp();let b,f;q(()=>{b=Ne(g,1,"inline-block animate-spin rounded-full border-2 border-current border-t-transparent",null,b,{"w-4":n()==="sm","h-4":n()==="sm","w-5":n()==="md","h-5":n()==="md","w-6":n()==="lg","h-6":n()==="lg"}),f=Jr(g,"",f,{color:t.color||"var(--agent-thinking)"})}),T(p,g)},y=p=>{var g=Gp();let b;var f=k(g,!0);I(g),q(()=>{b=Jr(g,"",b,{color:t.color||"var(--agent-thinking)"}),J(f,_(u))}),T(p,g)};F(d,p=>{r()==="ring"?p(m):p(y,!1)})}var w=Z(d,2);{var v=p=>{var g=Wp(),b=k(g,!0);I(g),q(()=>J(b,t.label)),T(p,g)};F(w,p=>{t.label&&p(v)})}I(l),q(()=>Ne(l,1,`inline-flex items-center gap-2 ${a[n()]??""}`)),T(e,l),Et()}var Hp=M("<span><!></span>");function Ae(e,t){let r=ze(t,"variant",3,"default");const n={default:"badge-default",success:"badge-success",warning:"badge-warning",error:"badge-error",info:"badge-info",accent:"badge-accent"};var a=Hp(),o=k(a);Ur(o,()=>t.children),I(a),q(()=>Ne(a,1,`badge ${n[r()]??""}`)),T(e,a)}var Kp=M('<span class="text-tertiary text-sm"> </span>'),Xp=M('<div class="panel-content animate-slide-in-up"><!></div>'),Qp=M('<div class="panel mb-2"><button class="panel-header w-full flex items-center justify-between rounded-t-md"><div class="flex items-center gap-2"><span>â¶</span> <span class="text-primary font-medium"> </span> <!></div> <!></button> <!></div>');function dn(e,t){wt(t,!0);let r=ze(t,"isOpen",3,!1);function n(){var b;(b=t.ontoggle)==null||b.call(t)}function a(b){(b.key==="Enter"||b.key===" ")&&(b.preventDefault(),n())}var o=Qp(),i=k(o);i.__click=n,i.__keydown=a;var s=k(i),c=k(s);let u;var l=Z(c,2),d=k(l,!0);I(l);var m=Z(l,2);{var y=b=>{var f=Ce(),z=fe(f);Ur(z,()=>t.badge),T(b,f)};F(m,b=>{t.badge&&b(y)})}I(s);var w=Z(s,2);{var v=b=>{var f=Kp(),z=k(f);I(f),q(()=>J(z,`[${t.shortcut??""}]`)),T(b,f)};F(w,b=>{t.shortcut&&b(v)})}I(i);var p=Z(i,2);{var g=b=>{var f=Xp(),z=k(f);Ur(z,()=>t.children),I(f),T(b,f)};F(p,b=>{r()&&b(g)})}I(o),q(()=>{Vr(i,"aria-expanded",r()),u=Ne(c,1,"text-tertiary transition-transform",null,u,{"rotate-90":r()}),J(d,t.title)}),T(e,o),Et()}or(["click","keydown"]);var em=M('<span class="text-accent text-sm">current</span>'),tm=M('<button><div class="flex items-center justify-between"><span class="font-medium text-primary"> </span> <!></div> <p class="text-sm text-secondary mt-1"> </p> <p class="text-xs text-tertiary mt-1 font-mono"> </p></button>'),rm=M('<button class="fixed inset-0 bg-black/50 z-40" aria-label="Close model picker"></button> <div class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 w-96 bg-secondary border border-default rounded-lg shadow-xl animate-slide-in-up outline-none" role="dialog" aria-modal="true" aria-label="Select model" tabindex="-1"><div class="p-4 border-b border-muted"><div class="flex items-center justify-between"><h2 class="text-lg font-semibold text-primary">Select Model</h2> <span class="text-xs text-tertiary font-mono"> </span></div> <p class="text-sm text-tertiary mt-1">Use arrow keys and Enter, or click to select</p></div> <div class="p-2 max-h-80 overflow-y-auto"></div> <div class="p-3 border-t border-muted text-xs text-tertiary flex justify-between"><span>[ââ] navigate</span> <span>[Enter] select</span> <span>[Esc] close</span></div></div>',1);function nm(e,t){wt(t,!0);let r=ze(t,"isOpen",3,!1),n=ze(t,"currentModel",3,"meta.llama-3.3-70b-instruct"),a=ze(t,"region",3,"unknown");const o=[{id:"google.gemini-2.5-pro",name:"Gemini 2.5 Pro",description:"Most capable Gemini model"},{id:"google.gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"Fast and efficient Gemini"},{id:"google.gemini-2.5-flash-lite",name:"Gemini 2.5 Flash-Lite",description:"Lightweight Gemini for cost efficiency"},{id:"meta.llama-4-maverick",name:"Llama 4 Maverick",description:"Flagship Llama 4 (17B active / 400B total)"},{id:"meta.llama-4-scout",name:"Llama 4 Scout",description:"Efficient Llama 4 (17B active / 109B total)"},{id:"meta.llama-3.3-70b-instruct",name:"Llama 3.3 70B",description:"Fast, capable general-purpose model"},{id:"meta.llama-3.2-90b-vision-instruct",name:"Llama 3.2 90B Vision",description:"Multimodal with image understanding"},{id:"meta.llama-3.2-11b-vision-instruct",name:"Llama 3.2 11B Vision",description:"Lightweight multimodal model"},{id:"meta.llama-3.1-405b-instruct",name:"Llama 3.1 405B",description:"Most capable Llama 3, best quality"},{id:"cohere.command-a-03-2025",name:"Command A",description:"Latest Cohere with tool use, 256K context"},{id:"cohere.command-a-reasoning",name:"Command A Reasoning",description:"Optimized for complex reasoning tasks"},{id:"cohere.command-a-vision",name:"Command A Vision",description:"Multimodal Command with vision"},{id:"cohere.command-r-plus-08-2024",name:"Command R+ (08-2024)",description:"Advanced RAG optimization"},{id:"cohere.command-r-08-2024",name:"Command R (08-2024)",description:"Fast and efficient"},{id:"xai.grok-4",name:"Grok 4",description:"Latest flagship Grok model"},{id:"xai.grok-4-fast",name:"Grok 4 Fast",description:"Optimized Grok 4 for speed"},{id:"xai.grok-4.1-fast",name:"Grok 4.1 Fast",description:"Updated fast Grok model"},{id:"xai.grok-3",name:"Grok 3",description:"Capable reasoning model"},{id:"xai.grok-3-mini",name:"Grok 3 Mini",description:"Efficient smaller Grok"},{id:"xai.grok-code-fast-1",name:"Grok Code Fast",description:"Optimized for code generation"}],i=Ge(()=>t.models&&t.models.length>0?t.models:o);let s=re(0);function c(w){var v,p,g;if(r())switch(w.key){case"ArrowUp":w.preventDefault(),$(s,Math.max(0,_(s)-1),!0);break;case"ArrowDown":w.preventDefault(),$(s,Math.min(_(i).length-1,_(s)+1),!0);break;case"Enter":w.preventDefault(),(v=t.onselect)==null||v.call(t,_(i)[_(s)].id),(p=t.onclose)==null||p.call(t);break;case"Escape":w.preventDefault(),(g=t.onclose)==null||g.call(t);break}}function u(w){var v,p;(v=t.onselect)==null||v.call(t,w),(p=t.onclose)==null||p.call(t)}let l;Ht(()=>{r()&&($(s,_(i).findIndex(w=>w.id===n()),!0),_(s)===-1&&$(s,0),setTimeout(()=>l==null?void 0:l.focus(),0))});var d=Ce(),m=fe(d);{var y=w=>{var v=rm(),p=fe(v);p.__click=function(...A){var C;(C=t.onclose)==null||C.apply(this,A)},p.__keydown=A=>{var C;return A.key==="Escape"&&((C=t.onclose)==null?void 0:C.call(t))};var g=Z(p,2);g.__keydown=c;var b=k(g),f=k(b),z=Z(k(f),2),x=k(z,!0);I(z),I(f),de(2),I(b);var O=Z(b,2);at(O,23,()=>_(i),A=>A.id,(A,C,oe)=>{var Q=tm();Q.__click=()=>u(_(C).id);var me=k(Q),he=k(me),Oe=k(he,!0);I(he);var Te=Z(he,2);{var je=Ee=>{var Fe=em();T(Ee,Fe)};F(Te,Ee=>{_(C).id===n()&&Ee(je)})}I(me);var U=Z(me,2),se=k(U,!0);I(U);var pe=Z(U,2),le=k(pe,!0);I(pe),I(Q),q(()=>{Ne(Q,1,`w-full text-left p-3 rounded-lg transition-fast ${_(oe)===_(s)?"bg-elevated border border-focused":"hover:bg-hover border border-transparent"}`),J(Oe,_(C).name),J(se,_(C).description),J(le,_(C).id)}),T(A,Q)}),I(O),de(2),I(g),ui(g,A=>l=A,()=>l),q(()=>J(x,a())),T(w,v)};F(m,w=>{r()&&w(y)})}T(e,d),Et()}or(["click","keydown"]);var am=M('<p class="text-secondary text-sm whitespace-pre-wrap"> </p>'),om=M('<p class="text-tertiary text-sm italic"> </p>'),sm=M('<div class="max-h-40 overflow-y-auto"><!></div>');function im(e,t){let r=ze(t,"isOpen",3,!1),n=ze(t,"isThinking",3,!1);dn(e,{title:"Thought",get isOpen(){return r()},shortcut:"t",get ontoggle(){return t.ontoggle},badge:o=>{var i=Ce(),s=fe(i);{var c=u=>{qe(u,{variant:"pulse",size:"sm"})};F(s,u=>{n()&&u(c)})}T(o,i)},children:(o,i)=>{var s=sm(),c=k(s);{var u=d=>{var m=am(),y=k(m,!0);I(m),q(()=>J(y,t.thought)),T(d,m)},l=d=>{var m=om(),y=k(m,!0);I(m),q(()=>J(y,n()?"Thinking...":"No active thought")),T(d,m)};F(c,d=>{t.thought?d(u):d(l,!1)})}I(s),T(o,s)},$$slots:{badge:!0,default:!0}})}var um=M('<div class="flex gap-2 animate-slide-in-up"><span class="text-accent font-medium"> </span> <span class="text-secondary text-sm"> </span></div>'),cm=M('<p class="text-tertiary text-sm italic">No reasoning steps yet</p>'),lm=M('<div class="max-h-60 overflow-y-auto space-y-2"><!></div>');function dm(e,t){wt(t,!0);let r=ze(t,"isOpen",3,!1),n=ze(t,"steps",19,()=>[]);dn(e,{title:"Reasoning",get isOpen(){return r()},shortcut:"r",get ontoggle(){return t.ontoggle},badge:o=>{var i=Ce(),s=fe(i);{var c=u=>{Ae(u,{variant:"info",children:(l,d)=>{de();var m=Ie();q(()=>J(m,n().length)),T(l,m)},$$slots:{default:!0}})};F(s,u=>{n().length>0&&u(c)})}T(o,i)},children:(o,i)=>{var s=lm(),c=k(s);{var u=d=>{var m=Ce(),y=fe(m);at(y,19,n,w=>w.id,(w,v,p)=>{var g=um(),b=k(g),f=k(b);I(b);var z=Z(b,2),x=k(z,!0);I(z),I(g),q(()=>{J(f,`${_(p)+1}.`),J(x,_(v).content)}),T(w,g)}),T(d,m)},l=d=>{var m=cm();T(d,m)};F(c,d=>{n().length>0?d(u):d(l,!1)})}I(s),T(o,s)},$$slots:{badge:!0,default:!0}}),Et()}var fm=M("<!> <!>",1),pm=M('<div class="flex items-center gap-1"><!></div>'),mm=M('<div class="flex gap-2"><span class="text-secondary"> </span> <span class="text-primary truncate"> </span></div>'),hm=M('<div><div class="flex items-center gap-2 mb-2"><span> </span> <!></div> <p class="text-primary font-medium mb-2"> </p> <div class="bg-tertiary p-2 rounded text-sm mb-3 max-h-32 overflow-y-auto"><p class="text-tertiary mb-1">Arguments:</p> <!></div> <div class="flex gap-3"><button class="btn btn-success text-sm">â Approve (y)</button> <button class="btn btn-danger text-sm">â Reject (n)</button></div></div>'),vm=M('<span class="text-tertiary text-xs"> </span>'),gm=M('<div class="flex items-center gap-2 text-sm"><span><!></span> <span class="text-secondary"> </span> <!></div>'),_m=M('<p class="text-tertiary text-sm italic">No tool executions</p>'),ym=M('<div class="space-y-3"><!> <div class="max-h-40 overflow-y-auto space-y-1"><!></div></div>');function bm(e,t){wt(t,!0);let r=ze(t,"isOpen",3,!1),n=ze(t,"tools",19,()=>[]);const a=Ge(()=>n().filter(c=>c.status==="running").length),o={pending:"text-tertiary",awaiting_approval:"text-warning",running:"text-executing",completed:"text-success",error:"text-error"},i={pending:"â",awaiting_approval:"?",running:"â",completed:"â",error:"â"};function s(c){const u=c.toLowerCase();return u.startsWith("delete")||u.startsWith("terminate")||u.startsWith("stop")}dn(e,{title:"Tools",get isOpen(){return r()},shortcut:"o",get ontoggle(){return t.ontoggle},badge:u=>{var l=pm(),d=k(l);{var m=w=>{var v=fm(),p=fe(v);qe(p,{size:"sm"});var g=Z(p,2);Ae(g,{variant:"info",children:(b,f)=>{de();var z=Ie();q(()=>J(z,_(a))),T(b,z)},$$slots:{default:!0}}),T(w,v)},y=w=>{var v=Ce(),p=fe(v);{var g=b=>{Ae(b,{variant:"default",children:(f,z)=>{de();var x=Ie();q(()=>J(x,n().length)),T(f,x)},$$slots:{default:!0}})};F(p,b=>{n().length>0&&b(g)},!0)}T(w,v)};F(d,w=>{_(a)>0?w(m):w(y,!1)})}I(l),T(u,l)},children:(u,l)=>{var d=ym(),m=k(d);{var y=b=>{var f=hm();let z;var x=k(f),O=k(x),A=k(O,!0);I(O);var C=Z(O,2);{let U=Ge(()=>s(t.pendingApproval.name)?"error":"warning");Ae(C,{get variant(){return _(U)},children:(se,pe)=>{de();var le=Ie("Approval Required");T(se,le)},$$slots:{default:!0}})}I(x);var oe=Z(x,2),Q=k(oe,!0);I(oe);var me=Z(oe,2),he=Z(k(me),2);at(he,17,()=>Object.entries(t.pendingApproval.args),Dr,(U,se)=>{var pe=Ge(()=>oi(_(se),2));let le=()=>_(pe)[0],Ee=()=>_(pe)[1];var Fe=mm(),it=k(Fe),dr=k(it);I(it);var St=Z(it,2),ut=k(St,!0);I(St),I(Fe),q(Dt=>{J(dr,`${le()??""}:`),J(ut,Dt)},[()=>typeof Ee()=="string"?Ee():JSON.stringify(Ee())]),T(U,Fe)}),I(me);var Oe=Z(me,2),Te=k(Oe);Te.__click=()=>{var U;return(U=t.onapprove)==null?void 0:U.call(t,t.pendingApproval.id)};var je=Z(Te,2);je.__click=()=>{var U;return(U=t.onreject)==null?void 0:U.call(t,t.pendingApproval.id)},I(Oe),I(f),q((U,se,pe)=>{z=Ne(f,1,"tool-approval animate-slide-in-up",null,z,U),Ne(O,1,se),J(A,pe),J(Q,t.pendingApproval.name)},[()=>({danger:s(t.pendingApproval.name)}),()=>Fr(s(t.pendingApproval.name)?"text-error":"text-warning"),()=>s(t.pendingApproval.name)?"â  DANGER":"? Confirm"]),T(b,f)};F(m,b=>{t.pendingApproval&&b(y)})}var w=Z(m,2),v=k(w);{var p=b=>{var f=Ce(),z=fe(f);at(z,17,n,x=>x.id,(x,O)=>{var A=gm(),C=k(A),oe=k(C);{var Q=U=>{qe(U,{size:"sm"})},me=U=>{var se=Ie();q(()=>J(se,i[_(O).status])),T(U,se)};F(oe,U=>{_(O).status==="running"?U(Q):U(me,!1)})}I(C);var he=Z(C,2),Oe=k(he,!0);I(he);var Te=Z(he,2);{var je=U=>{var se=vm(),pe=k(se);I(se),q(()=>J(pe,`${_(O).completedAt-_(O).startedAt}ms`)),T(U,se)};F(Te,U=>{_(O).completedAt&&_(O).startedAt&&U(je)})}I(A),q(()=>{Ne(C,1,Fr(o[_(O).status])),J(Oe,_(O).name)}),T(x,A)}),T(b,f)},g=b=>{var f=Ce(),z=fe(f);{var x=O=>{var A=_m();T(O,A)};F(z,O=>{t.pendingApproval||O(x)},!0)}T(b,f)};F(v,b=>{n().length>0?b(p):b(g,!1)})}I(w),I(d),T(u,d)},$$slots:{badge:!0,default:!0}}),Et()}or(["click"]);var wm=M('<span class="text-accent">â</span>'),Em=M('<button><div class="flex items-center justify-between"><span class="truncate text-primary"> </span> <!></div> <div class="flex items-center gap-2 mt-1"><!></div></button>'),Im=M('<aside class="w-64 border-r border-default bg-secondary flex-shrink-0 hidden lg:flex flex-col animate-slide-in-right"><div class="p-4 border-b border-muted"><div class="flex items-center gap-3"><div class="h-10 w-10 rounded-lg bg-accent flex items-center justify-center text-primary font-bold">â</div> <div><h1 class="font-bold text-lg text-primary">OCI GenAI</h1> <p class="text-xs text-tertiary">Agentic Chat</p></div></div></div> <div class="p-3"><button class="w-full btn btn-secondary">+ New Chat</button></div> <div class="flex-1 overflow-y-auto p-2 space-y-1"></div></aside>'),km=M('<!> <span class="text-thinking text-sm">Thinking</span>',1),Sm=M('<!> <span class="text-streaming text-sm">Streaming</span>',1),zm=M('<span class="text-tertiary">â</span> <span class="text-tertiary text-sm">Ready</span>',1),xm=M(`<div class="flex items-center justify-center h-full"><div class="text-center space-y-4"><div class="text-6xl text-accent animate-pulse-glow">â</div> <h2 class="text-xl font-semibold text-primary">OCI GenAI Agent</h2> <p class="text-secondary max-w-md">Manage your Oracle Cloud Infrastructure resources with natural language.
                Ask me to list instances, create VCNs, manage databases, and more.</p> <div class="flex flex-wrap justify-center gap-2 mt-4"><!> <!> <!> <!> <!></div></div></div>`),Om=M('<div class="whitespace-pre-wrap text-primary"> </div>'),Tm=M('<div class="message-tool mt-2 rounded px-3 py-2"><div class="flex items-center gap-2"><!> <span class="text-tertiary text-xs"> </span></div></div>'),Am=M('<span class="inline-block w-2 h-4 bg-streaming animate-typing-cursor ml-1"></span>'),Nm=M('<div><div><div class="flex items-center gap-2 mb-2"><span> </span> <!></div> <!> <!></div></div>'),Zm=M('<div class="flex justify-start"><div class="message-assistant rounded-lg px-4 py-3"><div class="flex items-center gap-2"><!> <span class="text-secondary">Thinking...</span></div></div></div>'),Pm=M("<!> <!>",1),Rm=M('<aside class="w-80 border-l border-default bg-secondary overflow-y-auto p-3 animate-slide-in-right"><!> <!> <!></aside>'),$m=M('<span class="text-warning">[y] approve [n] reject</span>'),Cm=M('<span class="text-accent"> </span>'),jm=M('<span class="text-secondary"> </span> <!>',1),Mm=M('<div class="flex h-screen bg-primary text-primary overflow-hidden"><button class="fixed top-4 left-4 z-50 lg:hidden btn btn-secondary" aria-label="Toggle sidebar">â°</button> <!> <main class="flex-1 flex overflow-hidden"><div class="flex-1 flex flex-col overflow-hidden"><header class="flex items-center justify-between p-4 border-b border-default bg-secondary"><div class="flex items-center gap-3"><span class="text-accent font-bold">â</span> <button class="hover:opacity-80 transition-fast cursor-pointer" title="Change model [m]"><!></button></div> <div class="flex items-center gap-4"><div class="flex items-center gap-2"><!></div> <button class="btn btn-secondary text-sm" aria-label="Toggle side panel"> </button></div></header> <div class="flex-1 overflow-y-auto p-4 space-y-4"><!></div> <form class="p-4 border-t border-default bg-secondary"><div class="flex gap-3"><input placeholder="Ask about OCI resources..." class="chat-input flex-1 px-4 py-3 rounded-lg"/> <button type="submit" class="btn btn-primary px-6"><!></button></div></form></div> <!></main></div> <!> <footer class="fixed bottom-0 left-0 right-0 h-6 bg-tertiary border-t border-muted px-4 flex items-center justify-between text-xs text-tertiary"><div class="flex items-center gap-4"><span>[t] thought</span> <span>[r] reasoning</span> <span>[o] tools</span> <span>[m] model</span> <!></div> <div class="flex items-center gap-4"><!> <span> </span></div></footer>',1);function Bm(e,t){wt(t,!0);let r=re(rt(t.data.sessions)),n=re(rt(t.data.currentSessionId)),a=re(!0),o=re(!0),i=re(""),s=re(!1),c=re(!1),u=re(!0),l=re("meta.llama-3.3-70b-instruct"),d=re(!1),m=re(rt([])),y=re("loading..."),w=re(rt({input:0,output:0,cost:0}));Ht(()=>{p()});let v=re(void 0);Ht(()=>{const E=x.status;_(v)==="streaming"&&E==="ready"&&(C(),A()),$(v,E,!0)});async function p(){try{const E=await fetch("/api/models"),{models:R,region:B}=await E.json();$(m,R,!0),$(y,B,!0)}catch(E){console.error("Failed to fetch models:",E),$(y,"unknown")}}let g=re(void 0),b=re(rt([])),f=re(rt([])),z=re(void 0);const x=new Vp({transport:new os({api:"/api/chat"})});async function O(E){if(E.preventDefault(),!_(i).trim())return;const R=x.messages.length===0;$(g,"Analyzing your request..."),x.sendMessage({text:_(i)}),$(i,""),setTimeout(()=>{$(g,void 0)},2e3),R&&setTimeout(async()=>{await A()},1e3)}async function A(){const E=await fetch("/api/sessions"),{sessions:R}=await E.json();$(r,R,!0)}async function C(){if(_(n))try{const E=await fetch(`/api/sessions/${_(n)}/continue`,{method:"POST"});if(!E.ok)return;const{usage:R}=await E.json();R&&$(w,{input:0,output:R.tokens,cost:R.cost},!0)}catch{}}async function oe(){const E=await fetch("/api/sessions",{method:"POST"}),{session:R}=await E.json();$(n,R.id,!0),$(r,[R,..._(r)],!0),x.messages=[],$(w,{input:0,output:0,cost:0},!0),$(g,void 0),$(b,[],!0),$(f,[],!0),$(z,void 0)}async function Q(E){const R=await fetch(`/api/sessions/${E}/continue`,{method:"POST"}),{session:B,messages:ie,usage:ue}=await R.json();$(n,B.id,!0),x.messages=ie.map((ee,V)=>({id:`msg-${V}`,role:ee.role,parts:[{type:"text",text:ee.content}]})),ue&&$(w,{input:0,output:ue.tokens,cost:ue.cost},!0),$(g,void 0),$(b,[],!0),$(f,[],!0),$(z,void 0)}function me(){$(a,!_(a))}function he(){$(o,!_(o))}function Oe(E){$(z,void 0)}function Te(E){$(z,void 0)}function je(E){var R,B,ie,ue;E.key==="t"&&!E.ctrlKey&&!E.metaKey&&((R=document.activeElement)==null?void 0:R.tagName)!=="INPUT"&&(E.preventDefault(),$(s,!_(s))),E.key==="r"&&!E.ctrlKey&&!E.metaKey&&((B=document.activeElement)==null?void 0:B.tagName)!=="INPUT"&&(E.preventDefault(),$(c,!_(c))),E.key==="o"&&!E.ctrlKey&&!E.metaKey&&((ie=document.activeElement)==null?void 0:ie.tagName)!=="INPUT"&&(E.preventDefault(),$(u,!_(u))),E.key==="m"&&!E.ctrlKey&&!E.metaKey&&((ue=document.activeElement)==null?void 0:ue.tagName)!=="INPUT"&&(E.preventDefault(),$(d,!_(d))),_(z)&&(E.key==="y"?Oe(_(z).id):E.key==="n"&&Te(_(z).id)),(E.ctrlKey||E.metaKey)&&E.key==="n"&&(E.preventDefault(),oe())}const U=Ge(()=>x.status==="submitted"||x.status==="streaming"),se=Ge(()=>x.status==="submitted"),pe=Ge(()=>x.status==="streaming");var le=Mm();An("keydown",si,je);var Ee=fe(le),Fe=k(Ee);Fe.__click=me;var it=Z(Fe,2);{var dr=E=>{var R=Im(),B=Z(k(R),2),ie=k(B);ie.__click=oe,I(B);var ue=Z(B,2);at(ue,21,()=>_(r),ee=>ee.id,(ee,V)=>{var ce=Em();ce.__click=()=>Q(_(V).id);var ge=k(ce),ae=k(ge),Me=k(ae,!0);I(ae);var ve=Z(ae,2);{var wr=Je=>{var Ft=wm();T(Je,Ft)};F(ve,Je=>{_(n)===_(V).id&&Je(wr)})}I(ge);var Ut=Z(ge,2),Er=k(Ut);Ae(Er,{variant:"default",children:(Je,Ft)=>{de();var Jt=Ie();q(Pe=>J(Jt,Pe),[()=>_(V).model.split(".").pop()]),T(Je,Jt)},$$slots:{default:!0}}),I(Ut),I(ce),q(()=>{Ne(ce,1,`w-full text-left px-3 py-2 text-sm rounded-lg transition-fast group ${_(n)===_(V).id?"bg-elevated border border-focused":"hover:bg-hover border border-transparent"}`),J(Me,_(V).title||"New Chat")}),T(ee,ce)}),I(ue),I(R),T(E,R)};F(it,E=>{_(a)&&E(dr)})}var St=Z(it,2),ut=k(St);let Dt;var fr=k(ut),pr=k(fr),mr=Z(k(pr),2);mr.__click=()=>$(d,!0);var ss=k(mr);Ae(ss,{variant:"default",children:(E,R)=>{de();var B=Ie();q(ie=>J(B,ie),[()=>_(l).split(".").pop()]),T(E,B)},$$slots:{default:!0}}),I(mr),I(pr);var fn=Z(pr,2),hr=k(fn),is=k(hr);{var us=E=>{var R=km(),B=fe(R);qe(B,{variant:"pulse",color:"var(--agent-thinking)"}),de(2),T(E,R)},cs=E=>{var R=Ce(),B=fe(R);{var ie=ee=>{var V=Sm(),ce=fe(V);qe(ce,{variant:"dots",color:"var(--agent-streaming)"}),de(2),T(ee,V)},ue=ee=>{var V=zm();de(2),T(ee,V)};F(B,ee=>{_(pe)?ee(ie):ee(ue,!1)},!0)}T(E,R)};F(is,E=>{_(se)?E(us):E(cs,!1)})}I(hr);var vr=Z(hr,2);vr.__click=he;var ls=k(vr,!0);I(vr),I(fn),I(fr);var gr=Z(fr,2),ds=k(gr);{var fs=E=>{var R=xm(),B=k(R),ie=Z(k(B),6),ue=k(ie);Ae(ue,{variant:"default",children:(ae,Me)=>{de();var ve=Ie("Compute");T(ae,ve)},$$slots:{default:!0}});var ee=Z(ue,2);Ae(ee,{variant:"default",children:(ae,Me)=>{de();var ve=Ie("Networking");T(ae,ve)},$$slots:{default:!0}});var V=Z(ee,2);Ae(V,{variant:"default",children:(ae,Me)=>{de();var ve=Ie("Storage");T(ae,ve)},$$slots:{default:!0}});var ce=Z(V,2);Ae(ce,{variant:"default",children:(ae,Me)=>{de();var ve=Ie("Database");T(ae,ve)},$$slots:{default:!0}});var ge=Z(ce,2);Ae(ge,{variant:"default",children:(ae,Me)=>{de();var ve=Ie("Identity");T(ae,ve)},$$slots:{default:!0}}),I(ie),I(B),I(R),T(E,R)},ps=E=>{var R=Pm(),B=fe(R);at(B,17,()=>x.messages,Dr,(ee,V,ce)=>{var ge=Nm(),ae=k(ge),Me=k(ae),ve=k(Me),wr=k(ve,!0);I(ve);var Ut=Z(ve,2);{var Er=Pe=>{qe(Pe,{variant:"dots",size:"sm",color:"var(--agent-streaming)"})};F(Ut,Pe=>{_(V).role==="assistant"&&ce===x.messages.length-1&&_(pe)&&Pe(Er)})}I(Me);var Je=Z(Me,2);at(Je,17,()=>_(V).parts,Dr,(Pe,Qe)=>{var yn=Ce(),Is=fe(yn);{var ks=ct=>{var lt=Om(),Ir=k(lt,!0);I(lt),q(()=>J(Ir,_(Qe).text)),T(ct,lt)},Ss=ct=>{var lt=Ce(),Ir=fe(lt);{var zs=kr=>{var Sr=Tm(),bn=k(Sr),wn=k(bn);Ae(wn,{variant:"info",children:(Os,Dm)=>{de();var In=Ie();q(()=>J(In,_(Qe).toolInvocation.toolName)),T(Os,In)},$$slots:{default:!0}});var En=Z(wn,2),xs=k(En,!0);I(En),I(bn),I(Sr),q(()=>J(xs,_(Qe).toolInvocation.state)),T(kr,Sr)};F(Ir,kr=>{_(Qe).type==="tool-invocation"&&kr(zs)},!0)}T(ct,lt)};F(Is,ct=>{_(Qe).type==="text"?ct(ks):ct(Ss,!1)})}T(Pe,yn)});var Ft=Z(Je,2);{var Jt=Pe=>{var Qe=Am();T(Pe,Qe)};F(Ft,Pe=>{_(V).role==="assistant"&&ce===x.messages.length-1&&_(pe)&&Pe(Jt)})}I(ae),I(ge),q(()=>{Ne(ge,1,`message flex ${_(V).role==="user"?"justify-end":"justify-start"}`),Ne(ae,1,`max-w-[80%] rounded-lg px-4 py-3 ${_(V).role==="user"?"message-user":"message-assistant"}`),Ne(ve,1,Fr(_(V).role==="user"?"text-accent":"text-primary")),J(wr,_(V).role==="user"?"You":"Agent")}),T(ee,ge)});var ie=Z(B,2);{var ue=ee=>{var V=Zm(),ce=k(V),ge=k(ce),ae=k(ge);qe(ae,{variant:"dots"}),de(2),I(ge),I(ce),I(V),T(ee,V)};F(ie,ee=>{_(U)&&x.messages.length>0&&x.messages[x.messages.length-1].role==="user"&&ee(ue)})}T(E,R)};F(ds,E=>{x.messages.length===0?E(fs):E(ps,!1)})}I(gr);var _r=Z(gr,2),pn=k(_r),Lt=k(pn);yi(Lt);var yr=Z(Lt,2),ms=k(yr);{var hs=E=>{qe(E,{variant:"ring",size:"sm",color:"var(--bg-primary)"})},vs=E=>{var R=Ie("Send");T(E,R)};F(ms,E=>{_(U)?E(hs):E(vs,!1)})}I(yr),I(pn),I(_r),I(ut);var gs=Z(ut,2);{var _s=E=>{var R=Rm(),B=k(R);im(B,{get isOpen(){return _(s)},get thought(){return _(g)},get isThinking(){return _(se)},ontoggle:()=>$(s,!_(s))});var ie=Z(B,2);dm(ie,{get isOpen(){return _(c)},get steps(){return _(b)},ontoggle:()=>$(c,!_(c))});var ue=Z(ie,2);bm(ue,{get isOpen(){return _(u)},get tools(){return _(f)},get pendingApproval(){return _(z)},ontoggle:()=>$(u,!_(u)),onapprove:Oe,onreject:Te}),I(R),T(E,R)};F(gs,E=>{_(o)&&E(_s)})}I(St),I(Ee);var mn=Z(Ee,2);nm(mn,{get isOpen(){return _(d)},get currentModel(){return _(l)},get models(){return _(m)},get region(){return _(y)},onselect:E=>$(l,E,!0),onclose:()=>$(d,!1)});var hn=Z(mn,2),br=k(hn),ys=Z(k(br),8);{var bs=E=>{var R=$m();T(E,R)};F(ys,E=>{_(z)&&E(bs)})}I(br);var vn=Z(br,2),gn=k(vn);{var ws=E=>{var R=jm(),B=fe(R),ie=k(B);I(B);var ue=Z(B,2);{var ee=V=>{var ce=Cm(),ge=k(ce);I(ce),q(ae=>J(ge,`$${ae??""}`),[()=>_(w).cost.toFixed(4)]),T(V,ce)};F(ue,V=>{_(w).cost>0&&V(ee)})}q(()=>J(ie,`${_(w).input+_(w).output} tokens`)),T(E,R)};F(gn,E=>{(_(w).input>0||_(w).output>0)&&E(ws)})}var _n=Z(gn,2),Es=k(_n,!0);I(_n),I(vn),I(hn),q(E=>{Dt=Jr(ut,"",Dt,{width:_(o)?"var(--panel-chat)":"100%"}),J(ls,_(o)?"â":"â¶"),Lt.disabled=_(U),yr.disabled=E,J(Es,_(y))},[()=>_(U)||!_(i).trim()]),An("submit",_r,O),Ei(Lt,()=>_(i),E=>$(i,E)),T(e,le),Et()}or(["click"]);export{Bm as component};
