var J=Object.defineProperty;var B=t=>{throw TypeError(t)};var K=(t,e,s)=>e in t?J(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var N=(t,e,s)=>K(t,typeof e!="symbol"?e+"":e,s),w=(t,e,s)=>e.has(t)||B("Cannot "+s);var a=(t,e,s)=>(w(t,e,"read from private field"),s?s.call(t):e.get(t)),v=(t,e,s)=>e.has(t)?B("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),Y=(t,e,s,i)=>(w(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s);import{D as F,F as Q,G as O,H as V,q as x,I as U,h as D,z as W,J as X,K as j,L as ee,b as te,M as se,N as ae,O as re,P as ie,B as fe,Q as q,R as ne,S as ce,a as $,U as de,V as z,W as he,X as ue,Y as _e,i as m,Z as le,_ as oe,$ as ve,v as be,a0 as Se,a1 as ge,a2 as Pe,l as Ae,a3 as Ee,a4 as Re,k as Ie,a5 as Te,a6 as pe}from"./D_LdEIn5.js";var _,l,u,b,E,R,p;class ye{constructor(e,s=!0){N(this,"anchor");v(this,_,new Map);v(this,l,new Map);v(this,u,new Map);v(this,b,new Set);v(this,E,!0);v(this,R,()=>{var e=F;if(a(this,_).has(e)){var s=a(this,_).get(e),i=a(this,l).get(s);if(i)Q(i),a(this,b).delete(s);else{var f=a(this,u).get(s);f&&(a(this,l).set(s,f.effect),a(this,u).delete(s),f.fragment.lastChild.remove(),this.anchor.before(f.fragment),i=f.effect)}for(const[r,c]of a(this,_)){if(a(this,_).delete(r),r===e)break;const n=a(this,u).get(c);n&&(O(n.effect),a(this,u).delete(c))}for(const[r,c]of a(this,l)){if(r===s||a(this,b).has(r))continue;const n=()=>{if(Array.from(a(this,_).values()).includes(r)){var o=document.createDocumentFragment();X(c,o),o.append(x()),a(this,u).set(r,{effect:c,fragment:o})}else O(c);a(this,b).delete(r),a(this,l).delete(r)};a(this,E)||!i?(a(this,b).add(r),V(c,n,!1)):n()}}});v(this,p,e=>{a(this,_).delete(e);const s=Array.from(a(this,_).values());for(const[i,f]of a(this,u))s.includes(i)||(O(f.effect),a(this,u).delete(i))});this.anchor=e,Y(this,E,s)}ensure(e,s){var i=F,f=j();if(s&&!a(this,l).has(e)&&!a(this,u).has(e))if(f){var r=document.createDocumentFragment(),c=x();r.append(c),a(this,u).set(e,{effect:U(()=>s(c)),fragment:r})}else a(this,l).set(e,U(()=>s(this.anchor)));if(a(this,_).set(i,e),f){for(const[n,d]of a(this,l))n===e?i.skipped_effects.delete(d):i.skipped_effects.add(d);for(const[n,d]of a(this,u))n===e?i.skipped_effects.delete(d.effect):i.skipped_effects.add(d.effect);i.oncommit(a(this,R)),i.ondiscard(a(this,p))}else D&&(this.anchor=W),a(this,R).call(this)}}_=new WeakMap,l=new WeakMap,u=new WeakMap,b=new WeakMap,E=new WeakMap,R=new WeakMap,p=new WeakMap;function ke(t,e,s=!1){D&&te();var i=new ye(t),f=s?se:0;function r(c,n){if(D){const o=ae(t)===re;if(c===o){var d=ie();fe(d),i.anchor=d,q(!1),i.ensure(c,n),q(!0);return}}i.ensure(c,n)}ee(()=>{var c=!1;e((n,d=!0)=>{c=!0,r(d,n)}),c||r(!1,null)},f)}function C(t,e){return t===e||(t==null?void 0:t[z])===e}function Le(t={},e,s,i){return ne(()=>{var f,r;return ce(()=>{f=r,r=[],$(()=>{t!==s(...r)&&(e(t,...r),f&&C(s(...f),t)&&e(null,...f))})}),()=>{de(()=>{r&&C(s(...r),t)&&e(null,...r)})}}),t}let T=!1;function Oe(t){var e=T;try{return T=!1,[t(),T]}finally{T=e}}function Me(t,e,s,i){var L;var f=!Ae||(s&Ee)!==0,r=(s&Pe)!==0,c=(s&ge)!==0,n=i,d=!0,o=()=>(d&&(d=!1,n=c?$(i):i),n),g;if(r){var G=z in t||pe in t;g=((L=he(t,e))==null?void 0:L.set)??(G&&e in t?h=>t[e]=h:void 0)}var P,k=!1;r?[P,k]=Oe(()=>t[e]):P=t[e],P===void 0&&i!==void 0&&(P=o(),g&&(f&&ue(),g(P)));var S;if(f?S=()=>{var h=t[e];return h===void 0?o():(d=!0,h)}:S=()=>{var h=t[e];return h!==void 0&&(n=void 0),h===void 0?n:h},f&&(s&_e)===0)return S;if(g){var H=t.$$legacy;return(function(h,I){return arguments.length>0?((!f||!I||H||k)&&g(I?S():h),h):S()})}var y=!1,A=((s&Re)!==0?Ie:Te)(()=>(y=!1,S()));r&&m(A);var Z=be;return(function(h,I){if(arguments.length>0){const M=I?m(A):f&&r?le(h):h;return oe(A,M),y=!0,n!==void 0&&(n=M),h}return ve&&y||(Z.f&Se)!==0?A.v:m(A)})}export{ye as B,Le as b,ke as i,Me as p};
