# OCI GenAI Provider

> Vercel AI SDK v3 provider for Oracle Cloud Infrastructure Generative AI

This monorepo project implements a custom language model provider for the Vercel AI SDK, enabling developers to use OCI Generative AI models (Grok, Llama, Cohere, Gemini) through the standard AI SDK interface.

## Info

- **Region**: eu-frankfurt-1 (primary)
- **Version**: 0.1.0 (in development)
- **Architecture**: pnpm workspace monorepo (3 packages)
- **Core Package**: @acedergren/oci-genai-provider
- **OpenCode Package**: @acedergren/opencode-oci-genai
- **Test Utils**: @acedergren/test-utils (private)
- **License**: MIT
- **Status**: Implementation in progress (TDD workflow)

## Monorepo Packages

This project is organized as a monorepo with three packages:

1. **@acedergren/oci-genai-provider** - Core provider (standalone, works with any Vercel AI SDK project)
   - Path: /packages/oci-genai-provider/
   - 121 comprehensive tests (80%+ coverage target)
   - Published to npm

2. **@acedergren/opencode-oci-genai** - OpenCode-specific integration
   - Path: /packages/opencode-integration/
   - Re-exports core provider + OpenCode utilities
   - Published to npm

3. **@acedergren/test-utils** - Shared test infrastructure
   - Path: /packages/test-utils/
   - OCI SDK mocks and fixtures
   - Private package (not published)

## Quick Reference

- Getting Started: /docs/getting-started/README.md
- Testing Guide: /docs/testing/README.md
- TDD Plan: /docs/plans/2026-01-27-core-provider-tdd-implementation.md
- Authentication: /docs/guides/authentication/README.md
- IAM Policies: /docs/guides/iam-policies/README.md
- Model Catalog: /docs/reference/oci-genai-models/README.md

## Topic Files

For focused documentation, see these topic-specific llms.txt files:

- API Reference: llms-api-reference.txt
- Implementation Guides: llms-guides.txt
- Model Selection: llms-models.txt
- Use Cases & Tutorials: llms-use-cases.txt
- Architecture & Security: llms-architecture.txt

## Testing & Development

**Test-Driven Development (TDD)**:
- 121 comprehensive tests across 14 test files
- RED-GREEN-REFACTOR cycle with atomic commits
- 80%+ code coverage target (branches, functions, lines, statements)
- Shared test utilities (@acedergren/test-utils)

**Test Categories**:
- Type definitions (3 tests)
- Authentication (4 tests)
- Model registry (28 tests)
- Message conversion (9 tests)
- Language model doGenerate (22 tests)
- Streaming (SSE parser: 11 tests, doStream: 8 tests)
- Provider factory (16 tests)
- Error handling (20 tests)

**Workspace Commands**:
```bash
pnpm install              # Install all dependencies
pnpm build                # Build all packages
pnpm test                 # Run all tests
pnpm test:coverage        # Run tests with coverage
pnpm type-check          # TypeScript type checking
```

## Core Concepts

**Authentication Methods**:
- API Key (config file)
- Instance Principal (OCI Compute)
- Resource Principal (OCI Functions)

**Supported Model Families**:
- xAI Grok (4-maverick, 4-scout, 3, 3-mini)
- Meta Llama (3.3-70b, 3.2-vision, 3.1-405b)
- Cohere Command (R+, A, A-reasoning, A-vision)
- Google Gemini (2.5-pro, 2.5-flash, 2.5-flash-lite)
- OpenAI gpt-oss

**Key Features**:
- Streaming responses (SSE)
- Tool/function calling
- Vision capabilities (select models)
- Fine-tuning support
- Regional deployment (11 regions)

## Example Usage

```typescript
import { createOCI } from '@acedergren/oci-genai-provider';
import { generateText } from 'ai';

const oci = createOCI({
  region: 'eu-frankfurt-1',
  profile: 'DEFAULT',
});

const { text } = await generateText({
  model: oci('cohere.command-r-plus'),
  prompt: 'Explain OCI Generative AI',
});
```

## Architecture Files

- Design Decisions: /docs/architecture/design-decisions.md
- Technology Stack: /docs/architecture/technology-stack.md
- Code Conventions: /docs/architecture/code-conventions.md

## Requirements

- Original Spec: /docs/archive/requirements-spec.md (1,420 lines)
- Configuration: /docs/guides/opencode-integration/configuration.md
- Security: /docs/security/README.md
